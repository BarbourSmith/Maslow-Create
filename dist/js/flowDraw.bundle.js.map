{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/flowDraw.js","webpack:///./src/js/githubOauth.js","webpack:///./src/js/globalvariables.js","webpack:///./src/js/menu.js","webpack:///./src/js/molecules/circle.js","webpack:///./src/js/molecules/constant.js","webpack:///./src/js/molecules/difference.js","webpack:///./src/js/molecules/equation.js","webpack:///./src/js/molecules/extrude.js","webpack:///./src/js/molecules/githubmolecule.js","webpack:///./src/js/molecules/input.js","webpack:///./src/js/molecules/intersection.js","webpack:///./src/js/molecules/mirror.js","webpack:///./src/js/molecules/molecule.js","webpack:///./src/js/molecules/output.js","webpack:///./src/js/molecules/readme.js","webpack:///./src/js/molecules/rectangle.js","webpack:///./src/js/molecules/regularpolygon.js","webpack:///./src/js/molecules/rotate.js","webpack:///./src/js/molecules/scale.js","webpack:///./src/js/molecules/shrinkwrap.js","webpack:///./src/js/molecules/translate.js","webpack:///./src/js/molecules/union.js","webpack:///./src/js/prototypes/atom.js","webpack:///./src/js/prototypes/attachmentpoint.js","webpack:///./src/js/prototypes/connector.js"],"names":["GlobalVariables","canvas","document","querySelector","c","getContext","width","innerWidth","height","innerHeight","lowerHalfOfScreen","setAttribute","flowCanvas","getElementById","addEventListener","Menu","showmenu","currentMolecule","nodesOnTheScreen","forEach","molecule","clickMove","event","clientX","clientY","window","console","log","bounds","getBoundingClientRect","clickHandledByMolecule","clickDown","backgroundClick","contains","target","hidemenu","doubleClick","clickUp","keyPress","key","init","Molecule","x","y","topLevel","name","atomType","uniqueID","generateUniqueID","animate","requestAnimationFrame","clearRect","update","GitHubModule","octokit","Octokit","popup","currentRepoName","currentUser","bomHeader","intervalTimer","button","tryLogin","OAuth","initialize","then","authenticate","type","token","github","access_token","users","getAuthenticated","showProjectsToLoad","firstChild","removeChild","classList","remove","titleDiv","createElement","title","appendChild","createTextNode","projectsSpaceDiv","addProject","result","data","login","repos","list","affiliation","headers","status","listTopics","owner","repo","accept","names","includes","projectName","project","projectPicture","shortProjectName","length","substr","projectClicked","createNewProjectPopup","loadProject","createNewProjectDiv","header","form","description","createButton","buttonText","undefined","clearInterval","value","topLevelMolecule","createForAuthenticatedUser","path","content","btoa","createFile","message","setInterval","saveProject","replaceTopics","add","JSON","stringify","serialize","getContents","sha","thisRepo","updateFile","requestBOM","item","BOMitemName","totalNeeded","costUSD","source","get","requestReadme","rawFile","atob","moleculesList","parse","molecules","deserialize","filter","repoName","id","replaceThisMoleculeWithGithub","availableTypes","circle","creator","Circle","rectangle","Rectangle","shirinkwrap","ShrinkWrap","translate","Translate","regularPolygon","RegularPolygon","extrude","Extrude","scale","Scale","intersection","Intersection","difference","Difference","costant","Constant","equation","Equation","input","Input","readme","Readme","rotate","Rotate","mirror","Mirror","githubmolecule","GitHubMolecule","union","Union","secretTypes","output","Output","sideBar","gitHub","Math","floor","random","x1","x2","y1","y2","a2","pow","b2","dist","sqrt","menu","menuList","newElement","instance","text","placeNewNode","ev","clr","placeAtom","parent","projectID","click","preventDefault","ul","li","getElementsByTagName","i","style","display","top","left","focus","evt","getElementsByClassName","a","txtValue","toUpperCase","textContent","innerText","indexOf","code","githubList","oldResults","search","q","sort","per_page","topic","page","items","topics","placeGitHubMolecule","tabName","tabcontent","tablinks","className","replace","currentTarget","values","defaultCodeBlock","codeBlock","addIO","setValues","updateCodeBlock","maximumSegmentSize","findIOValue","circumference","numberOfSegments","parseInt","regex","Atom","radius","ioValues","children","ioValue","io","setValue","valueList","createEditableValueListItem","newName","valuesObj","getValue","child","draw","beginPath","fillStyle","color","rect","textAlign","fillText","fill","closePath","equationOptions","currentEquation","savedObject","superSerialObject","z","cos","sin","newValue","createDropDown","centerColor","loadProjectByID","clickProcessed","distFromClick","distBetweenPoints","request","user","savedConnectors","placeConnector","connector","object","moveTo","lineTo","removeIO","theNewName","newOutput","valueType","parentMolecule","arc","PI","updateSidebar","atom","setOutput","selected","sendToRender","goToParentMolecule","exportToGithub","createBOM","BOMlist","self","exportCurrentMoleculeToGithub","githubID","deleteNode","generatedBOM","concat","generatedReadme","push","sortableAtomsList","b","allElementsCode","Array","allAtoms","allConnectors","attachmentPoint","connectors","thisAsObject","moleculeList","moleculeID","moleculeObject","newAtomObj","typesList","setID","connectorObj","cp1NotFound","cp2NotFound","ap2","ap1ID","ap1Name","Connector","attachmentPoint1","ap2ID","ap2Name","attachmentPoint2","propogate","newID","readmeText","strokeStyle","lineWidth","lineCap","stroke","newText","buildPolygonCodeBlock","polygon","angle","closedSelection","arrayOfChildrenString","numberOfElements","endString","splice","howManyInputPortsAvailable","deleteEmptyPort","portsAvailable","saveIO","defaultColor","selectedColor","isMoving","inputX","outputX","canvasFlow","defaultValue","offset","AttachmentPoint","defaultOffsetX","defaultOffsetY","deleteSelf","numberOfThisInstance","bomItem","numberNeeded","toRender","loadDesign","ioName","split","join","label","resultShouldBeNumber","listElement","div","labelDiv","labelText","valueTextDiv","valueText","thisID","valueInBox","parseFloat","which","blur","options","selectedOption","dropDown","op","Option","findIndex","thisOption","option","selectedIndex","changeEquation","functionToCall","buttonTextNode","createNonEditableValueListItem","addBOMEntry","BOMEntry","defaultRadius","expandedRadius","hoverDetectRadius","hoverOffsetX","hoverOffsetY","offsetX","offsetY","showHoverText","txt","textWidth","measureText","bubbleColor","scaleRadiusDown","halfRadius","distFromCursor","numAttachmentPoints","attachmentPointNumber","anglePerIO","angleCorrection","round","startX","startY","globalCompositeOperation","bezierCurveTo","endX","endY","thisConnectionValid","wasConnectionMade"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;AChFA;;;;AACA;;;;AACA;;;;;;AAEAA,0BAAgBC,MAAhB,GAAyBC,SAASC,aAAT,CAAuB,QAAvB,CAAzB;AACAH,0BAAgBI,CAAhB,GAAoBJ,0BAAgBC,MAAhB,CAAuBI,UAAvB,CAAkC,IAAlC,CAApB;;AAEAL,0BAAgBC,MAAhB,CAAuBK,KAAvB,GAA+BC,UAA/B;AACAP,0BAAgBC,MAAhB,CAAuBO,MAAvB,GAAgCC,cAAY,CAA5C;;AAEA,IAAIC,oBAAoBR,SAASC,aAAT,CAAuB,cAAvB,CAAxB;AACAO,kBAAkBC,YAAlB,CAA+B,OAA/B,EAAuC,YAAUF,cAAY,GAAtB,GAA0B,IAAjE;;AAEA;AACA,IAAIG,aAAaV,SAASW,cAAT,CAAwB,aAAxB,CAAjB;AACAD,WAAWE,gBAAX,CAA4B,aAA5B,EAA2CC,eAAKC,QAAhD,E,CAA2D;;AAE3DJ,WAAWE,gBAAX,CAA4B,WAA5B,EAAyC,iBAAS;AAC9Cd,8BAAgBiB,eAAhB,CAAgCC,gBAAhC,CAAiDC,OAAjD,CAAyD,oBAAY;AACjEC,iBAASC,SAAT,CAAmBC,MAAMC,OAAzB,EAAiCD,MAAME,OAAvC;AACH,KAFD;AAGH,CAJD;;AAMAC,OAAOX,gBAAP,CAAwB,QAAxB,EAAkC,iBAAS;;AAEvCY,YAAQC,GAAR,CAAY,QAAZ;;AAEA,QAAIC,SAAS5B,0BAAgBC,MAAhB,CAAuB4B,qBAAvB,EAAb;AACA7B,8BAAgBC,MAAhB,CAAuBK,KAAvB,GAA+BsB,OAAOtB,KAAtC;AACAN,8BAAgBC,MAAhB,CAAuBO,MAAvB,GAAgCoB,OAAOpB,MAAvC;AAEH,CARD;;AAUAI,WAAWE,gBAAX,CAA4B,WAA5B,EAAyC,iBAAS;AAC9C;;AAEA,QAAIgB,yBAAyB,KAA7B;;AAEA9B,8BAAgBiB,eAAhB,CAAgCC,gBAAhC,CAAiDC,OAAjD,CAAyD,oBAAY;AACjE,YAAIC,SAASW,SAAT,CAAmBT,MAAMC,OAAzB,EAAiCD,MAAME,OAAvC,KAAmD,IAAvD,EAA4D;AACxDM,qCAAyB,IAAzB;AACH;AACJ,KAJD;;AAMA,QAAG,CAACA,sBAAJ,EAA2B;AACvB9B,kCAAgBiB,eAAhB,CAAgCe,eAAhC;AACH;;AAED;AACA,QAAI,CAAC9B,SAASC,aAAT,CAAuB,OAAvB,EAAgC8B,QAAhC,CAAyCX,MAAMY,MAA/C,CAAL,EAA6D;AACzDC;AACH;AAEJ,CApBD;;AAsBAvB,WAAWE,gBAAX,CAA4B,UAA5B,EAAwC,iBAAS;AAC7C;;AAEA,QAAIgB,yBAAyB,KAA7B;;AAEA9B,8BAAgBiB,eAAhB,CAAgCC,gBAAhC,CAAiDC,OAAjD,CAAyD,oBAAY;AACjE,YAAIC,SAASgB,WAAT,CAAqBd,MAAMC,OAA3B,EAAmCD,MAAME,OAAzC,KAAqD,IAAzD,EAA8D;AAC1DM,qCAAyB,IAAzB;AACH;AACJ,KAJD;;AAMA,QAAIA,0BAA0B,KAA9B,EAAoC;AAChCd,iBAASM,KAAT;AACH;AACJ,CAdD;;AAgBAV,WAAWE,gBAAX,CAA4B,SAA5B,EAAuC,iBAAS;AAC5C;AACAd,8BAAgBiB,eAAhB,CAAgCC,gBAAhC,CAAiDC,OAAjD,CAAyD,oBAAY;AACjEC,iBAASiB,OAAT,CAAiBf,MAAMC,OAAvB,EAA+BD,MAAME,OAArC;AACH,KAFD;AAGH,CALD;;AAOAC,OAAOX,gBAAP,CAAwB,SAAxB,EAAmC,iBAAS;AACxC;;AAEAd,8BAAgBiB,eAAhB,CAAgCC,gBAAhC,CAAiDC,OAAjD,CAAyD,oBAAY;AACjEC,iBAASkB,QAAT,CAAkBhB,MAAMiB,GAAxB;AACH,KAFD;AAGH,CAND;;AASA;;AAEA,SAASC,IAAT,GAAgB;AACZxC,8BAAgBiB,eAAhB,GAAkC,IAAIwB,kBAAJ,CAAa;AAC3CC,WAAG,CADwC;AAE3CC,WAAG,CAFwC;AAG3CC,kBAAU,IAHiC;AAI3CC,cAAM,eAJqC;AAK3CC,kBAAU,UALiC;AAM3CC,kBAAU/C,0BAAgBgD,gBAAhB;AANiC,KAAb,CAAlC;AASH;;AAED;AACA,SAASC,OAAT,GAAmB;AACfC,0BAAsBD,OAAtB;AACAjD,8BAAgBI,CAAhB,CAAkB+C,SAAlB,CAA4B,CAA5B,EAA+B,CAA/B,EAAkCnD,0BAAgBC,MAAhB,CAAuBK,KAAzD,EAAgEN,0BAAgBC,MAAhB,CAAuBO,MAAvF;;AAEAR,8BAAgBiB,eAAhB,CAAgCC,gBAAhC,CAAiDC,OAAjD,CAAyD,oBAAY;AACjEC,iBAASgC,MAAT;AACH,KAFD;AAGH;;AAEDZ;AACAS,U;;;;;;;;;;;;;;;;;;;;;;;;IChHqBI,Y;AAEjB,4BAAa;AAAA;;AACT,aAAKC,OAAL,GAAe,IAAIC,OAAJ,EAAf;AACA,aAAKC,KAAL,GAAatD,SAASW,cAAT,CAAwB,gBAAxB,CAAb;AACA,aAAK4C,eAAL,GAAuB,IAAvB;AACA,aAAKC,WAAL,GAAmB,IAAnB;AACA,aAAKC,SAAL,GAAiB,2LAAjB;;AAEA,aAAKC,aAAL,GAAqB,IAArB;;AAEA,YAAIC,SAAS3D,SAASW,cAAT,CAAwB,aAAxB,CAAb;AACAgD,eAAO/C,gBAAP,CAAwB,WAAxB,EAAqC,KAAKgD,QAA1C;AACH;;;;mCAES;AAAA;;AAEN;AACAC,kBAAMC,UAAN,CAAiB,6BAAjB;AACA;AACAD,kBAAMP,KAAN,CAAY,QAAZ,EAAsBS,IAAtB,CAA2B,kBAAU;;AAEjC,sBAAKX,OAAL,CAAaY,YAAb,CAA0B;AACtBC,0BAAM,OADgB;AAEtBC,2BAAOC,OAAOC;AAFQ,iBAA1B;;AAKA;AACA,sBAAKhB,OAAL,CAAaiB,KAAb,CAAmBC,gBAAnB,CAAoC,EAApC,EAAwCP,IAAxC,CAA6C,kBAAU;AACnDQ;AACH,iBAFD;AAGH,aAXD;AAYH;;;6CAEmB;AAAA;;AAChB;AACA,mBAAOjB,MAAMkB,UAAb,EAAyB;AACrBlB,sBAAMmB,WAAN,CAAkBnB,MAAMkB,UAAxB;AACH;;AAEDlB,kBAAMoB,SAAN,CAAgBC,MAAhB,CAAuB,KAAvB;;AAEA;AACA,gBAAIC,WAAW5E,SAAS6E,aAAT,CAAuB,KAAvB,CAAf;AACAD,qBAASnE,YAAT,CAAsB,OAAtB,EAA+B,aAA/B;AACAmE,qBAASnE,YAAT,CAAsB,OAAtB,EAA+B,eAA/B;AACA,gBAAIqE,QAAQ9E,SAAS6E,aAAT,CAAuB,IAAvB,CAAZ;AACAC,kBAAMC,WAAN,CAAkB/E,SAASgF,cAAT,CAAwB,WAAxB,CAAlB;AACAJ,qBAASG,WAAT,CAAqBD,KAArB;AACAxB,kBAAMyB,WAAN,CAAkBH,QAAlB;AACAtB,kBAAMyB,WAAN,CAAkB/E,SAAS6E,aAAT,CAAuB,IAAvB,CAAlB;;AAEA,gBAAII,mBAAmBjF,SAAS6E,aAAT,CAAuB,KAAvB,CAAvB;AACAI,6BAAiBxE,YAAjB,CAA8B,OAA9B,EAAuC,iBAAvC;AACA6C,kBAAMyB,WAAN,CAAkBE,gBAAlB;;AAGA;AACAC,uBAAW,aAAX;;AAEA;AACA,iBAAK9B,OAAL,CAAaiB,KAAb,CAAmBC,gBAAnB,CAAoC,EAApC,EAAwCP,IAAxC,CAA6C,kBAAU;AACnDP,8BAAc2B,OAAOC,IAAP,CAAYC,KAA1B;AACH,aAFD;;AAIA;AACA,iBAAKjC,OAAL,CAAakC,KAAb,CAAmBC,IAAnB,CAAwB;AACtBC,6BAAa;AADS,aAAxB,EAEGzB,IAFH,CAEQ,gBAA6B;AAAA,oBAA3BqB,IAA2B,QAA3BA,IAA2B;AAAA,oBAArBK,OAAqB,QAArBA,OAAqB;AAAA,oBAAZC,MAAY,QAAZA,MAAY;;AACjCN,qBAAKnE,OAAL,CAAa,gBAAQ;;AAEjB;AACA,2BAAKmC,OAAL,CAAakC,KAAb,CAAmBK,UAAnB,CAA8B;AAC1BC,+BAAOC,KAAKD,KAAL,CAAWP,KADQ;AAE1BQ,8BAAMA,KAAKlD,IAFe;AAG1B8C,iCAAS;AACLK,oCAAQ;AADH;AAHiB,qBAA9B,EAMG/B,IANH,CAMQ,gBAAQ;AACZ,4BAAGqB,KAAKA,IAAL,CAAUW,KAAV,CAAgBC,QAAhB,CAAyB,cAAzB,KAA4CZ,KAAKA,IAAL,CAAUW,KAAV,CAAgBC,QAAhB,CAAyB,uBAAzB,CAA/C,EAAiG;AAC7Fd,uCAAWW,KAAKlD,IAAhB;AACH;AACJ,qBAVD;AAYH,iBAfD;AAgBH,aAnBD;AAqBH;;;mCAEUsD,W,EAAY;AACnB;;AAEA,gBAAIC,UAAUlG,SAAS6E,aAAT,CAAuB,KAAvB,CAAd;;AAEA,gBAAIsB,iBAAiBnG,SAAS6E,aAAT,CAAuB,KAAvB,CAArB;AACAsB,2BAAe1F,YAAf,CAA4B,KAA5B,EAAmC,iBAAnC;AACA0F,2BAAe1F,YAAf,CAA4B,OAA5B,EAAqC,aAArC;AACA0F,2BAAe1F,YAAf,CAA4B,OAA5B,EAAqC,cAArC;AACAyF,oBAAQnB,WAAR,CAAoBoB,cAApB;;AAEA,gBAAIC,gBAAJ;AACA,gBAAGH,YAAYI,MAAZ,GAAqB,CAAxB,EAA0B;AACtBD,mCAAmBpG,SAASgF,cAAT,CAAwBiB,YAAYK,MAAZ,CAAmB,CAAnB,EAAqB,CAArB,IAAwB,IAAhD,CAAnB;AACH,aAFD,MAGI;AACAF,mCAAmBpG,SAASgF,cAAT,CAAwBiB,WAAxB,CAAnB;AACH;AACDC,oBAAQzF,YAAR,CAAqB,OAArB,EAA8B,SAA9B;AACAyF,oBAAQzF,YAAR,CAAqB,IAArB,EAA2BwF,WAA3B;AACAC,oBAAQnB,WAAR,CAAoBqB,gBAApB;AACA9C,kBAAMyB,WAAN,CAAkBmB,OAAlB;;AAEAlG,qBAASW,cAAT,CAAwBsF,WAAxB,EAAqCrF,gBAArC,CAAsD,OAAtD,EAA+D,iBAAS;AACpE2F,+BAAeN,WAAf;AACH,aAFD;AAIH;;;uCAEcA,W,EAAY;AACvB;AACA,gBAAGA,eAAe,aAAlB,EAAgC;AAC5BO;AACH,aAFD,MAGI;AACAC,4BAAYR,WAAZ;AACH;AACJ;;;gDAEsB;AACnB;;AAEA,mBAAO3C,MAAMkB,UAAb,EAAyB;AACrBlB,sBAAMmB,WAAN,CAAkBnB,MAAMkB,UAAxB;AACH;;AAED;AACA;AACA,gBAAIkC,sBAAsB1G,SAAS6E,aAAT,CAAuB,KAAvB,CAA1B;AACA6B,gCAAoBjG,YAApB,CAAiC,OAAjC,EAA0C,MAA1C;;AAEA;AACA,gBAAIkG,SAAS3G,SAAS6E,aAAT,CAAuB,IAAvB,CAAb;AACA,gBAAIC,QAAQ9E,SAASgF,cAAT,CAAwB,sBAAxB,CAAZ;AACA2B,mBAAO5B,WAAP,CAAmBD,KAAnB;AACA4B,gCAAoB3B,WAApB,CAAgC4B,MAAhC;;AAEA;AACA,gBAAIC,OAAO5G,SAAS6E,aAAT,CAAuB,MAAvB,CAAX;AACA+B,iBAAKnG,YAAL,CAAkB,OAAlB,EAA2B,YAA3B;AACAiG,gCAAoB3B,WAApB,CAAgC6B,IAAhC;;AAEA;AACA,gBAAIjE,OAAO3C,SAAS6E,aAAT,CAAuB,OAAvB,CAAX;AACAlC,iBAAKlC,YAAL,CAAkB,IAAlB,EAAuB,cAAvB;AACAkC,iBAAKlC,YAAL,CAAkB,MAAlB,EAAyB,MAAzB;AACAkC,iBAAKlC,YAAL,CAAkB,aAAlB,EAAgC,cAAhC;AACAmG,iBAAK7B,WAAL,CAAiBpC,IAAjB;;AAEA;AACA,gBAAIkE,cAAc7G,SAAS6E,aAAT,CAAuB,OAAvB,CAAlB;AACAgC,wBAAYpG,YAAZ,CAAyB,IAAzB,EAA+B,qBAA/B;AACAoG,wBAAYpG,YAAZ,CAAyB,MAAzB,EAAiC,MAAjC;AACAoG,wBAAYpG,YAAZ,CAAyB,aAAzB,EAAwC,qBAAxC;AACAmG,iBAAK7B,WAAL,CAAiB8B,WAAjB;;AAEA;AACA,gBAAIC,eAAe9G,SAAS6E,aAAT,CAAuB,QAAvB,CAAnB;AACAiC,yBAAarG,YAAb,CAA0B,MAA1B,EAAkC,QAAlC;AACAqG,yBAAarG,YAAb,CAA0B,SAA1B,EAAqC,oBAArC;AACA,gBAAIsG,aAAa/G,SAASgF,cAAT,CAAwB,gBAAxB,CAAjB;AACA8B,yBAAa/B,WAAb,CAAyBgC,UAAzB;AACAH,iBAAK7B,WAAL,CAAiB+B,YAAjB;;AAGAxD,kBAAMyB,WAAN,CAAkB2B,mBAAlB;AAEH;;;2CAEiB;AAAA;;AAEd,gBAAG,QAAOhD,aAAP,yCAAOA,aAAP,MAAwBsD,SAA3B,EAAqC;AACjCC,8BAAcvD,aAAd,EADiC,CACH;AACjC;;AAED;AACA,gBAAIf,OAAO3C,SAASW,cAAT,CAAwB,cAAxB,EAAwCuG,KAAnD;AACA,gBAAIL,cAAc7G,SAASW,cAAT,CAAwB,qBAAxB,EAA+CuG,KAAjE;;AAEA;AACAC,+BAAmB,IAAI5E,QAAJ,CAAa;AAC5BC,mBAAG,CADyB;AAE5BC,mBAAG,CAFyB;AAG5BC,0BAAU,IAHkB;AAI5BC,sBAAMA,IAJsB;AAK5BC,0BAAU,UALkB;AAM5BC,0BAAUC;AANkB,aAAb,CAAnB;;AASA/B,8BAAkBoG,gBAAlB;;AAEA;AACA,iBAAK/D,OAAL,CAAakC,KAAb,CAAmB8B,0BAAnB,CAA8C;AAC1CzE,sBAAMA,IADoC;AAE1CkE,6BAAaA;AAF6B,aAA9C,EAGG9C,IAHH,CAGQ,kBAAU;AACd;AACAR,kCAAkB4B,OAAOC,IAAP,CAAYzC,IAA9B;AACA,oBAAI0E,OAAO,sBAAX;AACA,oBAAIC,UAAU/F,OAAOgG,IAAP,CAAY,MAAZ,CAAd,CAJc,CAIqB;AACnC,uBAAKnE,OAAL,CAAakC,KAAb,CAAmBkC,UAAnB,CAA8B;AAC1B5B,2BAAOpC,WADmB;AAE1BqC,0BAAMtC,eAFoB;AAG1B8D,0BAAMA,IAHoB;AAI1BI,6BAAS,iBAJiB;AAK1BH,6BAASA;AALiB,iBAA9B,EAMGvD,IANH,CAMQ,kBAAU;AACd;AACAuD,8BAAU/F,OAAOgG,IAAP,CAAY9D,SAAZ,CAAV,CAFc,CAEoB;AAClC,2BAAKL,OAAL,CAAakC,KAAb,CAAmBkC,UAAnB,CAA8B;AAC1B5B,+BAAOpC,WADmB;AAE1BqC,8BAAMtC,eAFoB;AAG1B8D,8BAAM,oBAHoB;AAI1BI,iCAAS,gBAJiB;AAK1BH,iCAASA;AALiB,qBAA9B,EAMGvD,IANH,CAMQ,kBAAU;AACd;AACAuD,kCAAU/F,OAAOgG,IAAP,CAAY,aAAZ,CAAV,CAFc,CAEwB;AACtC,+BAAKnE,OAAL,CAAakC,KAAb,CAAmBkC,UAAnB,CAA8B;AAC1B5B,mCAAOpC,WADmB;AAE1BqC,kCAAMtC,eAFoB;AAG1B8D,kCAAM,WAHoB;AAI1BI,qCAAS,mBAJiB;AAK1BH,qCAASA;AALiB,yBAA9B,EAMGvD,IANH,CAMQ,kBAAU;AACdvC,oCAAQC,GAAR,CAAY,gBAAZ;;AAEAiC,4CAAgBgE,YAAYC,WAAZ,EAAyB,KAAzB,CAAhB,CAHc,CAGmC;AACpD,yBAVD;AAWH,qBApBD;AAqBH,iBA9BD;;AAgCA;AACA,uBAAKvE,OAAL,CAAakC,KAAb,CAAmBsC,aAAnB,CAAiC;AAC7BhC,2BAAOpC,WADsB;AAE7BqC,0BAAMtC,eAFuB;AAG7BwC,2BAAO,CAAC,cAAD,CAHsB;AAI7BN,6BAAS;AACLK,gCAAQ;AADH;AAJoB,iBAAjC;AAQH,aAjDD;;AAmDA/E,4BAAgBe,eAAhB;;AAEA;AACA,mBAAOwB,MAAMkB,UAAb,EAAyB;AACrBlB,sBAAMmB,WAAN,CAAkBnB,MAAMkB,UAAxB;AACH;AACDlB,kBAAMoB,SAAN,CAAgBmD,GAAhB,CAAoB,KAApB;AAGH;;;sCAEY;AAAA;;AACT;;AAEA,gBAAGtE,mBAAmB,IAAtB,EAA2B;;AAEvB,oBAAI8D,OAAO,sBAAX;AACA,oBAAIC,UAAU/F,OAAOgG,IAAP,CAAYO,KAAKC,SAAL,CAAeZ,iBAAiBa,SAAjB,CAA2B,IAA3B,CAAf,EAAiD,IAAjD,EAAuD,CAAvD,CAAZ,CAAd,CAHuB,CAG+D;;AAEtF;AACA,qBAAK5E,OAAL,CAAakC,KAAb,CAAmB2C,WAAnB,CAA+B;AAC3BrC,2BAAOpC,WADoB;AAE3BqC,0BAAMtC,eAFqB;AAG3B8D,0BAAMA;AAHqB,iBAA/B,EAIGtD,IAJH,CAIQ,oBAAY;AAChB,wBAAImE,MAAMC,SAAS/C,IAAT,CAAc8C,GAAxB;;AAEA;AACA,2BAAK9E,OAAL,CAAakC,KAAb,CAAmB8C,UAAnB,CAA8B;AAC1BxC,+BAAOpC,WADmB;AAE1BqC,8BAAMtC,eAFoB;AAG1B8D,8BAAMA,IAHoB;AAI1BI,iCAAS,UAJiB;AAK1BH,iCAASA,OALiB;AAM1BY,6BAAKA;AANqB,qBAA9B,EAOGnE,IAPH,CAOQ,kBAAU;;AAEdvC,gCAAQC,GAAR,CAAY,eAAZ;;AAEA;;AAEA4F,+BAAO,oBAAP;AACAC,kCAAU7D,SAAV;;AAEA0D,yCAAiBkB,UAAjB,GAA8BpH,OAA9B,CAAsC,gBAAQ;AAC1CqG,sCAAUA,UAAU,KAAV,GAAkBgB,KAAKC,WAAvB,GAAqC,GAArC,GAA2CD,KAAKE,WAAhD,GAA8D,GAA9D,GAAoEF,KAAKG,OAAzE,GAAmF,GAAnF,GAAyFH,KAAKI,MAA9F,GAAuG,GAAjH;AACH,yBAFD;;AAIApB,kCAAU/F,OAAOgG,IAAP,CAAYD,OAAZ,CAAV;;AAEA;AACA,+BAAKlE,OAAL,CAAakC,KAAb,CAAmB2C,WAAnB,CAA+B;AAC3BrC,mCAAOpC,WADoB;AAE3BqC,kCAAMtC,eAFqB;AAG3B8D,kCAAMA;AAHqB,yBAA/B,EAIGtD,IAJH,CAIQ,kBAAU;AACd,gCAAImE,MAAM/C,OAAOC,IAAP,CAAY8C,GAAtB;;AAEA;AACA,mCAAK9E,OAAL,CAAakC,KAAb,CAAmB8C,UAAnB,CAA8B;AAC1BxC,uCAAOpC,WADmB;AAE1BqC,sCAAMtC,eAFoB;AAG1B8D,sCAAMA,IAHoB;AAI1BI,yCAAS,YAJiB;AAK1BH,yCAASA,OALiB;AAM1BY,qCAAKA;AANqB,6BAA9B,EAOGnE,IAPH,CAOQ,kBAAU;AACdvC,wCAAQC,GAAR,CAAY,aAAZ;;AAEA,uCAAK2B,OAAL,CAAakC,KAAb,CAAmBqD,GAAnB,CAAuB;AACnB/C,2CAAOpC,WADY;AAEnBqC,0CAAMtC;AAFa,iCAAvB,EAGGQ,IAHH,CAGQ,kBAAU;;AAEdsD,2CAAO,WAAP;AACAC,8CAAU,OAAOnC,OAAOC,IAAP,CAAYzC,IAAnB,GAA0B,IAA1B,GAAiCwC,OAAOC,IAAP,CAAYyB,WAA7C,GAA2D,IAArE;;AAEAM,qDAAiByB,aAAjB,GAAiC3H,OAAjC,CAAyC,gBAAQ;AAC7CqG,kDAAUA,UAAUgB,IAAV,GAAiB,QAA3B;AACH,qCAFD;;AAIAhB,8CAAU/F,OAAOgG,IAAP,CAAYD,OAAZ,CAAV;;AAEA;AACA,2CAAKlE,OAAL,CAAakC,KAAb,CAAmB2C,WAAnB,CAA+B;AAC3BrC,+CAAOpC,WADoB;AAE3BqC,8CAAMtC,eAFqB;AAG3B8D,8CAAMA;AAHqB,qCAA/B,EAIGtD,IAJH,CAIQ,kBAAU;AACd,4CAAImE,MAAM/C,OAAOC,IAAP,CAAY8C,GAAtB;;AAEA;AACA,+CAAK9E,OAAL,CAAakC,KAAb,CAAmB8C,UAAnB,CAA8B;AAC1BxC,mDAAOpC,WADmB;AAE1BqC,kDAAMtC,eAFoB;AAG1B8D,kDAAMA,IAHoB;AAI1BI,qDAAS,eAJiB;AAK1BH,qDAASA,OALiB;AAM1BY,iDAAKA;AANqB,yCAA9B,EAOGnE,IAPH,CAOQ,kBAAU;AACdvC,oDAAQC,GAAR,CAAY,gBAAZ;AACH,yCATD;AAUH,qCAlBD;AAmBH,iCAlCD;AAmCH,6BA7CD;AA8CH,yBAtDD;AAuDH,qBA9ED;AA+EH,iBAvFD;AAwFH;AACJ;;;oCAEWwE,W,EAAY;;AAEpB,gBAAG,QAAOvC,aAAP,yCAAOA,aAAP,MAAwBsD,SAA3B,EAAqC;AACjCC,8BAAcvD,aAAd,EADiC,CACH;AACjC;;AAEDH,8BAAkB0C,WAAlB;;AAEA,iBAAK7C,OAAL,CAAakC,KAAb,CAAmB2C,WAAnB,CAA+B;AAC3BrC,uBAAOpC,WADoB;AAE3BqC,sBAAMI,WAFqB;AAG3BoB,sBAAM;AAHqB,aAA/B,EAIGtD,IAJH,CAIQ,kBAAU;;AAEd;AACA,oBAAI8E,UAAUC,KAAK3D,OAAOC,IAAP,CAAYkC,OAAjB,CAAd;;AAGAyB,gCAAgBjB,KAAKkB,KAAL,CAAWH,OAAX,EAAoBI,SAApC;;AAEA;AACA9B,mCAAmB,IAAI5E,QAAJ,CAAa;AAC5BC,uBAAG,CADyB;AAE5BC,uBAAG,CAFyB;AAG5BC,8BAAU,IAHkB;AAI5BE,8BAAU;AAJkB,iBAAb,CAAnB;;AAOA7B,kCAAkBoG,gBAAlB;;AAEA;AACAA,iCAAiB+B,WAAjB,CAA6BH,aAA7B,EAA4CA,cAAcI,MAAd,CAAqB,UAACjI,QAAD,EAAc;AAAE,2BAAOA,SAASwB,QAAT,IAAqB,IAA5B;AAAmC,iBAAxE,EAA0E,CAA1E,EAA6EG,QAAzH;;AAEA9B,gCAAgBe,eAAhB;;AAEA;AACA,uBAAOwB,MAAMkB,UAAb,EAAyB;AACrBlB,0BAAMmB,WAAN,CAAkBnB,MAAMkB,UAAxB;AACH;AACDlB,sBAAMoB,SAAN,CAAgBmD,GAAhB,CAAoB,KAApB;;AAEAnE,gCAAgBgE,YAAYC,WAAZ,EAAyB,KAAzB,CAAhB,CA7Bc,CA6BmC;AACpD,aAlCD;AAoCH;;;sDAE6BzG,Q,EAAS;AAAA;;AAEnC;AACA,gBAAIyB,OAAOzB,SAASyB,IAApB;AACA,gBAAIkE,cAAc,oDAAlB;;AAEA;AACA,iBAAKzD,OAAL,CAAakC,KAAb,CAAmB8B,0BAAnB,CAA8C;AAC1CzE,sBAAMA,IADoC;AAE1CkE,6BAAaA;AAF6B,aAA9C,EAGG9C,IAHH,CAGQ,kBAAU;AACd;AACA,oBAAIqF,WAAWjE,OAAOC,IAAP,CAAYzC,IAA3B;AACA,oBAAI0G,KAAWlE,OAAOC,IAAP,CAAYiE,EAA3B;AACA,oBAAIhC,OAAW,sBAAf;AACA,oBAAIC,UAAW/F,OAAOgG,IAAP,CAAY,MAAZ,CAAf,CALc,CAKsB;AACpC,uBAAKnE,OAAL,CAAakC,KAAb,CAAmBkC,UAAnB,CAA8B;AAC1B5B,2BAAOpC,WADmB;AAE1BqC,0BAAMuD,QAFoB;AAG1B/B,0BAAMA,IAHoB;AAI1BI,6BAAS,iBAJiB;AAK1BH,6BAASA;AALiB,iBAA9B,EAMGvD,IANH,CAMQ,kBAAU;;AAEd;;AAEA,wBAAIsD,OAAO,sBAAX;;AAEAnG,6BAASwB,QAAT,GAAoB,IAApB,CANc,CAMY;AAC1B,wBAAI4E,UAAU/F,OAAOgG,IAAP,CAAYO,KAAKC,SAAL,CAAe7G,SAAS8G,SAAT,CAAmB,IAAnB,CAAf,EAAyC,IAAzC,EAA+C,CAA/C,CAAZ,CAAd,CAPc,CAOgE;;AAE9E;AACA,2BAAK5E,OAAL,CAAakC,KAAb,CAAmB2C,WAAnB,CAA+B;AAC3BrC,+BAAOpC,WADoB;AAE3BqC,8BAAMuD,QAFqB;AAG3B/B,8BAAMA;AAHqB,qBAA/B,EAIGtD,IAJH,CAIQ,kBAAU;AACd,4BAAImE,MAAM/C,OAAOC,IAAP,CAAY8C,GAAtB;;AAEA;AACA,+BAAK9E,OAAL,CAAakC,KAAb,CAAmB8C,UAAnB,CAA8B;AAC1BxC,mCAAOpC,WADmB;AAE1BqC,kCAAMuD,QAFoB;AAG1B/B,kCAAMA,IAHoB;AAI1BI,qCAAS,iBAJiB;AAK1BH,qCAASA,OALiB;AAM1BY,iCAAKA;AANqB,yBAA9B,EAOGnE,IAPH,CAOQ,kBAAU;AACdvC,oCAAQC,GAAR,CAAY,oBAAZ;;AAEA;AACAP,qCAASoI,6BAAT,CAAuCD,EAAvC;AACH,yBAZD;AAaH,qBArBD;AAuBH,iBAvCD;;AAyCA;AACA,uBAAKjG,OAAL,CAAakC,KAAb,CAAmBsC,aAAnB,CAAiC;AAC7BhC,2BAAOpC,WADsB;AAE7BqC,0BAAMuD,QAFuB;AAG7BrD,2BAAO,CAAC,uBAAD,CAHsB;AAI7BN,6BAAS;AACLK,gCAAQ;AADH;AAJoB,iBAAjC;AASH,aA5DD;AA6DH;;;;;;kBA7dgB3C,Y;;;;;;;;;;;;;;;;;;;;ACFrB;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;;;;;IAEMrD,e;AACF,+BAAa;AAAA;;AACT,aAAKC,MAAL,GAAc,IAAd;AACA,aAAKG,CAAL,GAAS,IAAT;;AAEA,aAAKqJ,cAAL,GAAsB;AAClBC,oBAAe,EAACC,SAASC,gBAAV,EAAkB9G,UAAU,QAA5B,EADG;AAElB+G,uBAAe,EAACF,SAASG,mBAAV,EAAqBhH,UAAU,WAA/B,EAFG;AAGlBiH,yBAAe,EAACJ,SAASK,oBAAV,EAAsBlH,UAAU,YAAhC,EAHG;AAIlBmH,uBAAe,EAACN,SAASO,mBAAV,EAAqBpH,UAAU,WAA/B,EAJG;AAKlBqH,4BAAe,EAACR,SAASS,wBAAV,EAA0BtH,UAAU,gBAApC,EALG;AAMlBuH,qBAAe,EAACV,SAASW,iBAAV,EAAmBxH,UAAU,SAA7B,EANG;AAOlByH,mBAAe,EAACZ,SAASa,eAAV,EAAiB1H,UAAU,OAA3B,EAPG;AAQlB2H,0BAAe,EAACd,SAASe,sBAAV,EAAwB5H,UAAU,cAAlC,EARG;AASlB6H,wBAAe,EAAChB,SAASiB,oBAAV,EAAsB9H,UAAU,YAAhC,EATG;AAUlB+H,qBAAe,EAAClB,SAASmB,kBAAV,EAAoBhI,UAAU,UAA9B,EAVG;AAWlBiI,sBAAe,EAACpB,SAASqB,kBAAV,EAAoBlI,UAAU,UAA9B,EAXG;AAYlB1B,sBAAe,EAACuI,SAASlH,kBAAV,EAAoBK,UAAU,UAA9B,EAZG;AAalBmI,mBAAe,EAACtB,SAASuB,eAAV,EAAiBpI,UAAU,OAA3B,EAbG;AAclBqI,oBAAe,EAACxB,SAASyB,gBAAV,EAAkBtI,UAAU,QAA5B,EAdG;AAelBuI,oBAAe,EAAC1B,SAAS2B,gBAAV,EAAkBxI,UAAU,QAA5B,EAfG;AAgBlByI,oBAAe,EAAC5B,SAAS6B,gBAAV,EAAkB1I,UAAU,QAA5B,EAhBG;AAiBlB2I,4BAAe,EAAC9B,SAAS+B,wBAAV,EAA0B5I,UAAU,gBAApC,EAjBG;AAkBlB6I,mBAAe,EAAChC,SAASiC,eAAV,EAAiB9I,UAAU,OAA3B;AAlBG,SAAtB;;AAqBA,aAAK+I,WAAL,GAAmB;AACfC,oBAAe,EAACnC,SAASoC,gBAAV,EAAkBjJ,UAAU,QAA5B;AADA,SAAnB;;AAKA,aAAK7B,eAAL;AACA,aAAKoG,gBAAL;;AAEA,aAAK2E,OAAL,GAAe9L,SAASC,aAAT,CAAuB,UAAvB,CAAf;;AAEA,aAAK8L,MAAL,GAAc,IAAI5I,qBAAJ,EAAd;AACH;;;;2CAEiB;AACd,mBAAO6I,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAc,MAAzB,IAAmC,MAA1C;AACH;;;0CAEiBC,E,EAAIC,E,EAAIC,E,EAAIC,E,EAAG;AAC7B,gBAAIC,KAAKP,KAAKQ,GAAL,CAASL,KAAKC,EAAd,EAAkB,CAAlB,CAAT;AACA,gBAAIK,KAAKT,KAAKQ,GAAL,CAASH,KAAKC,EAAd,EAAkB,CAAlB,CAAT;AACA,gBAAII,OAAOV,KAAKW,IAAL,CAAUJ,KAAKE,EAAf,CAAX;;AAEA,mBAAOC,IAAP;AACH;;;;;;kBAGW,IAAI5M,eAAJ,E;;;;;;;;;;;;;;;;;;;;AC1EhB;;;;;;;;IAEqBe,I;AACjB,oBAAa;AAAA;;AACT,aAAK+L,IAAL,GAAY5M,SAASC,aAAT,CAAuB,OAAvB,CAAZ;AACA,aAAK2M,IAAL,CAAUlI,SAAV,CAAoBmD,GAApB,CAAwB,KAAxB;AACA,aAAKgF,QAAL,GAAgB7M,SAASW,cAAT,CAAwB,UAAxB,CAAhB;;AAEA;;AAEA,aAAI,IAAI0B,GAAR,IAAevC,0BAAgByJ,cAA/B,EAA+C;AAC3C,gBAAIuD,aAAa9M,SAAS6E,aAAT,CAAuB,IAAvB,CAAjB;AACA,gBAAIkI,WAAWjN,0BAAgByJ,cAAhB,CAA+BlH,GAA/B,CAAf;AACA,gBAAI2K,OAAOhN,SAASgF,cAAT,CAAwB+H,SAASnK,QAAjC,CAAX;AACAkK,uBAAWrM,YAAX,CAAwB,OAAxB,EAAiC,WAAjC;AACAqM,uBAAWrM,YAAX,CAAwB,IAAxB,EAA8BsM,SAASnK,QAAvC;AACAkK,uBAAW/H,WAAX,CAAuBiI,IAAvB;AACAH,qBAAS9H,WAAT,CAAqB+H,UAArB;;AAEA9M,qBAASW,cAAT,CAAwBoM,SAASnK,QAAjC,EAA2ChC,gBAA3C,CAA4D,OAA5D,EAAqEqM,YAArE;AACH;AACJ;;;;qCAEYC,E,EAAG;AACZjL;AACA,gBAAIkL,MAAMD,GAAGlL,MAAH,CAAUqH,EAApB;;AAEAtI,4BAAgBqM,SAAhB,CAA0B;AACtB5K,mBAAGoK,KAAKpK,CADc;AAEtBC,mBAAGmK,KAAKnK,CAFc;AAGtB4K,wBAAQtM,eAHc;AAItB6B,0BAAUuK,GAJY;AAKtBtK,0BAAUC;AALY,aAA1B,EAMG,IANH,EAMSyG,cANT,EAJY,CAUc;AAC7B;;;4CAEmB2D,E,EAAG;AACnBjL;AACA,gBAAIkL,MAAMD,GAAGlL,MAAH,CAAUqH,EAApB;;AAEAtI,4BAAgBqM,SAAhB,CAA0B;AACtB5K,mBAAGoK,KAAKpK,CADc;AAEtBC,mBAAGmK,KAAKnK,CAFc;AAGtB4K,wBAAQtM,eAHc;AAItB6B,0BAAU,gBAJY;AAKtB0K,2BAAWH,GALW;AAMtBtK,0BAAUC;AANY,aAA1B,EAOG,IAPH,EAOSyG,cAPT,EAJmB,CAWO;AAC7B;;;iCAEQ2D,E,EAAG;AACR;AACAlN,qBAASW,cAAT,CAAwB,UAAxB,EAAoC4M,KAApC;;AAEA;AACAL,eAAGM,cAAH;;AAEA;AACAC,iBAAKzN,SAASW,cAAT,CAAwB,UAAxB,CAAL;AACA+M,iBAAKD,GAAGE,oBAAH,CAAwB,IAAxB,CAAL;AACA,iBAAKC,IAAI,CAAT,EAAYA,IAAIF,GAAGrH,MAAnB,EAA2BuH,GAA3B,EAAgC;AAC5BF,mBAAGE,CAAH,EAAMC,KAAN,CAAYC,OAAZ,GAAsB,MAAtB,CAD4B,CACE;AACjC;;AAED;AACAlB,iBAAKiB,KAAL,CAAWE,GAAX,GAAoBb,GAAG5L,OAAH,GAAa,EAAjC;AACAsL,iBAAKiB,KAAL,CAAWG,IAAX,GAAqBd,GAAG7L,OAAH,GAAa,EAAlC;AACAuL,iBAAKpK,CAAL,GAAS0K,GAAG7L,OAAZ;AACAuL,iBAAKnK,CAAL,GAASyK,GAAG5L,OAAZ;AACAsL,iBAAKlI,SAAL,CAAeC,MAAf,CAAsB,KAAtB;;AAEA3E,qBAASW,cAAT,CAAwB,WAAxB,EAAqCsN,KAArC;AACH;;;iCAEQf,E,EAAG;AACRN,iBAAKlI,SAAL,CAAemD,GAAf,CAAmB,KAAnB;AACA+E,iBAAKiB,KAAL,CAAWE,GAAX,GAAiB,OAAjB;AACAnB,iBAAKiB,KAAL,CAAWG,IAAX,GAAkB,OAAlB;AACH;;;mCAEUE,G,EAAK;;AAEZ,gBAAGlO,SAASmO,sBAAT,CAAgC,iBAAhC,EAAmD,CAAnD,EAAsD9E,EAAtD,IAA4D,UAA/D,EAA0E;AACtE;AACA;AACA,oBAAI0B,KAAJ,EAAW5B,MAAX,EAAmBsE,EAAnB,EAAuBC,EAAvB,EAA2BU,CAA3B,EAA8BR,CAA9B,EAAiCS,QAAjC;AACAtD,wBAAQ/K,SAASW,cAAT,CAAwB,WAAxB,CAAR;AACAwI,yBAAS4B,MAAM7D,KAAN,CAAYoH,WAAZ,EAAT;AACAb,qBAAKzN,SAASW,cAAT,CAAwB,UAAxB,CAAL;AACA+M,qBAAKD,GAAGE,oBAAH,CAAwB,IAAxB,CAAL;;AAEA;AACA,qBAAKC,IAAI,CAAT,EAAYA,IAAIF,GAAGrH,MAAnB,EAA2BuH,GAA3B,EAAgC;AAC5BQ,wBAAIV,GAAGE,CAAH,CAAJ,CAD4B,CACjB;AACXS,+BAAWD,EAAEG,WAAF,IAAiBH,EAAEI,SAA9B;AACA,wBAAIH,SAASC,WAAT,GAAuBG,OAAvB,CAA+BtF,MAA/B,IAAyC,CAAC,CAA9C,EAAiD;AAAE;AAC/CuE,2BAAGE,CAAH,EAAMC,KAAN,CAAYC,OAAZ,GAAsB,EAAtB;AACH,qBAFD,MAEO;AACHJ,2BAAGE,CAAH,EAAMC,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACH;;AAED;AACA,wBAAGI,IAAIQ,IAAJ,IAAY,OAAZ,IAAuBhB,GAAGE,CAAH,EAAMC,KAAN,CAAYC,OAAZ,IAAuB,MAAjD,EAAwD;AACpDJ,2BAAGE,CAAH,EAAML,KAAN;AACA;AACH;AACJ;AACJ,aAzBD,MA0BI;AACA;AACA,oBAAGW,IAAIQ,IAAJ,IAAY,OAAf,EAAuB;AACnB3D,4BAAQ/K,SAASW,cAAT,CAAwB,WAAxB,EAAqCuG,KAA7C;;AAEAyH,iCAAa3O,SAASW,cAAT,CAAwB,YAAxB,CAAb;;AAEAiO,iCAAa5O,SAASmO,sBAAT,CAAgC,WAAhC,CAAb;AACA,yBAAKP,IAAI,CAAT,EAAYA,IAAIgB,WAAWvI,MAA3B,EAAmCuH,GAAnC,EAAwC;AACpCgB,mCAAWhB,CAAX,EAAcC,KAAd,CAAoBC,OAApB,GAA8B,MAA9B;AACH;;AAED1K,4BAAQyL,MAAR,CAAevJ,KAAf,CAAqB;AACjBwJ,2BAAG/D,KADc;AAEjBgE,8BAAM,OAFW;AAGjBC,kCAAU,GAHO;AAIjBC,+BAAO,uBAJU;AAKjBC,8BAAM,CALW;AAMjBzJ,iCAAS;AACLK,oCAAQ;AADH;AANQ,qBAArB,EASG/B,IATH,CASQ,kBAAU;AACdoB,+BAAOC,IAAP,CAAY+J,KAAZ,CAAkBlO,OAAlB,CAA0B,gBAAQ;AAC9B,gCAAGqH,KAAK8G,MAAL,CAAYpJ,QAAZ,CAAqB,uBAArB,CAAH,EAAiD;;AAE7C,oCAAI8G,aAAa9M,SAAS6E,aAAT,CAAuB,IAAvB,CAAjB;AACA,oCAAImI,OAAOhN,SAASgF,cAAT,CAAwBsD,KAAK3F,IAA7B,CAAX;AACAmK,2CAAWrM,YAAX,CAAwB,OAAxB,EAAiC,WAAjC;AACAqM,2CAAWrM,YAAX,CAAwB,IAAxB,EAA8B6H,KAAKe,EAAnC;AACAyD,2CAAW/H,WAAX,CAAuBiI,IAAvB;AACA2B,2CAAW5J,WAAX,CAAuB+H,UAAvB;;AAEA9M,yCAASW,cAAT,CAAwB2H,KAAKe,EAA7B,EAAiCzI,gBAAjC,CAAkD,OAAlD,EAA2DyO,mBAA3D;AACH;AACJ,yBAZD;AAaH,qBAvBD;AAwBH;AACJ;AACJ;;;gCAEOnB,G,EAAKoB,O,EAAS;AACpB;AACA,gBAAI1B,CAAJ,EAAO2B,UAAP,EAAmBC,QAAnB;;AAEA;AACAD,yBAAavP,SAASmO,sBAAT,CAAgC,YAAhC,CAAb;AACA,iBAAKP,IAAI,CAAT,EAAYA,IAAI2B,WAAWlJ,MAA3B,EAAmCuH,GAAnC,EAAwC;AACtC2B,2BAAW3B,CAAX,EAAcC,KAAd,CAAoBC,OAApB,GAA8B,MAA9B;AACD;;AAED;AACA0B,uBAAWxP,SAASmO,sBAAT,CAAgC,UAAhC,CAAX;AACA,iBAAKP,IAAI,CAAT,EAAYA,IAAI4B,SAASnJ,MAAzB,EAAiCuH,GAAjC,EAAsC;AACpC4B,yBAAS5B,CAAT,EAAY6B,SAAZ,GAAwBD,SAAS5B,CAAT,EAAY6B,SAAZ,CAAsBC,OAAtB,CAA8B,SAA9B,EAAyC,EAAzC,CAAxB;AACD;;AAED;AACA1P,qBAASW,cAAT,CAAwB2O,OAAxB,EAAiCzB,KAAjC,CAAuCC,OAAvC,GAAiD,OAAjD;AACAI,gBAAIyB,aAAJ,CAAkBF,SAAlB,IAA+B,SAA/B;AACD;;;;;;kBArKgB5O,I;;;;;;;;;;;;;;;;;;;;;;ACFrB;;;;;;;;;;;;IAEqB6I,M;;;AAEjB,oBAAYkG,MAAZ,EAAmB;AAAA;;AAAA,oHAETA,MAFS;;AAIf,cAAKjN,IAAL,GAAY,QAAZ;AACA,cAAKC,QAAL,GAAgB,QAAhB;AACA,cAAKiN,gBAAL,GAAwB,6CAAxB;AACA,cAAKC,SAAL,GAAiB,EAAjB;;AAEA,cAAKC,KAAL,CAAW,OAAX,EAAoB,QAApB,SAAoC,QAApC,EAA8C,EAA9C;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,kBAApB,SAA8C,QAA9C,EAAwD,CAAxD;AACA,cAAKA,KAAL,CAAW,QAAX,EAAqB,UAArB,SAAuC,UAAvC,EAAmD,EAAnD;;AAEA,cAAKC,SAAL,CAAeJ,MAAf;;AAEA;AACA,cAAKK,eAAL;AAhBe;AAiBlB;;;;0CAEgB;AACb;;AAEA,gBAAIC,qBAAqB,KAAKC,WAAL,CAAiB,kBAAjB,CAAzB;AACA,gBAAIC,gBAAiB,OAAK,CAAL,GAAO,KAAKD,WAAL,CAAiB,QAAjB,CAA5B;;AAEA,gBAAIE,mBAAmBC,SAAUF,gBAAgBF,kBAA1B,CAAvB;;AAEA,gBAAIK,QAAQ,eAAZ;AACA,iBAAKV,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBH,OAAtB,CAA8Ba,KAA9B,EAAqC,SAASF,gBAAT,GAA4B,GAAjE,CAAxB;;AAEA;AACH;;;;EAjC+BG,c;;kBAAf9G,M;;;;;;;;;;;;;;;;;;;;;;ACFrB;;;;AACA;;;;;;;;;;;;IAEqBkB,Q;;;AAEjB,sBAAYgF,MAAZ,EAAmB;AAAA;;AAAA,wHACTA,MADS;;AAGf,cAAKE,SAAL,GAAiB,EAAjB;AACA,cAAK7L,IAAL,GAAY,UAAZ;AACA,cAAKtB,IAAL,GAAY,UAAZ;AACA,cAAKC,QAAL,GAAgB,UAAhB;AACA,cAAKtC,MAAL,GAAc,EAAd;AACA,cAAKmQ,MAAL,GAAc,EAAd;;AAEA,cAAKT,SAAL,CAAeJ,MAAf;;AAEA,cAAKG,KAAL,CAAW,QAAX,EAAqB,QAArB,SAAqC,QAArC,EAA+C,EAA/C;;AAEA,YAAI,OAAO,MAAKW,QAAZ,KAAyB,WAA7B,EAA0C;AACtC,kBAAKA,QAAL,CAAczP,OAAd,CAAsB,mBAAW;AAAE;AAC/B,sBAAK0P,QAAL,CAAc1P,OAAd,CAAsB,cAAM;AAAG;AAC3B,wBAAG2P,QAAQjO,IAAR,IAAgBkO,GAAGlO,IAAtB,EAA2B;AACvBkO,2BAAGC,QAAH,CAAYF,QAAQA,OAApB;AACH;AACJ,iBAJD;AAKH,aAND;AAOH;AAtBc;AAuBlB;;;;wCAEc;AACX;;AAEA,gBAAIG,6HAAJ,CAHW,CAG4B;;AAEvC,gBAAInF,SAAS,KAAK+E,QAAL,CAAc,CAAd,CAAb;;AAEA,iBAAKK,2BAAL,CAAiCD,SAAjC,EAA2CnF,MAA3C,EAAkD,OAAlD,EAA2D,OAA3D,EAAoE,IAApE;AACA,iBAAKoF,2BAAL,CAAiCD,SAAjC,EAA2C,IAA3C,EAAgD,MAAhD,EAAwD,MAAxD,EAAgE,KAAhE;AAEH;;;iCAEQE,O,EAAQ;AACb;AACA,iBAAKtO,IAAL,GAAYsO,OAAZ;AACH;;;kCAESrB,M,EAAO;AACb;AACA,gBAAIsB,0HAA4BtB,MAA5B,CAAJ;;AAEAsB,sBAAUR,QAAV,GAAqB,CAAC;AAClB/N,sBAAM,QADY;AAElBiO,yBAAS,KAAKD,QAAL,CAAc,CAAd,EAAiBQ,QAAjB;AAFS,aAAD,CAArB;;AAKA,mBAAOD,SAAP;AAEH;;;+BAEM;;AAEH,iBAAKP,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3BmQ,sBAAMC,IAAN;AACH,aAFD;;AAIAvR,sCAAgBI,CAAhB,CAAkBoR,SAAlB;AACAxR,sCAAgBI,CAAhB,CAAkBqR,SAAlB,GAA8B,KAAKC,KAAnC;AACA1R,sCAAgBI,CAAhB,CAAkBuR,IAAlB,CAAuB,KAAKjP,CAAL,GAAS,KAAKiO,MAArC,EAA6C,KAAKhO,CAAL,GAAS,KAAKnC,MAAL,GAAY,CAAlE,EAAqE,IAAE,KAAKmQ,MAA5E,EAAoF,KAAKnQ,MAAzF;AACAR,sCAAgBI,CAAhB,CAAkBwR,SAAlB,GAA8B,OAA9B;AACA5R,sCAAgBI,CAAhB,CAAkByR,QAAlB,CAA2B,KAAKhP,IAAhC,EAAsC,KAAKH,CAAL,GAAS,KAAKiO,MAApD,EAA4D,KAAKhO,CAAL,GAAO,KAAKgO,MAAxE;AACA3Q,sCAAgBI,CAAhB,CAAkB0R,IAAlB;AACA9R,sCAAgBI,CAAhB,CAAkB2R,SAAlB;AACH;;;;EAtEiCrB,c;;kBAAjB5F,Q;;;;;;;;;;;;;;;;;;ACHrB;;;;;;;;;;;;IAEqBF,U;;;AAEjB,wBAAakF,MAAb,EAAoB;AAAA;;AAAA,4HAEVA,MAFU;;AAIhB,cAAKG,KAAL,CAAW,OAAX,EAAoB,WAApB,SAAuC,UAAvC,EAAmD,EAAnD;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,WAApB,SAAuC,UAAvC,EAAmD,EAAnD;AACA,cAAKA,KAAL,CAAW,QAAX,EAAqB,UAArB,SAAuC,UAAvC,EAAmD,EAAnD;;AAEA,cAAKpN,IAAL,GAAY,YAAZ;AACA,cAAKC,QAAL,GAAgB,YAAhB;AACA,cAAKiN,gBAAL,GAAwB,qCAAxB;AACA,cAAKC,SAAL,GAAiB,EAAjB;;AAEA,cAAKE,SAAL,CAAeJ,MAAf;AAbgB;AAcnB;;;EAhBmCY,c;;kBAAnB9F,U;;;;;;;;;;;;;;;;;;;;;;ACFrB;;;;;;;;;;;;IAEqBI,Q;;;AAEjB,sBAAY8E,MAAZ,EAAmB;AAAA;;AAAA,wHACTA,MADS;;AAGf,cAAKG,KAAL,CAAW,OAAX,EAAoB,GAApB,SAA+B,QAA/B,EAAyC,CAAzC;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,GAApB,SAA+B,QAA/B,EAAyC,CAAzC;AACA,cAAKA,KAAL,CAAW,QAAX,EAAqB,GAArB,SAAgC,QAAhC,EAA0C,CAA1C;;AAEA,cAAKpN,IAAL,GAAY,UAAZ;AACA,cAAKC,QAAL,GAAgB,UAAhB;AACA,cAAKiN,gBAAL,GAAwB,EAAxB;AACA,cAAKC,SAAL,GAAiB,EAAjB;AACA,cAAKgC,eAAL,GAAuB,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,QAA7B,EAAuC,QAAvC,EAAiD,KAAjD,CAAvB;AACA,cAAKC,eAAL,GAAuB,CAAvB;;AAEA,cAAK/B,SAAL,CAAeJ,MAAf;;AAde;AAgBlB;;;;kCAESoC,W,EAAY;AAClB,gBAAIC,kIAAoC,IAApC,CAAJ;;AAEA;AACAA,8BAAkBF,eAAlB,GAAoC,KAAKA,eAAzC;;AAEA,mBAAOE,iBAAP;AACH;;;0CAEgB;AACb;AACA,gBAAIzP,IAAI,KAAK2N,WAAL,CAAiB,GAAjB,CAAR;AACA,gBAAI1N,IAAI,KAAK0N,WAAL,CAAiB,GAAjB,CAAR;;AAEA,gBAAI+B,CAAJ;AACA,oBAAO,KAAKH,eAAZ;AACI,qBAAK,CAAL;AACIG,wBAAI1P,IAAEC,CAAN;AACA;AACJ,qBAAK,CAAL;AACIyP,wBAAI1P,IAAEC,CAAN;AACA;AACJ,qBAAK,CAAL;AACIyP,wBAAI1P,IAAEC,CAAN;AACA;AACJ,qBAAK,CAAL;AACIyP,wBAAI1P,IAAEC,CAAN;AACA;AACJ,qBAAK,CAAL;AACIyP,wBAAIlG,KAAKmG,GAAL,CAAS3P,CAAT,CAAJ;AACA;AACJ,qBAAK,CAAL;AACI0P,wBAAIlG,KAAKoG,GAAL,CAAS5P,CAAT,CAAJ;AACA;AACJ,qBAAK,CAAL;AACI0P,wBAAIlG,KAAKQ,GAAL,CAAShK,CAAT,EAAWC,CAAX,CAAJ;AACA;AACJ;AACIjB,4BAAQC,GAAR,CAAY,kBAAZ;AACAD,4BAAQC,GAAR,CAAY,KAAKsQ,eAAjB;AAxBR;;AA2BA;AACA,iBAAKpB,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3B,oBAAGmQ,MAAMnN,IAAN,IAAc,QAAjB,EAA0B;AACtBmN,0BAAMN,QAAN,CAAeoB,CAAf;AACH;AACJ,aAJD;AAKH;;;uCAEcG,Q,EAAS;AACpB,iBAAKN,eAAL,GAAuBzB,SAAS+B,QAAT,CAAvB;AACA,iBAAKpC,eAAL;AACH;;;wCAEc;AACX;;AAEA,gBAAIc,6HAAJ;;AAEA,iBAAKuB,cAAL,CAAoBvB,SAApB,EAA+B,IAA/B,EAAqC,KAAKe,eAA1C,EAA2D,KAAKC,eAAhE,EAAiF,MAAjF;AAEH;;;;EAlFiCvB,c;;kBAAjB1F,Q;;;;;;;;;;;;;;;;;;ACFrB;;;;;;;;;;;;IAEqBV,O;;;AAEjB,qBAAYwF,MAAZ,EAAmB;AAAA;;AAAA,sHAETA,MAFS;;AAIf,cAAKjN,IAAL,GAAY,SAAZ;AACA,cAAKC,QAAL,GAAgB,SAAhB;AACA,cAAKiN,gBAAL,GAAwB,kDAAxB;AACA,cAAKC,SAAL,GAAiB,EAAjB;;AAEA,cAAKC,KAAL,CAAW,OAAX,EAAoB,UAApB,SAAuC,UAAvC,EAAmD,EAAnD;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,QAApB,SAAuC,QAAvC,EAAiD,EAAjD;AACA,cAAKA,KAAL,CAAW,QAAX,EAAqB,UAArB,SAAuC,UAAvC,EAAmD,EAAnD;;AAEA,cAAKC,SAAL,CAAeJ,MAAf;AAbe;AAclB;;;EAhBgCY,c;;kBAAhBpG,O;;;;;;;;;;;;;;;;;;;;ACFrB;;;;;;;;;;;;IAEqBoB,c;;;AAEjB,4BAAYoE,MAAZ,EAAmB;AAAA;;AAAA,oIACTA,MADS;;AAIf,cAAKjN,IAAL,GAAY,iBAAZ;AACA,cAAKC,QAAL,GAAgB,gBAAhB;AACA,cAAKF,QAAL,GAAgB,KAAhB,CANe,CAMQ;AACvB,cAAK6P,WAAL,GAAmB,OAAnB;AACA,cAAKjF,SAAL,GAAiB,SAAjB;;AAEA,cAAK0C,SAAL,CAAeJ,MAAf;;AAEA,cAAK4C,eAAL,CAAqB,MAAKlF,SAA1B;;AAZe;AAclB;;;;oCAEW9K,C,EAAEC,C,EAAE;AACZ;;AAEA,gBAAIgQ,iBAAiB,KAArB;;AAEA,gBAAIC,gBAAgBC,kBAAkBnQ,CAAlB,EAAqB,KAAKA,CAA1B,EAA6BC,CAA7B,EAAgC,KAAKA,CAArC,CAApB;;AAEA,gBAAIiQ,gBAAgB,KAAKjC,MAAzB,EAAgC;AAC5BgC,iCAAiB,IAAjB;AACH;;AAED,mBAAOA,cAAP;AACH;;;wCAEepJ,E,EAAG;AAAA;;AACnB;AACIjG,oBAAQwP,OAAR,CAAgB,uBAAhB,EAAyC,EAACvJ,MAAD,EAAzC,EAA+CtF,IAA/C,CAAoD,kBAAU;;AAE1D;;AAEA,oBAAI8O,OAAW1N,OAAOC,IAAP,CAAYQ,KAAZ,CAAkBP,KAAjC;AACA,oBAAI+D,WAAWjE,OAAOC,IAAP,CAAYzC,IAA3B;;AAEA;;AAEAS,wBAAQkC,KAAR,CAAc2C,WAAd,CAA0B;AACtBrC,2BAAOiN,IADe;AAEtBhN,0BAAMuD,QAFgB;AAGtB/B,0BAAM;AAHgB,iBAA1B,EAIGtD,IAJH,CAIQ,kBAAU;;AAEd;AACA,wBAAI8E,UAAUC,KAAK3D,OAAOC,IAAP,CAAYkC,OAAjB,CAAd;AACA,wBAAIyB,gBAAiBjB,KAAKkB,KAAL,CAAWH,OAAX,EAAoBI,SAAzC;;AAEA,2BAAKC,WAAL,CAAiBH,aAAjB,EAAgCA,cAAcI,MAAd,CAAqB,UAACjI,QAAD,EAAc;AAAE,+BAAOA,SAASwB,QAAT,IAAqB,IAA5B;AAAmC,qBAAxE,EAA0E,CAA1E,EAA6EG,QAA7G;;AAEA,2BAAKH,QAAL,GAAgB,KAAhB;;AAEA;AACA,2BAAK2K,MAAL,CAAYyF,eAAZ,CAA4B7R,OAA5B,CAAoC,qBAAa;AAC7C,+BAAKoM,MAAL,CAAY0F,cAAZ,CAA2BjL,KAAKkB,KAAL,CAAWgK,SAAX,CAA3B;AACH,qBAFD;AAGH,iBAlBD;AAmBH,aA5BD;AA6BH;;;kCAEShB,W,EAAY;;AAElB;AACA,gBAAIiB,SAAS;AACTrQ,0BAAU,KAAKA,QADN;AAETD,sBAAM,KAAKA,IAFF;AAGTH,mBAAG,KAAKA,CAHC;AAITC,mBAAG,KAAKA,CAJC;AAKTI,0BAAU,KAAKA,QALN;AAMTyK,2BAAW,KAAKA;AANP,aAAb;;AASA,mBAAO2F,MAAP;AACH;;;wCAEc;AACX;;AAEA;AACA,mBAAOnH,QAAQtH,UAAf,EAA2B;AACvBsH,wBAAQrH,WAAR,CAAoBqH,QAAQtH,UAA5B;AACH;;AAED;AACA,gBAAI7B,OAAO3C,SAAS6E,aAAT,CAAuB,IAAvB,CAAX;AACAlC,iBAAK4L,WAAL,GAAmB,KAAK5L,IAAxB;AACAA,iBAAKlC,YAAL,CAAkB,OAAlB,EAA0B,oBAA1B;AACAqL,oBAAQ/G,WAAR,CAAoBpC,IAApB;AACH;;;;EA7FuCJ,kB;;kBAAvBiJ,c;;;;;;;;;;;;;;;;;;;;;;ACFrB;;;;AACA;;;;;;;;;;;;IAEqBR,K;;;AAEjB,mBAAY4E,MAAZ,EAAmB;AAAA;;AAAA,kHACRA,MADQ;;AAGf,cAAKjN,IAAL,GAAY,UAAUG,kBAAtB;AACA,cAAKgN,SAAL,GAAiB,EAAjB;AACA,cAAK7L,IAAL,GAAY,OAAZ;AACA,cAAKrB,QAAL,GAAgB,OAAhB;AACA,cAAKtC,MAAL,GAAc,EAAd;AACA,cAAKmQ,MAAL,GAAc,EAAd;;AAEA,cAAKT,SAAL,CAAeJ,MAAf;;AAEA,cAAKG,KAAL,CAAW,QAAX,EAAqB,oBAArB,SAAiD,UAAjD,EAA6D,EAA7D;;AAEA;AACA,YAAI,OAAO,MAAK1C,MAAZ,KAAuB,WAA3B,EAAwC;AACpC,kBAAKA,MAAL,CAAY0C,KAAZ,CAAkB,OAAlB,EAA2B,MAAKpN,IAAhC,EAAsC,MAAK0K,MAA3C,EAAmD,UAAnD,EAA+D,EAA/D;AACH;AAjBc;AAkBlB;;;;wCAEc;AACX;;AAEA,gBAAI0D,uHAAJ,CAHW,CAG6B;;AAExC,iBAAKC,2BAAL,CAAiCD,SAAjC,EAA2C,IAA3C,EAAgD,MAAhD,EAAwD,MAAxD,EAAgE,KAAhE;AAEH;;;+BAEM;;AAEH,iBAAKJ,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3BmQ,sBAAMC,IAAN;AACH,aAFD;;AAKAvR,sCAAgBI,CAAhB,CAAkBqR,SAAlB,GAA8B,KAAKC,KAAnC;;AAEA1R,sCAAgBI,CAAhB,CAAkBwR,SAAlB,GAA8B,OAA9B;AACA5R,sCAAgBI,CAAhB,CAAkByR,QAAlB,CAA2B,KAAKhP,IAAhC,EAAsC,KAAKH,CAAL,GAAS,KAAKiO,MAApD,EAA4D,KAAKhO,CAAL,GAAO,KAAKgO,MAAxE;;AAGA3Q,sCAAgBI,CAAhB,CAAkBoR,SAAlB;AACAxR,sCAAgBI,CAAhB,CAAkBgT,MAAlB,CAAyB,KAAK1Q,CAAL,GAAS,KAAKiO,MAAvC,EAA+C,KAAKhO,CAAL,GAAS,KAAKnC,MAAL,GAAY,CAApE;AACAR,sCAAgBI,CAAhB,CAAkBiT,MAAlB,CAAyB,KAAK3Q,CAAL,GAAS,KAAKiO,MAAd,GAAuB,EAAhD,EAAoD,KAAKhO,CAAzD;AACA3C,sCAAgBI,CAAhB,CAAkBiT,MAAlB,CAAyB,KAAK3Q,CAAL,GAAS,KAAKiO,MAAvC,EAA+C,KAAKhO,CAAL,GAAS,KAAKnC,MAAL,GAAY,CAApE;AACAR,sCAAgBI,CAAhB,CAAkBiT,MAAlB,CAAyB,KAAK3Q,CAAL,GAAS,KAAKiO,MAAvC,EAA+C,KAAKhO,CAAL,GAAS,KAAKnC,MAAL,GAAY,CAApE;AACAR,sCAAgBI,CAAhB,CAAkBiT,MAAlB,CAAyB,KAAK3Q,CAAL,GAAS,KAAKiO,MAAvC,EAA+C,KAAKhO,CAAL,GAAS,KAAKnC,MAAL,GAAY,CAApE;AACAR,sCAAgBI,CAAhB,CAAkB0R,IAAlB;AACA9R,sCAAgBI,CAAhB,CAAkB2R,SAAlB;AAEH;;;qCAEY;;AAET;AACA,gBAAI,OAAO,KAAKxE,MAAZ,KAAuB,WAA3B,EAAwC;AACpC,qBAAKA,MAAL,CAAY+F,QAAZ,CAAqB,OAArB,EAA8B,KAAKzQ,IAAnC,EAAyC,KAAK0K,MAA9C;AACH;;AAED;AACH;;;iCAEQgG,U,EAAW;AAAA;;AAChB;;AAEA;AACA,iBAAKhG,MAAL,CAAYsD,QAAZ,CAAqB1P,OAArB,CAA6B,iBAAS;AAClC,oBAAImQ,MAAMzO,IAAN,IAAc,OAAKA,IAAvB,EAA4B;AACxB,2BAAKA,IAAL,GAAY0Q,UAAZ;AACAjC,0BAAMzO,IAAN,GAAa0Q,UAAb;AACH;AACJ,aALD;AAMH;;;kCAESC,S,EAAU;AAChB;;AAEA,iBAAKxD,SAAL,GAAiBwD,SAAjB,CAHgB,CAGa;;AAE7B;AACA,iBAAK3C,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3B,oBAAGmQ,MAAMmC,SAAN,IAAmB,UAAnB,IAAiCnC,MAAMnN,IAAN,IAAc,QAAlD,EAA2D;AACvDmN,0BAAMN,QAAN,CAAewC,SAAf;AACH;AACJ,aAJD;AAKH;;;0CAEgB;AACb;AACH;;;;EA5F8B9C,c;;kBAAdxF,K;;;;;;;;;;;;;;;;;;ACHrB;;;;;;;;;;;;IAEqBR,Y;;;AAEjB,0BAAYoF,MAAZ,EAAmB;AAAA;;AAAA,gIAETA,MAFS;;AAIf,cAAKG,KAAL,CAAW,OAAX,EAAoB,WAApB,SAAuC,UAAvC,EAAmD,EAAnD;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,WAApB,SAAuC,UAAvC,EAAmD,EAAnD;AACA,cAAKA,KAAL,CAAW,QAAX,EAAqB,UAArB,SAAuC,UAAvC,EAAmD,EAAnD;;AAEA,cAAKpN,IAAL,GAAY,cAAZ;AACA,cAAKC,QAAL,GAAgB,cAAhB;AACA,cAAKiN,gBAAL,GAAwB,uCAAxB;AACA,cAAKC,SAAL,GAAiB,EAAjB;;AAEA,cAAKE,SAAL,CAAeJ,MAAf;AAbe;AAclB;;;EAhBqCY,c;;kBAArBhG,Y;;;;;;;;;;;;;;;;;;ACFrB;;;;;;;;;;;;IAEqBc,M;;;AAEjB,oBAAYsE,MAAZ,EAAmB;AAAA;;AAAA,oHAETA,MAFS;;AAIf,cAAKG,KAAL,CAAW,OAAX,EAAoB,UAApB,SAAsC,UAAtC,EAAkD,EAAlD;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,GAApB,SAA+B,QAA/B,EAAyC,CAAzC;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,GAApB,SAA+B,QAA/B,EAAyC,CAAzC;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,GAApB,SAA+B,QAA/B,EAAyC,CAAzC;AACA,cAAKA,KAAL,CAAW,QAAX,EAAqB,UAArB,SAAuC,UAAvC,EAAmD,EAAnD;;AAEA,cAAKpN,IAAL,GAAY,QAAZ;AACA,cAAKC,QAAL,GAAgB,QAAhB;AACA,cAAKiN,gBAAL,GAAwB,mCAAxB;AACA,cAAKC,SAAL,GAAiB,EAAjB;;AAEA,cAAKE,SAAL,CAAeJ,MAAf;AAfe;AAgBlB;;;EAlB+BY,c;;kBAAflF,M;;;;;;;;;;;;;;;;;;;;;;ACFrB;;;;AACA;;;;;;;;;;;;IAEqB/I,Q;;;AAEjB,sBAAYqN,MAAZ,EAAmB;AAAA;;AAAA,wHAETA,MAFS;;AAIf,cAAK5O,gBAAL,GAAwB,EAAxB;AACA,cAAK2P,QAAL,GAAgB,EAAhB;AACA,cAAKhO,IAAL,GAAY,UAAZ;AACA,cAAKC,QAAL,GAAgB,UAAhB;AACA,cAAK2P,WAAL,GAAmB,SAAnB;AACA,cAAK7P,QAAL,GAAgB,KAAhB,CATe,CASQ;;AAEvB,cAAKsN,SAAL,CAAeJ,MAAf;;AAEA;AACA,cAAKxC,SAAL,CAAe;AACXoG,iCADW;AAEXhR,eAAG1C,0BAAgBC,MAAhB,CAAuBK,KAAvB,GAA+B,EAFvB;AAGXqC,eAAG3C,0BAAgBC,MAAhB,CAAuBO,MAAvB,GAA8B,CAHtB;AAIX+M,yBAJW;AAKX1K,kBAAM,QALK;AAMXC,sBAAU;AANC,SAAf,EAOG,IAPH,EAOS9C,0BAAgB6L,WAPzB;;AASA,cAAKsE,eAAL;AAvBe;AAwBlB;;;;+BAEK;AACF,qHADE,CACY;;AAEd;AACA/P,cAAEoR,SAAF;AACApR,cAAEqR,SAAF,GAAc,KAAKgB,WAAnB;AACArS,cAAEuT,GAAF,CAAM,KAAKjR,CAAX,EAAc,KAAKC,CAAnB,EAAsB,KAAKgO,MAAL,GAAY,CAAlC,EAAqC,CAArC,EAAwCzE,KAAK0H,EAAL,GAAU,CAAlD,EAAqD,KAArD;AACAxT,cAAE2R,SAAF;AACA3R,cAAE0R,IAAF;AAEH;;;oCAEWpP,C,EAAEC,C,EAAE;AACZ;;;AAGA,gBAAIgQ,iBAAiB,KAArB;;AAEA,gBAAIC,gBAAgBC,kBAAkBnQ,CAAlB,EAAqB,KAAKA,CAA1B,EAA6BC,CAA7B,EAAgC,KAAKA,CAArC,CAApB;;AAEA,gBAAIiQ,gBAAgB,KAAKjC,MAAzB,EAAgC;AAC5B3Q,0CAAgBiB,eAAhB,GAAkC,IAAlC,CAD4B,CACY;AACxC0R,iCAAiB,IAAjB;AACH;;AAED,mBAAOA,cAAP;AACH;;;0CAEgB;;AAEb,iBAAKkB,aAAL;;AAEA;;AAEA;AACH;;;0CAEgB;AAAA;;AACb;;AAEA;AACA,iBAAKhD,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3B,oBAAGmQ,MAAMmC,SAAN,IAAmB,UAAnB,IAAiCnC,MAAMnN,IAAN,IAAc,OAAlD,EAA0D;AACtD,2BAAKjD,gBAAL,CAAsBC,OAAtB,CAA8B,gBAAQ;AAClC,4BAAG2S,KAAKhR,QAAL,IAAiB,OAAjB,IAA4BwO,MAAMzO,IAAN,IAAciR,KAAKjR,IAAlD,EAAuD;AACnDiR,iCAAKC,SAAL,CAAezC,MAAMD,QAAN,EAAf;AACH;AACJ,qBAJD;AAKH;AACJ,aARD;;AAUA;AACA,iBAAKnQ,gBAAL,CAAsBC,OAAtB,CAA8B,gBAAQ;AAClC,oBAAG2S,KAAKhR,QAAL,IAAiB,QAApB,EAA6B;AACzB,2BAAKkN,SAAL,GAAiB8D,KAAK9D,SAAtB;AACH;AACJ,aAJD;;AAMA;AACA,iBAAKa,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3B,oBAAGmQ,MAAMmC,SAAN,IAAmB,UAAnB,IAAiCnC,MAAMnN,IAAN,IAAc,QAAlD,EAA2D;AACvDmN,0BAAMN,QAAN,CAAe,OAAKhB,SAApB;AACH;AACJ,aAJD;;AAMA;AACA,gBAAI,KAAKgE,QAAT,EAAkB;AACd,qBAAKC,YAAL;AACH;AACJ;;;wCAEc;AACX;;AAEA,gBAAIhD,6HAAJ,CAHW,CAG4B;;AAEvC,iBAAKC,2BAAL,CAAiCD,SAAjC,EAA2C,IAA3C,EAAgD,MAAhD,EAAwD,MAAxD,EAAgE,KAAhE;;AAEA,gBAAG,CAAC,KAAKrO,QAAT,EAAkB;AACd,qBAAKoE,YAAL,CAAkBiK,SAAlB,EAA4B,IAA5B,EAAiC,cAAjC,EAAgD,KAAKiD,kBAArD;;AAEA,qBAAKlN,YAAL,CAAkBiK,SAAlB,EAA4B,IAA5B,EAAiC,kBAAjC,EAAqD,KAAKkD,cAA1D;AACH,aAJD,MAKI;AACA,qBAAKnN,YAAL,CAAkBiK,SAAlB,EAA4B,IAA5B,EAAiC,0BAAjC,EAA4DxM,kBAA5D;AACH;;AAED,iBAAK2P,SAAL,CAAenD,SAAf,EAAyB,IAAzB,EAA8B,KAAKoD,OAAnC;;AAEA,mBAAOpD,SAAP;AAEH;;;2CAEkBqD,I,EAAK;AACpB;;AAEAtU,sCAAgBiB,eAAhB,CAAgCkP,eAAhC;;AAEA,gBAAG,CAACnQ,0BAAgBiB,eAAhB,CAAgC2B,QAApC,EAA6C;AACzC5C,0CAAgBiB,eAAhB,GAAkCjB,0BAAgBiB,eAAhB,CAAgCsM,MAAlE,CADyC,CACiC;AAC7E;AACJ;;;uCAEc+G,I,EAAK;AAChB;AACAC,0CAA8BD,IAA9B;AACH;;;sDAE6BE,Q,EAAS;AACnC9S,oBAAQC,GAAR,CAAY6S,QAAZ;;AAEA;AACA,gBAAIxU,0BAAgBiB,eAAhB,CAAgC8B,QAAhC,IAA4C,KAAKA,QAArD,EAA8D;AAC1D/C,0CAAgBiB,eAAhB,GAAkC,KAAKsM,MAAvC;AACH;;AAED;AACAvN,sCAAgBiB,eAAhB,CAAgCqM,SAAhC,CAA0C;AACtC5K,mBAAG,KAAKA,CAD8B;AAEtCC,mBAAG,KAAKA,CAF8B;AAGtC4K,wBAAQvN,0BAAgBiB,eAHc;AAItC4B,sBAAM,KAAKA,IAJ2B;AAKtCC,0BAAU,gBAL4B;AAMtC0K,2BAAWgH,QAN2B;AAOtCzR,0BAAUC;AAP4B,aAA1C,EAQG,IARH,EAQSyG,cART;;AAWA;AACA,iBAAKgL,UAAL;AAEH;;;qCAEW;AACR,gBAAIC,6HAAJ;AACA,iBAAKxT,gBAAL,CAAsBC,OAAtB,CAA8B,oBAAY;AACtCuT,+BAAeA,aAAaC,MAAb,CAAoBvT,SAASmH,UAAT,EAApB,CAAf;AACH,aAFD;AAGA,mBAAOmM,YAAP;AACH;;;wCAEc;AACX,gBAAIE,mIAAJ;AACAA,4BAAgBC,IAAhB,CAAqB,QAAQ,KAAKhS,IAAlC;;AAEA,gBAAIiS,oBAAoB,KAAK5T,gBAA7B;AACA4T,8BAAkB7F,IAAlB,CAAuB,UAASX,CAAT,EAAYyG,CAAZ,EAAc;AAAC,uBAAOlC,kBAAkBvE,EAAE5L,CAApB,EAAuB,CAAvB,EAA0B4L,EAAE3L,CAA5B,EAA+B,CAA/B,IAAkCkQ,kBAAkBkC,EAAErS,CAApB,EAAuB,CAAvB,EAA0BqS,EAAEpS,CAA5B,EAA+B,CAA/B,CAAzC;AAA2E,aAAjH;;AAEAmS,8BAAkB3T,OAAlB,CAA0B,oBAAY;AAClCyT,kCAAkBA,gBAAgBD,MAAhB,CAAuBvT,SAAS0H,aAAT,EAAvB,CAAlB;AACH,aAFD;AAGA,mBAAO8L,eAAP;AACH;;;kCAES1C,W,EAAY;AAClB;;AAEA;AACA;AACA;;AAEA,gBAAG,KAAKtP,QAAL,IAAiB,IAApB,EAAyB;AACrB;AACAsP,8BAAc,EAAC/I,WAAW,EAAZ,EAAd;AACH;;AAED,gBAAI6L,kBAAkB,IAAIC,KAAJ,EAAtB;AACA,gBAAIC,WAAW,EAAf;AACA,gBAAIC,gBAAgB,EAApB;;AAGA,iBAAKjU,gBAAL,CAAsBC,OAAtB,CAA8B,gBAAQ;AAClC,oBAAI2S,KAAK9D,SAAL,IAAkB,EAAtB,EAAyB;AACrBgF,oCAAgBH,IAAhB,CAAqBf,KAAK9D,SAA1B;AACH;;AAEDkF,yBAASL,IAAT,CAAc7M,KAAKC,SAAL,CAAe6L,KAAK5L,SAAL,CAAegK,WAAf,CAAf,CAAd;;AAEA4B,qBAAKjD,QAAL,CAAc1P,OAAd,CAAsB,2BAAmB;AACrC,wBAAGiU,gBAAgBjR,IAAhB,IAAwB,QAA3B,EAAoC;AAChCiR,wCAAgBC,UAAhB,CAA2BlU,OAA3B,CAAmC,qBAAa;AAC5CgU,0CAAcN,IAAd,CAAmB3B,UAAUhL,SAAV,EAAnB;AACH,yBAFD;AAGH;AACJ,iBAND;AAOH,aAdD;;AAgBA,gBAAIoN,eAAe;AACfxS,0BAAU,KAAKA,QADA;AAEfD,sBAAM,KAAKA,IAFI;AAGfE,0BAAU,KAAKA,QAHA;AAIfH,0BAAU,KAAKA,QAJA;AAKfyR,yBAAS,KAAKA,OALC;AAMfa,0BAAUA,QANK;AAOfC,+BAAeA;;AAGnB;;AAVmB,aAAnB,CAYAjD,YAAY/I,SAAZ,CAAsB0L,IAAtB,CAA2BS,YAA3B;;AAEA,gBAAG,KAAK1S,QAAL,IAAiB,IAApB,EAAyB;AACrB;AACA,uBAAOsP,WAAP;AACH,aAHD,MAII;AACA;AACA,oBAAIiB,SAAS;AACTrQ,8BAAU,KAAKA,QADN;AAETD,0BAAM,KAAKA,IAFF;AAGTH,uBAAG,KAAKA,CAHC;AAITC,uBAAG,KAAKA,CAJC;AAKTI,8BAAU,KAAKA,QALN;AAMTsR,6BAAS,KAAKA;AANL,iBAAb;;AASA,uBAAOlB,MAAP;AACH;AACJ;;;oCAEWoC,Y,EAAcC,U,EAAW;AAAA;;AAEjC;AACA,gBAAIC,iBAAiBF,aAAalM,MAAb,CAAoB,UAACjI,QAAD,EAAc;AAAE,uBAAOA,SAAS2B,QAAT,IAAqByS,UAA5B;AAAwC,aAA5E,EAA8E,CAA9E,CAArB;;AAEA;AACA,iBAAKzS,QAAL,GAAiB0S,eAAe1S,QAAhC;AACA,iBAAKF,IAAL,GAAiB4S,eAAe5S,IAAhC;AACA,iBAAKD,QAAL,GAAiB6S,eAAe7S,QAAhC;AACA,iBAAKyR,OAAL,GAAiBoB,eAAepB,OAAhC;;AAEA;AACAoB,2BAAeP,QAAf,CAAwB/T,OAAxB,CAAgC,gBAAQ;AACpC,uBAAKmM,SAAL,CAAetF,KAAKkB,KAAL,CAAW4K,IAAX,CAAf,EAAiCyB,YAAjC,EAA+C9L,cAA/C;AACH,aAFD;;AAIA;AACAgM,6BAAiBF,aAAalM,MAAb,CAAoB,UAACjI,QAAD,EAAc;AAAE,uBAAOA,SAAS2B,QAAT,IAAqByS,UAA5B;AAAwC,aAA5E,EAA8E,CAA9E,CAAjB;;AAEA;AACA,iBAAKxC,eAAL,GAAuByC,eAAeN,aAAtC,CApBiC,CAoBoB;AACrD,iBAAKnC,eAAL,CAAqB7R,OAArB,CAA6B,qBAAa;AACtC,uBAAK8R,cAAL,CAAoBjL,KAAKkB,KAAL,CAAWgK,SAAX,CAApB;AACH,aAFD;;AAIA,iBAAK/C,eAAL;AACH;;;kCAESuF,U,EAAYH,Y,EAAcI,S,EAAU;AAC1C;;AAEA,iBAAI,IAAIpT,GAAR,IAAeoT,SAAf,EAA0B;AACtB,oBAAIA,UAAUpT,GAAV,EAAeO,QAAf,IAA2B4S,WAAW5S,QAA1C,EAAmD;AAC/C4S,+BAAWnI,MAAX,GAAoB,IAApB;AACA,wBAAIuG,OAAO,IAAI6B,UAAUpT,GAAV,EAAeoH,OAAnB,CAA2B+L,UAA3B,CAAX;;AAEA;AACA,wBAAG5B,KAAKhR,QAAL,IAAiB,OAAjB,IAA4B,OAAO4S,WAAW7S,IAAlB,KAA2B,WAA1D,EAAsE;AAClEiR,6BAAK9C,QAAL,CAAc0E,WAAW7S,IAAzB;AACH;;AAED;AACA,wBAAGiR,KAAKhR,QAAL,IAAiB,UAAjB,IAA+ByS,gBAAgB,IAAlD,EAAuD;AACnDzB,6BAAK1K,WAAL,CAAiBmM,YAAjB,EAA+BzB,KAAK/Q,QAApC;AACH;;AAED,yBAAK7B,gBAAL,CAAsB2T,IAAtB,CAA2Bf,IAA3B;AACH;AACJ;;AAED,gBAAG4B,WAAW5S,QAAX,IAAuB,QAA1B,EAAmC;AAC/B;AACA,qBAAK5B,gBAAL,CAAsBC,OAAtB,CAA8B,gBAAQ;AAClC,wBAAG2S,KAAKhR,QAAL,IAAiB,QAApB,EAA6B;AACzBgR,6BAAK8B,KAAL,CAAWF,WAAW3S,QAAtB;AACH;AACJ,iBAJD;AAKH;AACJ;;;uCAEc8S,Y,EAAa;AACxB,gBAAI3C,SAAJ;AACA,gBAAI4C,cAAc,IAAlB;AACA,gBAAIC,cAAc,IAAlB;AACA,gBAAIC,GAAJ;;AAEA,iBAAK9U,gBAAL,CAAsBC,OAAtB,CAA8B,gBAAQ;AAClC;;AAEA,oBAAI2S,KAAK/Q,QAAL,IAAiB8S,aAAaI,KAAlC,EAAwC;AACpCnC,yBAAKjD,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3B,4BAAGmQ,MAAMzO,IAAN,IAAcgT,aAAaK,OAA3B,IAAsC5E,MAAMnN,IAAN,IAAc,QAAvD,EAAgE;AAC5D+O,wCAAY,IAAIiD,SAAJ,CAAc;AACtBrT,0CAAU,WADY;AAEtBsT,kDAAkB9E,KAFI;AAGtBoC,gDAAiBI;AAHK,6BAAd,CAAZ;AAKAgC,0CAAc,KAAd;AACH;AACJ,qBATD;AAUH;AACD;AACA,oBAAIhC,KAAK/Q,QAAL,IAAiB8S,aAAaQ,KAAlC,EAAwC;AACpCvC,yBAAKjD,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3B,4BAAGmQ,MAAMzO,IAAN,IAAcgT,aAAaS,OAA3B,IAAsChF,MAAMnN,IAAN,IAAc,OAApD,IAA+DmN,MAAM+D,UAAN,CAAiB9O,MAAjB,IAA2B,CAA7F,EAA+F;AAC3FwP,0CAAc,KAAd;AACAC,kCAAM1E,KAAN;AACH;AACJ,qBALD;AAMH;AACJ,aAxBD;;AA0BA,gBAAGwE,eAAeC,WAAlB,EAA8B;AAC1BrU,wBAAQC,GAAR,CAAY,4BAAZ;AACA;AACH;;AAEDuR,sBAAUqD,gBAAV,GAA6BP,GAA7B;;AAEA;AACA9C,sBAAUkD,gBAAV,CAA2Bf,UAA3B,CAAsCR,IAAtC,CAA2C3B,SAA3C;AACAA,sBAAUqD,gBAAV,CAA2BlB,UAA3B,CAAsCR,IAAtC,CAA2C3B,SAA3C;;AAEA;AACAA,sBAAUsD,SAAV;AACH;;;;EAjWiC9F,c;;kBAAjBjO,Q;;;;;;;;;;;;;;;;;;;;ACHrB;;;;AACA;;;;;;;;;;;;IAGqBsJ,M;;;AAEjB,oBAAY+D,MAAZ,EAAmB;AAAA;;AAGf;AAHe,oHACRA,MADQ;;AAIf,YAAI,OAAO,MAAKvC,MAAZ,KAAuB,WAA3B,EAAwC;AACpC,kBAAKA,MAAL,CAAY0C,KAAZ,CAAkB,QAAlB,EAA4B,UAA5B,EAAwC,MAAK1C,MAA7C,EAAqD,UAArD,EAAiE,EAAjE;AACH;;AAED,cAAKwC,gBAAL,GAAwB,sBAAxB;AACA,cAAKC,SAAL,GAAiB,EAAjB;AACA,cAAK7L,IAAL,GAAY,QAAZ;AACA,cAAKtB,IAAL,GAAY,QAAZ;AACA,cAAKC,QAAL,GAAgB,QAAhB;AACA,cAAKtC,MAAL,GAAc,EAAd;AACA,cAAKmQ,MAAL,GAAc,EAAd;;AAEA,cAAKT,SAAL,CAAeJ,MAAf;;AAEA,cAAKG,KAAL,CAAW,OAAX,EAAoB,oBAApB,SAAgD,UAAhD,EAA4D,EAA5D;AAlBe;AAmBlB;;;;8BAEKwG,K,EAAM;AACR,iBAAK1T,QAAL,GAAgB0T,KAAhB;AACH;;;+BAEM;;AAEH,iBAAK5F,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3BmQ,sBAAMC,IAAN;AACH,aAFD;;AAIAvR,sCAAgBI,CAAhB,CAAkBoR,SAAlB;AACAxR,sCAAgBI,CAAhB,CAAkBqR,SAAlB,GAA8B,KAAKC,KAAnC;AACA1R,sCAAgBI,CAAhB,CAAkBuR,IAAlB,CAAuB,KAAKjP,CAAL,GAAS,KAAKiO,MAArC,EAA6C,KAAKhO,CAAL,GAAS,KAAKnC,MAAL,GAAY,CAAlE,EAAqE,IAAE,KAAKmQ,MAA5E,EAAoF,KAAKnQ,MAAzF;AACAR,sCAAgBI,CAAhB,CAAkBwR,SAAlB,GAA8B,KAA9B;AACA5R,sCAAgBI,CAAhB,CAAkByR,QAAlB,CAA2B,KAAKhP,IAAhC,EAAsC,KAAKH,CAAL,GAAS,KAAKiO,MAApD,EAA4D,KAAKhO,CAAL,GAAO,KAAKgO,MAAxE;AACA3Q,sCAAgBI,CAAhB,CAAkB0R,IAAlB;AACA9R,sCAAgBI,CAAhB,CAAkB2R,SAAlB;;AAEA/R,sCAAgBI,CAAhB,CAAkBoR,SAAlB;AACAxR,sCAAgBI,CAAhB,CAAkBgT,MAAlB,CAAyB,KAAK1Q,CAAL,GAAS,KAAKiO,MAAvC,EAA+C,KAAKhO,CAAL,GAAS,KAAKnC,MAAL,GAAY,CAApE;AACAR,sCAAgBI,CAAhB,CAAkBiT,MAAlB,CAAyB,KAAK3Q,CAAL,GAAS,KAAKiO,MAAd,GAAuB,EAAhD,EAAoD,KAAKhO,CAAzD;AACA3C,sCAAgBI,CAAhB,CAAkBiT,MAAlB,CAAyB,KAAK3Q,CAAL,GAAS,KAAKiO,MAAvC,EAA+C,KAAKhO,CAAL,GAAS,KAAKnC,MAAL,GAAY,CAApE;AACAR,sCAAgBI,CAAhB,CAAkB0R,IAAlB;AACH;;;;EA9C+BpB,c;;kBAAf3E,M;;;;;;;;;;;;;;;;;;;;;;ACJrB;;;;;;;;;;;;IAGqBX,M;;;AACjB,oBAAY0E,MAAZ,EAAmB;AAAA;;AAAA,oHACTA,MADS;;AAGf,cAAKE,SAAL,GAAiB,EAAjB;AACA,cAAKlN,QAAL,GAAgB,QAAhB;AACA,cAAK4T,UAAL,GAAkB,kBAAlB;AACA,cAAKvS,IAAL,GAAY,QAAZ;AACA,cAAKtB,IAAL,GAAY,QAAZ;AACA,cAAK8N,MAAL,GAAc,EAAd;;AAEA,cAAKT,SAAL,CAAeJ,MAAf;AAVe;AAWlB;;;;wCAEc;AACX;;AAEA,gBAAImB,yHAAJ,CAHW,CAG4B;;AAEvC,iBAAKC,2BAAL,CAAiCD,SAAjC,EAA2C,IAA3C,EAAgD,YAAhD,EAA8D,OAA9D,EAAuE,KAAvE;AAEH;;;+BAEM;;AAEH,iHAFG,CAEW;;AAEd;AACA7Q,cAAEuW,WAAF,GAAgB,SAAhB;AACAvW,cAAEwW,SAAF,GAAc,CAAd;AACAxW,cAAEyW,OAAF,GAAY,OAAZ;;AAEAzW,cAAEoR,SAAF;AACApR,cAAEgT,MAAF,CAAS,KAAK1Q,CAAL,GAAS,EAAlB,EAAsB,KAAKC,CAAL,GAAS,EAA/B;AACAvC,cAAEiT,MAAF,CAAS,KAAK3Q,CAAd,EAAiB,KAAKC,CAAL,GAAS,EAA1B;AACAvC,cAAE0W,MAAF;;AAEA1W,cAAEoR,SAAF;AACApR,cAAEgT,MAAF,CAAS,KAAK1Q,CAAd,EAAiB,KAAKC,CAAL,GAAS,EAA1B;AACAvC,cAAEiT,MAAF,CAAS,KAAK3Q,CAAL,GAAS,EAAlB,EAAsB,KAAKC,CAAL,GAAS,EAA/B;AACAvC,cAAE0W,MAAF;AACH;;;iCAEQC,O,EAAS;AACd,iBAAKL,UAAL,GAAkBK,OAAlB;AACH;;;wCAEc;AACX;;AAEA,mBAAO,CAAC,KAAKL,UAAN,CAAP;AACH;;;kCAES5G,M,EAAO;AACb;AACA,gBAAIsB,sHAA4BtB,MAA5B,CAAJ;;AAEAsB,sBAAUsF,UAAV,GAAuB,KAAKA,UAA5B;;AAEA,mBAAOtF,SAAP;AAEH;;;;EA7D+BV,c;;kBAAftF,M;;;;;;;;;;;;;;;;;;ACHrB;;;;;;;;;;;;IAEqBtB,S;;;AAEjB,uBAAYgG,MAAZ,EAAmB;AAAA;;AAAA,0HACTA,MADS;;AAGf,cAAKG,KAAL,CAAW,OAAX,EAAoB,UAApB,SAAsC,QAAtC,EAAgD,EAAhD;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,UAApB,SAAsC,QAAtC,EAAgD,EAAhD;AACA,cAAKA,KAAL,CAAW,QAAX,EAAqB,UAArB,SAAuC,UAAvC,EAAmD,EAAnD;;AAEA,cAAKpN,IAAL,GAAY,WAAZ;AACA,cAAKC,QAAL,GAAgB,WAAhB;AACA,cAAKiN,gBAAL,GAAwB,iCAAxB;AACA,cAAKC,SAAL,GAAiB,EAAjB;;AAEA;AACA,cAAKG,eAAL;;AAEA,cAAKD,SAAL,CAAeJ,MAAf;AAfe;AAgBlB;;;EAlBkCY,c;;kBAAlB5G,S;;;;;;;;;;;;;;;;;;;;;;ACFrB;;;;;;;;;;;;IAEqBM,c;;;AAEjB,4BAAY0F,MAAZ,EAAmB;AAAA;;AAAA,oIACTA,MADS;;AAGf,cAAKG,KAAL,CAAW,OAAX,EAAoB,iBAApB,SAA6C,QAA7C,EAAuD,CAAvD;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,QAApB,SAAoC,QAApC,EAA8C,EAA9C;AACA,cAAKA,KAAL,CAAW,QAAX,EAAqB,UAArB,SAAuC,UAAvC,EAAmD,EAAnD;;AAEA,cAAKpN,IAAL,GAAY,gBAAZ;AACA,cAAKC,QAAL,GAAgB,gBAAhB;;AAEA;AACA,cAAKqN,eAAL;;AAEA,cAAKD,SAAL,CAAeJ,MAAf;AAbe;AAclB;;;;0CAEiB;AACd,iBAAKC,gBAAL,GAAwB,KAAKiH,qBAAL,EAAxB;AACA;AACH;;;gDAEuB;AACpB,gBAAIC,UAAU,EAAd;AACA,iBAAI,IAAInJ,IAAI,CAAZ,EAAeA,IAAI,KAAKuC,WAAL,CAAiB,iBAAjB,CAAnB,EAAwDvC,GAAxD,EAA6D;AACzD,oBAAIoJ,QAAQpJ,IAAI,CAAJ,GAAQ5B,KAAK0H,EAAb,GAAkB,KAAKvD,WAAL,CAAiB,iBAAjB,CAAlB,GAAwDnE,KAAK0H,EAAL,GAAU,CAA9E;AACAqD,wBAAQpC,IAAR,CAAa,CACT,KAAKxE,WAAL,CAAiB,QAAjB,IAA6BnE,KAAKmG,GAAL,CAAS6E,KAAT,CADpB,EAET,KAAK7G,WAAL,CAAiB,QAAjB,IAA6BnE,KAAKoG,GAAL,CAAS4E,KAAT,CAFpB,CAAb;AAIH;;AAED,mBAAO,aAAalP,KAAKC,SAAL,CAAegP,OAAf,CAAb,GAAuC,GAA9C;AACH;;;;EAlCuCvG,c;;kBAAvBtG,c;;;;;;;;;;;;;;;;;;ACFrB;;;;;;;;;;;;IAEqBkB,M;;;AAEjB,oBAAYwE,MAAZ,EAAmB;AAAA;;AAAA,oHAETA,MAFS;;AAIf,cAAKG,KAAL,CAAW,OAAX,EAAoB,UAApB,SAAsC,UAAtC,EAAkD,EAAlD;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,gBAApB,SAA4C,QAA5C,EAAsD,CAAtD;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,gBAApB,SAA4C,QAA5C,EAAsD,CAAtD;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,gBAApB,SAA4C,QAA5C,EAAsD,CAAtD;AACA,cAAKA,KAAL,CAAW,QAAX,EAAqB,UAArB,SAAuC,UAAvC,EAAmD,EAAnD;;AAEA,cAAKpN,IAAL,GAAY,QAAZ;AACA,cAAKC,QAAL,GAAgB,QAAhB;AACA,cAAKiN,gBAAL,GAAwB,yEAAxB;AACA,cAAKC,SAAL,GAAiB,EAAjB;;AAEA,cAAKE,SAAL,CAAeJ,MAAf;AAfe;AAgBlB;;;EAlB+BY,c;;kBAAfpF,M;;;;;;;;;;;;;;;;;;ACFrB;;;;;;;;;;;;IAEqBd,K;;;AAEjB,mBAAYsF,MAAZ,EAAmB;AAAA;;AAAA,kHAETA,MAFS;;AAIf,cAAKG,KAAL,CAAW,OAAX,EAAoB,UAApB,SAAsC,UAAtC,EAAkD,EAAlD;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,UAApB,SAAsC,QAAtC,EAAgD,EAAhD;AACA,cAAKA,KAAL,CAAW,QAAX,EAAqB,UAArB,SAAuC,UAAvC,EAAmD,EAAnD;;AAEA,cAAKpN,IAAL,GAAY,OAAZ;AACA,cAAKC,QAAL,GAAgB,OAAhB;AACA,cAAKiN,gBAAL,GAAwB,8BAAxB;AACA,cAAKC,SAAL,GAAiB,EAAjB;;AAEA,cAAKE,SAAL,CAAeJ,MAAf;AAbe;AAclB;;;EAhB8BY,c;;kBAAdlG,K;;;;;;;;;;;;;;;;;;;;;;ACFrB;;;;;;;;;;;;IAEqBR,U;;;AAEjB,wBAAY8F,MAAZ,EAAmB;AAAA;;AAAA,4HACTA,MADS;;AAGf,cAAKG,KAAL,CAAW,QAAX,EAAqB,UAArB,SAAuC,UAAvC,EAAmD,EAAnD;;AAEA,cAAKpN,IAAL,GAAY,aAAZ;AACA,cAAKC,QAAL,GAAgB,YAAhB;AACA,cAAKiN,gBAAL,GAAwB,kCAAxB;AACA,cAAKC,SAAL,GAAiB,EAAjB;AACA,cAAKY,QAAL,GAAgB,EAAhB;AACA,cAAKuG,eAAL,GAAuB,CAAvB;;AAEA,cAAKjH,SAAL,CAAeJ,MAAf;;AAEA,YAAI,OAAO,MAAKc,QAAZ,KAAyB,WAA7B,EAAyC;AACrC,kBAAKA,QAAL,CAAczP,OAAd,CAAsB,mBAAW;AAAE;AAC/B,sBAAK8O,KAAL,CAAW,OAAX,EAAoBa,QAAQjO,IAA5B,SAAwC,UAAxC,EAAoD,EAApD;AACH,aAFD;AAGH;;AAED,cAAKsN,eAAL;AApBe;AAqBlB;;;;0CAEgB;AAAA;;AAEb,iBAAKH,SAAL,GAAiB,KAAKD,gBAAtB;;AAEA;AACA,gBAAIqH,wBAAwB,IAA5B;AACA,gBAAIC,mBAAmB,CAAvB;AACA,iBAAKxG,QAAL,CAAc1P,OAAd,CAAsB,cAAM;AACxB,oBAAG4P,GAAG5M,IAAH,IAAW,OAAd,EAAsB;AAClB,wBAAGkT,mBAAmB,CAAtB,EAAwB;AACpBD,gDAAwBA,wBAAwB,IAAhD;AACH;AACDC,wCAAoB,CAApB;AACAD,4CAAwBA,wBAAwBrG,GAAGM,QAAH,EAAhD;AACH;AACJ,aARD;AASA+F,oCAAwBA,wBAAwB,GAAhD;;AAEA;AACA,gBAAI3G,QAAQ,YAAZ;AACA,iBAAKT,SAAL,GAAiB,KAAKA,SAAL,CAAeJ,OAAf,CAAuBa,KAAvB,EAA8B2G,qBAA9B,CAAjB;;AAEA;AACA,gBAAIE,SAAJ;AACA,gBAAG,KAAKH,eAAL,IAAwB,CAA3B,EAA6B;AAAE;AAC3BG,4BAAY,2BAAZ;AACH,aAFD,MAGI;AACAA,4BAAY,4BAAZ;AACH;;AAED,gBAAI7G,QAAQ,iBAAZ;AACA,iBAAKT,SAAL,GAAiB,KAAKA,SAAL,CAAeJ,OAAf,CAAuBa,KAAvB,EAA8B6G,SAA9B,CAAjB;;AAEA;AACA,gBAAG,KAAKH,eAAL,IAAwB,CAA3B,EAA6B;AACzB,qBAAKnH,SAAL,GAAiB,iCAAiC,KAAKA,SAAtC,GAAkD,IAAnE;AACH;;AAED;AACA,iBAAKa,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3B,oBAAGmQ,MAAMmC,SAAN,IAAmB,UAAnB,IAAiCnC,MAAMnN,IAAN,IAAc,QAAlD,EAA2D;AACvDmN,0BAAMN,QAAN,CAAe,OAAKhB,SAApB;AACH;AACJ,aAJD;;AAMA;AACA,gBAAI,KAAKgE,QAAT,EAAkB;AACd,qBAAKC,YAAL;AACH;;AAED;;AAEA;AACA,iBAAKpD,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3B,uBAAKyP,QAAL,CAAczP,OAAd,CAAsB,mBAAW;AAC7B,wBAAImQ,MAAMzO,IAAN,IAAciO,QAAQjO,IAAtB,IAA8ByO,MAAM+D,UAAN,CAAiB9O,MAAjB,GAA0B,CAA5D,EAA8D;AAC1D,+BAAKqK,QAAL,CAAc2G,MAAd,CAAqB,OAAK3G,QAAL,CAAcjC,OAAd,CAAsBmC,OAAtB,CAArB,EAAoD,CAApD,EAD0D,CACF;AAC3D;AACJ,iBAJD;AAKH,aAND;;AAQA;AACA,gBAAG,KAAK0G,0BAAL,MAAqC,CAAxC,EAA0C;AAAE;AACxC,qBAAKvH,KAAL,CAAW,OAAX,EAAoB,cAAcjN,kBAAlC,EAAsD,IAAtD,EAA4D,UAA5D,EAAwE,EAAxE;AACH;AACD,gBAAG,KAAKwU,0BAAL,MAAqC,CAArC,IAA0C,KAAK5G,QAAL,CAAcrK,MAAd,IAAwB,CAArE,EAAuE;AAAG;AACtE,qBAAKkR,eAAL;AACA,qBAAKtH,eAAL;AACH;AACJ;;;qDAE2B;AACxB,gBAAIuH,iBAAiB,CAArB;AACA,iBAAK7G,QAAL,CAAc1P,OAAd,CAAsB,cAAM;AACxB,oBAAG4P,GAAG5M,IAAH,IAAW,OAAX,IAAsB4M,GAAGsE,UAAH,CAAc9O,MAAd,IAAwB,CAAjD,EAAmD;AAAI;AACnDmR,qCAAiBA,iBAAiB,CAAlC,CAD+C,CACT;AACzC;AACJ,aAJD;AAKA,mBAAOA,cAAP;AACH;;;0CAEgB;AAAA;;AACb,iBAAK7G,QAAL,CAAc1P,OAAd,CAAsB,cAAM;AACxB,oBAAG4P,GAAG5M,IAAH,IAAW,OAAX,IAAsB4M,GAAGsE,UAAH,CAAc9O,MAAd,IAAwB,CAA9C,IAAmD,OAAKiR,0BAAL,MAAqC,CAA3F,EAA6F;AACzF,2BAAKlE,QAAL,CAAc,OAAd,EAAuBvC,GAAGlO,IAA1B,EAAgC,MAAhC;AACH;AACJ,aAJD;AAKH;;;kCAESqP,W,EAAY;AAClB,gBAAIoD,iIAA+BpD,WAA/B,CAAJ;;AAEA,gBAAItB,WAAW,EAAf;AACA,iBAAKC,QAAL,CAAc1P,OAAd,CAAsB,cAAM;AACxB,oBAAI4P,GAAG5M,IAAH,IAAW,OAAf,EAAuB;AACnB,wBAAIwT,SAAS;AACT9U,8BAAMkO,GAAGlO,IADA;AAETiO,iCAAS;AAFA,qBAAb;AAIAF,6BAASiE,IAAT,CAAc8C,MAAd;AACH;AACJ,aARD;;AAUA/G,qBAASzP,OAAT,CAAiB,mBAAW;AACxBmU,6BAAa1E,QAAb,CAAsBiE,IAAtB,CAA2B/D,OAA3B;AACH,aAFD;;AAIA;AACAwE,yBAAa6B,eAAb,GAA+B,KAAKA,eAApC;;AAEA,mBAAO7B,YAAP;AAEH;;;wCAEc;AACX;;AAEA,gBAAIrE,iIAAJ;;AAEA,iBAAKuB,cAAL,CAAoBvB,SAApB,EAA+B,IAA/B,EAAqC,CAAC,QAAD,EAAW,MAAX,EAAmB,OAAnB,CAArC,EAAkE,KAAKkG,eAAvE,EAAwF,MAAxF;AAEH;;;uCAEc5E,Q,EAAS;AACpB,iBAAK4E,eAAL,GAAuB3G,SAAS+B,QAAT,CAAvB;AACA,iBAAKpC,eAAL;AACH;;;;EAxJmCO,c;;kBAAnB1G,U;;;;;;;;;;;;;;;;;;ACFrB;;;;;;;;;;;;IAEqBE,S;;;AAEjB,uBAAY4F,MAAZ,EAAmB;AAAA;;AAAA,0HACTA,MADS;;AAGf,cAAKG,KAAL,CAAW,OAAX,EAAoB,UAApB,SAAsC,UAAtC,EAAkD,EAAlD;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,OAApB,SAAmC,QAAnC,EAA6C,CAA7C;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,OAApB,SAAmC,QAAnC,EAA6C,CAA7C;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,OAApB,SAAmC,QAAnC,EAA6C,CAA7C;AACA,cAAKA,KAAL,CAAW,QAAX,EAAqB,UAArB,SAAuC,UAAvC,EAAmD,EAAnD;;AAEA,cAAKpN,IAAL,GAAY,WAAZ;AACA,cAAKC,QAAL,GAAgB,WAAhB;AACA,cAAKiN,gBAAL,GAAwB,mDAAxB;AACA,cAAKC,SAAL,GAAiB,EAAjB;;AAEA,cAAKE,SAAL,CAAeJ,MAAf;AAde;AAelB;;;EAjBkCY,c;;kBAAlBxG,S;;;;;;;;;;;;;;;;;;ACFrB;;;;;;;;;;;;IAEqB0B,K;;;AAEjB,mBAAYkE,MAAZ,EAAmB;AAAA;;AAAA,kHAETA,MAFS;;AAIf,cAAKG,KAAL,CAAW,OAAX,EAAoB,WAApB,SAAuC,UAAvC,EAAmD,EAAnD;AACA,cAAKA,KAAL,CAAW,OAAX,EAAoB,WAApB,SAAuC,UAAvC,EAAmD,EAAnD;AACA,cAAKA,KAAL,CAAW,QAAX,EAAqB,UAArB,SAAuC,UAAvC,EAAmD,EAAnD;;AAEA,cAAKpN,IAAL,GAAY,OAAZ;AACA,cAAKC,QAAL,GAAgB,OAAhB;AACA,cAAKiN,gBAAL,GAAwB,gCAAxB;AACA,cAAKC,SAAL,GAAiB,EAAjB;;AAEA,cAAKE,SAAL,CAAeJ,MAAf;AAbe;AAclB;;;EAhB8BY,c;;kBAAd9E,K;;;;;;;;;;;;;;;;;;;;ACFrB;;;;AACA;;;;;;;;IAEqB8E,I;AAEjB,kBAAYZ,MAAZ,EAAmB;AAAA;;AACf;AACA,aAAKe,QAAL,GAAgB,EAAhB;;AAEA,aAAKnO,CAAL,GAAS,CAAT;AACA,aAAKC,CAAL,GAAS,CAAT;AACA,aAAKgO,MAAL,GAAc,EAAd;AACA,aAAKiH,YAAL,GAAoB,SAApB;AACA,aAAKC,aAAL,GAAqB,SAArB;AACA,aAAK7D,QAAL,GAAgB,KAAhB;AACA,aAAKtC,KAAL,GAAa,SAAb;AACA,aAAK7O,IAAL,GAAY,MAAZ;AACA,aAAK6Q,cAAL,GAAsB,IAAtB;AACA,aAAK1D,SAAL,GAAiB,EAAjB;AACA,aAAKD,gBAAL,GAAwB,EAAxB;AACA,aAAK+H,QAAL,GAAgB,KAAhB;AACA,aAAKzD,OAAL,GAAe,EAAf;;AAEA,aAAI,IAAI9R,GAAR,IAAeuN,MAAf,EAAuB;AACnB,iBAAKvN,GAAL,IAAYuN,OAAOvN,GAAP,CAAZ;AACH;AAEJ;;;;kCAESuN,M,EAAO;AAAA;;AACb;;AAEA,iBAAI,IAAIvN,GAAR,IAAeuN,MAAf,EAAuB;AACnB,qBAAKvN,GAAL,IAAYuN,OAAOvN,GAAP,CAAZ;AACH;;AAED,gBAAI,OAAO,KAAKqO,QAAZ,KAAyB,WAA7B,EAA0C;AACtC,qBAAKA,QAAL,CAAczP,OAAd,CAAsB,mBAAW;AAAE;AAC/B,0BAAK0P,QAAL,CAAc1P,OAAd,CAAsB,cAAM;AAAG;AAC3B,4BAAG2P,QAAQjO,IAAR,IAAgBkO,GAAGlO,IAAnB,IAA2BkO,GAAG5M,IAAH,IAAW,OAAzC,EAAiD;AAC7C4M,+BAAGC,QAAH,CAAYF,QAAQA,OAApB;AACH;AACJ,qBAJD;AAKH,iBAND;AAOH;AACJ;;;+BAEM;;AAEH,iBAAKiH,MAAL,GAAc,KAAKrV,CAAL,GAAS,KAAKiO,MAA5B;AACA,iBAAKqH,OAAL,GAAe,KAAKtV,CAAL,GAAS,KAAKiO,MAA7B;;AAEA,iBAAKE,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3BmQ,sBAAMC,IAAN;AACH,aAFD;;AAIAnR,cAAEoR,SAAF;AACApR,cAAEqR,SAAF,GAAc,KAAKC,KAAnB;AACA;AACA;AACA,gBAAIuG,aAAa/X,SAASC,aAAT,CAAuB,cAAvB,CAAjB;AACA,gBAAI,KAAKuC,CAAL,GAAO,KAAKiO,MAAL,GAAY,CAAvB,EAAyB;AACjB,qBAAKjO,CAAL,IAAS,KAAKiO,MAAL,GAAY,CAArB;AACAvQ,kBAAEuT,GAAF,CAAM,KAAKjR,CAAX,EAAc,KAAKC,CAAnB,EAAsB,KAAKgO,MAA3B,EAAmC,CAAnC,EAAsCzE,KAAK0H,EAAL,GAAU,CAAhD,EAAmD,KAAnD;AACP,aAHD,MAIK,IAAI,KAAKjR,CAAL,GAAO,KAAKgO,MAAL,GAAY,CAAvB,EAAyB;AACtB,qBAAKhO,CAAL,IAAU,KAAKgO,MAAf;AACAvQ,kBAAEuT,GAAF,CAAM,KAAKjR,CAAX,EAAc,KAAKC,CAAnB,EAAsB,KAAKgO,MAA3B,EAAmC,CAAnC,EAAsCzE,KAAK0H,EAAL,GAAU,CAAhD,EAAmD,KAAnD;AACP,aAHI,MAIA,IAAI,KAAKlR,CAAL,GAAS,KAAKiO,MAAL,GAAY,CAArB,GAAyBsH,WAAW3X,KAAxC,EAA8C;AAC3C,qBAAKoC,CAAL,IAAU,KAAKiO,MAAL,GAAY,CAAtB;AACAvQ,kBAAEuT,GAAF,CAAM,KAAKjR,CAAX,EAAc,KAAKC,CAAnB,EAAsB,KAAKgO,MAA3B,EAAmC,CAAnC,EAAsCzE,KAAK0H,EAAL,GAAU,CAAhD,EAAmD,KAAnD;AACP,aAHI,MAIA,IAAI,KAAKjR,CAAL,GAAS,KAAKgO,MAAL,GAAY,CAArB,GAAyBsH,WAAWzX,MAAxC,EAA+C;AAC5C,qBAAKmC,CAAL,IAAU,KAAKgO,MAAf;AACAvQ,kBAAEuT,GAAF,CAAM,KAAKjR,CAAX,EAAc,KAAKC,CAAnB,EAAsB,KAAKgO,MAA3B,EAAmC,CAAnC,EAAsCzE,KAAK0H,EAAL,GAAU,CAAhD,EAAmD,KAAnD;AACP,aAHI,MAID;AACJxT,kBAAEuT,GAAF,CAAM,KAAKjR,CAAX,EAAc,KAAKC,CAAnB,EAAsB,KAAKgO,MAA3B,EAAmC,CAAnC,EAAsCzE,KAAK0H,EAAL,GAAU,CAAhD,EAAmD,KAAnD;AACC;AACDxT,cAAEwR,SAAF,GAAc,OAAd;AACAxR,cAAEyR,QAAF,CAAW,KAAKhP,IAAhB,EAAsB,KAAKH,CAAL,GAAS,KAAKiO,MAApC,EAA4C,KAAKhO,CAAL,GAAO,KAAKgO,MAAxD;AACAvQ,cAAE0R,IAAF;AACA1R,cAAE2R,SAAF;AACH;;;8BAEK5N,I,EAAMtB,I,EAAMX,M,EAAQuR,S,EAAWyE,Y,EAAa;;AAE9C;AACA,gBAAIC,MAAJ;AACA,gBAAIhU,QAAQ,OAAZ,EAAoB;AAChBgU,yBAAS,CAAC,CAAD,GAAIjW,OAAOyO,MAApB;AACH,aAFD,MAGI;AACAwH,yBAASjW,OAAOyO,MAAhB;AACH;AACD,gBAAI1F,QAAQ,IAAImN,yBAAJ,CAAoB;AAC5B1E,gCAAgBxR,MADY;AAE5BmW,gCAAgBF,MAFY;AAG5BG,gCAAgB,CAHY;AAI5BnU,sBAAMA,IAJsB;AAK5BsP,2BAAWA,SALiB;AAM5B5Q,sBAAMA,IANsB;AAO5BuE,uBAAO8Q,YAPqB;AAQ5BnV,0BAAU/C,0BAAgBgD,gBAAhB,EARkB;AAS5BF,0BAAU;AATkB,aAApB,CAAZ;AAWAZ,mBAAO2O,QAAP,CAAgBgE,IAAhB,CAAqB5J,KAArB;AACH;;;iCAEQ9G,I,EAAMtB,I,EAAMX,M,EAAO;AAAA;;AACxB;;AAEA,iBAAK2O,QAAL,CAAc1P,OAAd,CAAsB,cAAM;AACxB,oBAAG4P,GAAGlO,IAAH,IAAWA,IAAX,IAAmBkO,GAAG5M,IAAH,IAAWA,IAAjC,EAAsC;AAClC4M,uBAAGwH,UAAH;AACA,2BAAK1H,QAAL,CAAc0G,MAAd,CAAqB,OAAK1G,QAAL,CAAclC,OAAd,CAAsBoC,EAAtB,CAArB,EAA+C,CAA/C;AACH;AACJ,aALD;AAMH;;;kCAESrO,C,EAAEC,C,EAAE;AACV;;;AAGA,gBAAIgQ,iBAAiB,KAArB;;AAEA,iBAAK9B,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3B,oBAAGmQ,MAAMvP,SAAN,CAAgBW,CAAhB,EAAkBC,CAAlB,KAAwB,IAA3B,EAAgC;AAC5BgQ,qCAAiB,IAAjB;AACH;AACJ,aAJD;;AAMA;AACA,gBAAG,CAACA,cAAJ,EAAmB;;AAEf,oBAAIC,gBAAgBC,kBAAkBnQ,CAAlB,EAAqB,KAAKA,CAA1B,EAA6BC,CAA7B,EAAgC,KAAKA,CAArC,CAApB;;AAEA,oBAAIiQ,gBAAgB,KAAKjC,MAAzB,EAAgC;AAC5B,yBAAKe,KAAL,GAAa,KAAKmG,aAAlB;AACA,yBAAKC,QAAL,GAAgB,IAAhB;AACA,yBAAK9D,QAAL,GAAgB,IAAhB;AACA,yBAAKH,aAAL;;AAEA,yBAAKI,YAAL;;AAEAtB,qCAAiB,IAAjB;AACH,iBATD,MAUI;AACA,yBAAKjB,KAAL,GAAa,KAAKkG,YAAlB;AACA,yBAAK5D,QAAL,GAAgB,KAAhB;AACH;AAEJ;;AAED,mBAAOrB,cAAP;AACH;;;oCAEWjQ,C,EAAEC,C,EAAE;AACZ;;;AAGA,gBAAIgQ,iBAAiB,KAArB;;AAEA,gBAAIC,gBAAgBC,kBAAkBnQ,CAAlB,EAAqB,KAAKA,CAA1B,EAA6BC,CAA7B,EAAgC,KAAKA,CAArC,CAApB;;AAEA,gBAAIiQ,gBAAgB,KAAKjC,MAAzB,EAAgC;AAC5BgC,iCAAiB,IAAjB;AACH;;AAED,mBAAOA,cAAP;AACH;;;gCAEOjQ,C,EAAEC,C,EAAE;AACR,iBAAKmV,QAAL,GAAgB,KAAhB;;AAEA,iBAAKjH,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3BmQ,sBAAMjP,OAAN,CAAcK,CAAd,EAAgBC,CAAhB;AACH,aAFD;AAGH;;;kCAESD,C,EAAEC,C,EAAE;AACV,gBAAI,KAAKmV,QAAL,IAAiB,IAArB,EAA0B;AACtB,qBAAKpV,CAAL,GAASA,CAAT;AACA,qBAAKC,CAAL,GAASA,CAAT;AACH;;AAED,iBAAKkO,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3BmQ,sBAAMjQ,SAAN,CAAgBqB,CAAhB,EAAkBC,CAAlB;AACH,aAFD;AAGH;;;iCAEQJ,G,EAAI;AACT;AACA,gBAAIA,OAAO,QAAX,EAAoB;AAChB,oBAAG,KAAKyR,QAAL,IAAiB,IAApB,EAAyB;AACrB,yBAAKS,UAAL;AACH;AACJ;;AAED,iBAAK5D,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3BmQ,sBAAMhP,QAAN,CAAeC,GAAf;AACH,aAFD;AAGH;;;wCAEc;AAAA;;AACX;;AAEA;AACA,mBAAOyJ,QAAQtH,UAAf,EAA2B;AACvBsH,wBAAQrH,WAAR,CAAoBqH,QAAQtH,UAA5B;AACH;;AAED;AACA,gBAAI7B,OAAO3C,SAAS6E,aAAT,CAAuB,IAAvB,CAAX;AACAlC,iBAAK4L,WAAL,GAAmB,KAAK5L,IAAxB;AACAA,iBAAKlC,YAAL,CAAkB,OAAlB,EAA0B,oBAA1B;AACAqL,oBAAQ/G,WAAR,CAAoBpC,IAApB;;AAEA;AACA,gBAAIoO,YAAY/Q,SAAS6E,aAAT,CAAuB,IAAvB,CAAhB;AACAiH,oBAAQ/G,WAAR,CAAoBgM,SAApB;AACAA,sBAAUtQ,YAAV,CAAuB,OAAvB,EAAgC,cAAhC;;AAEA;AACA,iBAAKkQ,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3B,oBAAGmQ,MAAMnN,IAAN,IAAc,OAAd,IAAyBmN,MAAMmC,SAAN,IAAmB,UAA/C,EAA0D;AACtD,2BAAKvC,2BAAL,CAAiCD,SAAjC,EAA2CK,KAA3C,EAAiD,OAAjD,EAA0DA,MAAMzO,IAAhE,EAAsE,IAAtE;AACH;AACJ,aAJD;;AAMA,mBAAOoO,SAAP;AACH;;;qCAEW;AACR;;AAEA,iBAAKJ,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3BmQ,sBAAMiH,UAAN;AACH,aAFD;;AAIA,iBAAKhL,MAAL,CAAYrM,gBAAZ,CAA6BqW,MAA7B,CAAoC,KAAKhK,MAAL,CAAYrM,gBAAZ,CAA6ByN,OAA7B,CAAqC,IAArC,CAApC,EAA+E,CAA/E,EAPQ,CAO2E;AACtF;;;iCAEQ;;AAEL,iBAAKkC,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3BmQ,sBAAMlO,MAAN;AACH,aAFD;;AAIA,iBAAKmO,IAAL;AACH;;;kCAESW,W,EAAY;AAClB;;AAEA,gBAAItB,WAAW,EAAf;AACA,iBAAKC,QAAL,CAAc1P,OAAd,CAAsB,cAAM;AACxB,oBAAI4P,GAAG0C,SAAH,IAAgB,QAAhB,IAA4B1C,GAAG5M,IAAH,IAAW,OAA3C,EAAmD;AAC/C,wBAAIwT,SAAS;AACT9U,8BAAMkO,GAAGlO,IADA;AAETiO,iCAASC,GAAGM,QAAH;AAFA,qBAAb;AAIAT,6BAASiE,IAAT,CAAc8C,MAAd;AACH;AACJ,aARD;;AAUA,gBAAIxE,SAAS;AACTrQ,0BAAU,KAAKA,QADN;AAETD,sBAAM,KAAKA,IAFF;AAGTH,mBAAG,KAAKA,CAHC;AAITC,mBAAG,KAAKA,CAJC;AAKTI,0BAAU,KAAKA,QALN;AAMT6N,0BAAUA;AAND,aAAb;;AASA,mBAAOuC,MAAP;AACH;;;qCAEW;AACR;;;AAGA;AACA,gBAAIqF,uBAAuB,CAA3B;AACA,iBAAK3H,QAAL,CAAc1P,OAAd,CAAsB,cAAM;AACxB,oBAAG4P,GAAG5M,IAAH,IAAW,QAAX,IAAuB4M,GAAGsE,UAAH,CAAc9O,MAAd,IAAwB,CAAlD,EAAoD;AAChDiS,2CAAuBzH,GAAGsE,UAAH,CAAc9O,MAArC;AACH;AACJ,aAJD;AAKA;AACA,iBAAK8N,OAAL,CAAalT,OAAb,CAAqB,mBAAW;AAC5BsX,wBAAQ/P,WAAR,GAAsB8P,uBAAqBC,QAAQC,YAAnD;AACH,aAFD;;AAIA,mBAAO,KAAKrE,OAAZ;AACH;;;wCAEc;AACX;;AAEA,mBAAO,EAAP;AACH;;;0CAEgB;AAAA;;AACb;;AAEA,gBAAI5D,QAAQ,WAAZ;AACA,iBAAKT,SAAL,GAAiB,KAAKD,gBAAL,CAAsBH,OAAtB,CAA8Ba,KAA9B,EAAqC,aAAK;AACvD,uBAAO,OAAKJ,WAAL,CAAiB3N,CAAjB,CAAP;AACH,aAFgB,CAAjB;;AAIA;AACA,iBAAKmO,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3B,oBAAGmQ,MAAMmC,SAAN,IAAmB,UAAnB,IAAiCnC,MAAMnN,IAAN,IAAc,QAAlD,EAA2D;AACvDmN,0BAAMN,QAAN,CAAe,OAAKhB,SAApB;AACH;AACJ,aAJD;;AAMA;AACA,gBAAI,KAAKgE,QAAT,EAAkB;AACd,qBAAKC,YAAL;AACH;AACJ;;;uCAEa;AACV;AACA,gBAAI,KAAKjE,SAAL,IAAkB,EAAtB,EAAyB;AACrB,oBAAI2I,WAAW,8BAA8B,KAAK3I,SAAnC,GAA+C,GAA9D;;AAEAvO,uBAAOmX,UAAP,CAAkBD,QAAlB,EAA2B,cAA3B;AACH;AACD;AALA,iBAMI;AACA,wBAAIA,WAAW,4DAAf;AACAlX,2BAAOmX,UAAP,CAAkBD,QAAlB,EAA2B,cAA3B;AACH;AACJ;;;oCAEWE,M,EAAO;AACf;;AAEAA,qBAASA,OAAOC,KAAP,CAAa,GAAb,EAAkBC,IAAlB,CAAuB,EAAvB,CAAT;AACA,gBAAIjI,UAAU,IAAd;;AAEA,iBAAKD,QAAL,CAAc1P,OAAd,CAAsB,iBAAS;AAC3B,oBAAGmQ,MAAMzO,IAAN,IAAcgW,MAAd,IAAwBvH,MAAMnN,IAAN,IAAc,OAAzC,EAAiD;AAC7C2M,8BAAUQ,MAAMD,QAAN,EAAV;AACH;AACJ,aAJD;;AAMA,mBAAOP,OAAP;AACH;;;oDAE2BrL,I,EAAK0N,M,EAAO5Q,G,EAAKyW,K,EAAOC,oB,EAAqB;AACrE,gBAAIC,cAAchZ,SAAS6E,aAAT,CAAuB,IAAvB,CAAlB;AACAU,iBAAKR,WAAL,CAAiBiU,WAAjB;;AAGA;AACA,gBAAIC,MAAMjZ,SAAS6E,aAAT,CAAuB,KAAvB,CAAV;AACAmU,wBAAYjU,WAAZ,CAAwBkU,GAAxB;AACAA,gBAAIxY,YAAJ,CAAiB,OAAjB,EAA0B,cAA1B;;AAEA;AACA,gBAAIyY,WAAWlZ,SAAS6E,aAAT,CAAuB,KAAvB,CAAf;AACAoU,gBAAIlU,WAAJ,CAAgBmU,QAAhB;AACA,gBAAIC,YAAYnZ,SAASgF,cAAT,CAAwB8T,QAAQ,GAAhC,CAAhB;AACAI,qBAASnU,WAAT,CAAqBoU,SAArB;AACAD,qBAASzY,YAAT,CAAsB,OAAtB,EAA+B,iBAA/B;;AAGA;AACA,gBAAI2Y,eAAepZ,SAAS6E,aAAT,CAAuB,KAAvB,CAAnB;AACAoU,gBAAIlU,WAAJ,CAAgBqU,YAAhB;AACA,gBAAIC,YAAYrZ,SAASgF,cAAT,CAAwBiO,OAAO5Q,GAAP,CAAxB,CAAhB;AACA+W,yBAAarU,WAAb,CAAyBsU,SAAzB;AACAD,yBAAa3Y,YAAb,CAA0B,iBAA1B,EAA6C,MAA7C;AACA2Y,yBAAa3Y,YAAb,CAA0B,OAA1B,EAAmC,iBAAnC;AACA,gBAAI6Y,SAASR,QAAMhZ,0BAAgBgD,gBAAhB,EAAnB;AACAsW,yBAAa3Y,YAAb,CAA0B,IAA1B,EAAgC6Y,MAAhC;;AAGAtZ,qBAASW,cAAT,CAAwB2Y,MAAxB,EAAgC1Y,gBAAhC,CAAiD,UAAjD,EAA6D,iBAAS;AAClE,oBAAI2Y,aAAavZ,SAASW,cAAT,CAAwB2Y,MAAxB,EAAgC/K,WAAjD;AACA,oBAAGwK,oBAAH,EAAwB;AACpBQ,iCAAaC,WAAWD,UAAX,CAAb;AACH;;AAED;AACA,oBAAGtG,kBAAkBiF,yBAArB,EAAqC;AACjCjF,2BAAOnC,QAAP,CAAgByI,UAAhB;AACH,iBAFD,MAGI;AACAtG,2BAAO5Q,GAAP,IAAckX,UAAd;AACH;AACJ,aAbD;;AAeA;AACAvZ,qBAASW,cAAT,CAAwB2Y,MAAxB,EAAgC1Y,gBAAhC,CAAiD,UAAjD,EAA6D,UAASsN,GAAT,EAAc;AACvE,oBAAIA,IAAIuL,KAAJ,KAAc,EAAlB,EAAsB;AAClBvL,wBAAIV,cAAJ;AACAxN,6BAASW,cAAT,CAAwB2Y,MAAxB,EAAgCI,IAAhC,GAFkB,CAEuB;AAC5C;AACJ,aALD;AAOH;;;uDAE8BnU,I,EAAK0N,M,EAAO5Q,G,EAAKyW,K,EAAOC,oB,EAAqB;AACxE,gBAAIC,cAAchZ,SAAS6E,aAAT,CAAuB,IAAvB,CAAlB;AACAU,iBAAKR,WAAL,CAAiBiU,WAAjB;;AAGA;AACA,gBAAIC,MAAMjZ,SAAS6E,aAAT,CAAuB,KAAvB,CAAV;AACAmU,wBAAYjU,WAAZ,CAAwBkU,GAAxB;AACAA,gBAAIxY,YAAJ,CAAiB,OAAjB,EAA0B,cAA1B;;AAEA;AACA,gBAAIyY,WAAWlZ,SAAS6E,aAAT,CAAuB,KAAvB,CAAf;AACAoU,gBAAIlU,WAAJ,CAAgBmU,QAAhB;AACA,gBAAIC,YAAYnZ,SAASgF,cAAT,CAAwB8T,QAAQ,GAAhC,CAAhB;AACAI,qBAASnU,WAAT,CAAqBoU,SAArB;AACAD,qBAASzY,YAAT,CAAsB,OAAtB,EAA+B,iBAA/B;;AAGA;AACA,gBAAI2Y,eAAepZ,SAAS6E,aAAT,CAAuB,KAAvB,CAAnB;AACAoU,gBAAIlU,WAAJ,CAAgBqU,YAAhB;AACA,gBAAIC,YAAYrZ,SAASgF,cAAT,CAAwBiO,OAAO5Q,GAAP,CAAxB,CAAhB;AACA+W,yBAAarU,WAAb,CAAyBsU,SAAzB;AACAD,yBAAa3Y,YAAb,CAA0B,iBAA1B,EAA6C,OAA7C;AACA2Y,yBAAa3Y,YAAb,CAA0B,OAA1B,EAAmC,iBAAnC;AACA,gBAAI6Y,SAASR,QAAMhZ,0BAAgBgD,gBAAhB,EAAnB;AACAsW,yBAAa3Y,YAAb,CAA0B,IAA1B,EAAgC6Y,MAAhC;AAGH;;;uCAEc/T,I,EAAK8H,M,EAAOsM,O,EAAQC,c,EAAgB/S,W,EAAY;AAC3D,gBAAImS,cAAchZ,SAAS6E,aAAT,CAAuB,IAAvB,CAAlB;AACAU,iBAAKR,WAAL,CAAiBiU,WAAjB;;AAGA;AACA,gBAAIC,MAAMjZ,SAAS6E,aAAT,CAAuB,KAAvB,CAAV;AACAmU,wBAAYjU,WAAZ,CAAwBkU,GAAxB;AACAA,gBAAIxY,YAAJ,CAAiB,OAAjB,EAA0B,cAA1B;;AAEA;AACA,gBAAIyY,WAAWlZ,SAAS6E,aAAT,CAAuB,KAAvB,CAAf;AACAoU,gBAAIlU,WAAJ,CAAgBmU,QAAhB;AACA,gBAAIC,YAAYnZ,SAASgF,cAAT,CAAwB6B,WAAxB,CAAhB;AACAqS,qBAASnU,WAAT,CAAqBoU,SAArB;AACAD,qBAASzY,YAAT,CAAsB,OAAtB,EAA+B,iBAA/B;;AAGA;AACA,gBAAI2Y,eAAepZ,SAAS6E,aAAT,CAAuB,KAAvB,CAAnB;AACAoU,gBAAIlU,WAAJ,CAAgBqU,YAAhB;AACA,gBAAIS,WAAW7Z,SAAS6E,aAAT,CAAuB,QAAvB,CAAf;AACA8U,oBAAQ1Y,OAAR,CAAgB,kBAAU;AACtB,oBAAI6Y,KAAK,IAAIC,MAAJ,EAAT;AACAD,mBAAG5S,KAAH,GAAWyS,QAAQK,SAAR,CAAkB;AAAA,2BAAcC,eAAeC,MAA7B;AAAA,iBAAlB,CAAX;AACAJ,mBAAG9M,IAAH,GAAUkN,MAAV;AACAL,yBAASF,OAAT,CAAiB9R,GAAjB,CAAqBiS,EAArB;AACH,aALD;AAMAV,yBAAarU,WAAb,CAAyB8U,QAAzB;AACAT,yBAAa3Y,YAAb,CAA0B,OAA1B,EAAmC,iBAAnC;;AAEAoZ,qBAASM,aAAT,GAAyBP,cAAzB,CA/B2D,CA+BlB;;AAEzCC,qBAASjZ,gBAAT,CACI,QADJ,EAEI,YAAW;AAAEyM,uBAAO+M,cAAP,CAAsBP,SAAS3S,KAA/B;AAAwC,aAFzD,EAGI,KAHJ;AAKH;;;qCAEY3B,I,EAAK8H,M,EAAOtG,U,EAAWsT,c,EAAe;AAC/C,gBAAIrB,cAAchZ,SAAS6E,aAAT,CAAuB,IAAvB,CAAlB;AACAU,iBAAKR,WAAL,CAAiBiU,WAAjB;;AAGA;AACA,gBAAIC,MAAMjZ,SAAS6E,aAAT,CAAuB,KAAvB,CAAV;AACAmU,wBAAYjU,WAAZ,CAAwBkU,GAAxB;AACAA,gBAAIxY,YAAJ,CAAiB,OAAjB,EAA0B,cAA1B;;AAEA;AACA,gBAAIyY,WAAWlZ,SAAS6E,aAAT,CAAuB,KAAvB,CAAf;AACAoU,gBAAIlU,WAAJ,CAAgBmU,QAAhB;AACA,gBAAIC,YAAYnZ,SAASgF,cAAT,CAAwB,EAAxB,CAAhB;AACAkU,qBAASnU,WAAT,CAAqBoU,SAArB;AACAD,qBAASzY,YAAT,CAAsB,OAAtB,EAA+B,iBAA/B;;AAGA;AACA,gBAAI2Y,eAAepZ,SAAS6E,aAAT,CAAuB,KAAvB,CAAnB;AACAoU,gBAAIlU,WAAJ,CAAgBqU,YAAhB;AACA,gBAAIzV,SAAS3D,SAAS6E,aAAT,CAAuB,QAAvB,CAAb;AACA,gBAAIyV,iBAAiBta,SAASgF,cAAT,CAAwB+B,UAAxB,CAArB;AACApD,mBAAOlD,YAAP,CAAoB,OAApB,EAA6B,gBAA7B;AACAkD,mBAAOoB,WAAP,CAAmBuV,cAAnB;AACAlB,yBAAarU,WAAb,CAAyBpB,MAAzB;AACAyV,yBAAa3Y,YAAb,CAA0B,OAA1B,EAAmC,iBAAnC;;AAEAkD,mBAAO/C,gBAAP,CACI,WADJ,EAEI,YAAW;AAAEyZ,+BAAehN,MAAf;AAAyB,aAF1C,EAGI,KAHJ;AAKH;;;kCAES9H,I,EAAK8H,M,EAAO8G,O,EAAQ;AAAA;;AAC1B;;;AAGA5O,iBAAKR,WAAL,CAAiB/E,SAAS6E,aAAT,CAAuB,IAAvB,CAAjB;AACAU,iBAAKR,WAAL,CAAiB/E,SAAS6E,aAAT,CAAuB,IAAvB,CAAjB;;AAEA,gBAAIoU,MAAMjZ,SAAS6E,aAAT,CAAuB,IAAvB,CAAV;AACAoU,gBAAIxY,YAAJ,CAAiB,OAAjB,EAAyB,oBAAzB;AACA8E,iBAAKR,WAAL,CAAiBkU,GAAjB;AACA,gBAAII,YAAYrZ,SAASgF,cAAT,CAAwB,mBAAxB,CAAhB;AACAiU,gBAAIlU,WAAJ,CAAgBsU,SAAhB;;AAEA,gBAAI7W,IAAIxC,SAAS6E,aAAT,CAAuB,IAAvB,CAAR;AACAU,iBAAKR,WAAL,CAAiBvC,CAAjB;;AAEA,iBAAK6F,UAAL,GAAkBpH,OAAlB,CAA0B,mBAAW;AACjC,oBAAG,OAAKkT,OAAL,CAAa1F,OAAb,CAAqB8J,OAArB,KAAiC,CAAC,CAArC,EAAuC;AAAE;AACrC,2BAAKvH,2BAAL,CAAiCzL,IAAjC,EAAsCgT,OAAtC,EAA8C,aAA9C,EAA6D,MAA7D,EAAqE,KAArE;AACA,2BAAKvH,2BAAL,CAAiCzL,IAAjC,EAAsCgT,OAAtC,EAA8C,cAA9C,EAA8D,QAA9D,EAAwE,IAAxE;AACA,2BAAKvH,2BAAL,CAAiCzL,IAAjC,EAAsCgT,OAAtC,EAA8C,SAA9C,EAAyD,OAAzD,EAAkE,IAAlE;AACA,2BAAKvH,2BAAL,CAAiCzL,IAAjC,EAAsCgT,OAAtC,EAA8C,QAA9C,EAAwD,QAAxD,EAAkE,KAAlE;AACH,iBALD,MAMI;AACA,2BAAKgC,8BAAL,CAAoChV,IAApC,EAAyCgT,OAAzC,EAAiD,aAAjD,EAAgE,MAAhE,EAAwE,KAAxE;AACA,2BAAKgC,8BAAL,CAAoChV,IAApC,EAAyCgT,OAAzC,EAAiD,aAAjD,EAAgE,QAAhE,EAA0E,IAA1E;AACA,2BAAKgC,8BAAL,CAAoChV,IAApC,EAAyCgT,OAAzC,EAAiD,SAAjD,EAA4D,OAA5D,EAAqE,IAArE;AACA,2BAAKgC,8BAAL,CAAoChV,IAApC,EAAyCgT,OAAzC,EAAiD,QAAjD,EAA2D,QAA3D,EAAqE,KAArE;AACH;AACD,oBAAI/V,IAAIxC,SAAS6E,aAAT,CAAuB,IAAvB,CAAR;AACAU,qBAAKR,WAAL,CAAiBvC,CAAjB;AACH,aAfD;;AAiBA,iBAAKsE,YAAL,CAAkBvB,IAAlB,EAAuB8H,MAAvB,EAA8B,eAA9B,EAA+C,KAAKmN,WAApD;AACH;;;oCAEWpG,I,EAAK;AACb5S,oBAAQC,GAAR,CAAY,iBAAZ;;AAEA2S,iBAAKD,OAAL,CAAaQ,IAAb,CAAkB,IAAI8F,QAAJ,EAAlB;;AAEArG,iBAAKT,aAAL;AACH;;;;;;kBAziBgBnD,I;;;;;;;;;;;;;;;;;;;;ACHrB;;;;AACA;;;;;;;;IAEqB0H,e;AACjB,6BAAYtI,MAAZ,EAAmB;AAAA;;AAEf,aAAK8K,aAAL,GAAqB,CAArB;AACA,aAAKC,cAAL,GAAsB,EAAtB;AACA,aAAKlK,MAAL,GAAc,CAAd;;AAEA,aAAKmK,iBAAL,GAAyB,CAAzB;AACA,aAAKC,YAAL,GAAoB,CAApB;AACA,aAAKC,YAAL,GAAoB,CAApB;AACA,aAAKjY,QAAL,GAAgB,CAAhB;AACA,aAAKsV,cAAL,GAAsB,CAAtB;AACA,aAAKC,cAAL,GAAsB,CAAtB;AACA,aAAK2C,OAAL,GAAe,CAAf;AACA,aAAKC,OAAL,GAAe,CAAf;AACA,aAAKC,aAAL,GAAqB,KAArB;AACA,aAAKrY,QAAL,GAAgB,iBAAhB;;AAEA,aAAK2Q,SAAL,GAAiB,QAAjB,CAjBe,CAiBY;AAC3B,aAAKtP,IAAL,GAAY,QAAZ;AACA,aAAKiD,KAAL,GAAa,EAAb,CAnBe,CAmBE;;AAEjB,aAAKiO,UAAL,GAAkB,EAAlB;;AAEA,aAAK4F,OAAL,GAAe,KAAK5C,cAApB;AACA,aAAK6C,OAAL,GAAe,KAAK5C,cAApB;;AAEA,aAAI,IAAI/V,GAAR,IAAeuN,MAAf,EAAuB;AACnB,iBAAKvN,GAAL,IAAYuN,OAAOvN,GAAP,CAAZ;AACH;;AAED,aAAKlB,SAAL,CAAe,CAAf,EAAiB,CAAjB,EA9Be,CA8BM;AACxB;;;;+BAEM;;AAEH,gBAAI+Z,MAAM,KAAKvY,IAAf;AACA,gBAAIwY,YAAYrb,0BAAgBI,CAAhB,CAAkBkb,WAAlB,CAA8BF,GAA9B,EAAmC9a,KAAnD;AACA,gBAAIib,cAAc,SAAlB;AACA,gBAAIC,kBAAkB,KAAK7K,MAAL,GAAY,EAAlC;AACA,gBAAI8K,aAAa,KAAK9K,MAAL,GAAY,EAA7B;;AAEA,gBAAI,KAAKwK,aAAT,EAAuB;AACnB,oBAAG,KAAKhX,IAAL,IAAa,OAAhB,EAAwB;AACpBnE,8CAAgBI,CAAhB,CAAkBoR,SAAlB;AACAxR,8CAAgBI,CAAhB,CAAkBqR,SAAlB,GAA8B8J,WAA9B;AACI,wBAAI,KAAK5K,MAAL,IAAe,KAAKkK,cAAxB,EAAwC;AACxC7a,kDAAgBI,CAAhB,CAAkBuR,IAAlB,CAAuB,KAAKjP,CAAL,GAAS2Y,SAAT,GAAqB,KAAK1K,MAA1B,GAAmC8K,UAA1D,EAAsE,KAAK9Y,CAAL,GAAS6Y,eAA/E,EAAgGH,YAAY,KAAK1K,MAAjB,GAA0B8K,UAA1H,EAAuID,kBAAgB,CAAvJ;AACAxb,kDAAgBI,CAAhB,CAAkBuT,GAAlB,CAAsB,KAAKjR,CAAL,GAAS2Y,SAAT,GAAqB,KAAK1K,MAA1B,GAAmC8K,UAAzD,EAAqE,KAAK9Y,CAA1E,EAA6E6Y,eAA7E,EAA8F,CAA9F,EAAiGtP,KAAK0H,EAAL,GAAU,CAA3G,EAA8G,KAA9G;AACH,qBAHG,MAIK,IAAG,KAAKjD,MAAL,IAAe,KAAKiK,aAAvB,EAAqC;AAC1C5a,kDAAgBI,CAAhB,CAAkBuR,IAAlB,CAAuB,KAAKjP,CAAL,GAAS2Y,SAAT,GAAqB,KAAK1K,MAA1B,GAAmC8K,UAA1D,EAAsE,KAAK9Y,CAAL,GAAS,KAAKgO,MAApF,EAA4F0K,YAAY,KAAK1K,MAAjB,GAA0B8K,UAAtH,EAAmI,KAAK9K,MAAL,GAAY,CAA/I;AACA3Q,kDAAgBI,CAAhB,CAAkBuT,GAAlB,CAAsB,KAAKjR,CAAL,GAAS2Y,SAAT,GAAqB,KAAK1K,MAA1B,GAAmC8K,UAAzD,EAAqE,KAAK9Y,CAA1E,EAA6E,KAAKgO,MAAlF,EAA0F,CAA1F,EAA6FzE,KAAK0H,EAAL,GAAU,CAAvG,EAA0G,KAA1G;AACH;AACD5T,8CAAgBI,CAAhB,CAAkB0R,IAAlB;AACA9R,8CAAgBI,CAAhB,CAAkBoR,SAAlB;AACAxR,8CAAgBI,CAAhB,CAAkBqR,SAAlB,GAA8B,KAAKiC,cAAL,CAAoBkE,YAAlD;AACA5X,8CAAgBI,CAAhB,CAAkBwR,SAAlB,GAA8B,KAA9B;AACA5R,8CAAgBI,CAAhB,CAAkByR,QAAlB,CAA2B,KAAKhP,IAAhC,EAAsC,KAAKH,CAAL,IAAU,KAAKiO,MAAL,GAAc,CAAxB,CAAtC,EAAkE,KAAKhO,CAAL,GAAO,CAAzE;AACA3C,8CAAgBI,CAAhB,CAAkB0R,IAAlB;AACA9R,8CAAgBI,CAAhB,CAAkB2R,SAAlB;AACH,iBAlBD,MAmBI;AACA/R,8CAAgBI,CAAhB,CAAkBoR,SAAlB;AACAxR,8CAAgBI,CAAhB,CAAkBqR,SAAlB,GAA8B8J,WAA9B;AACAvb,8CAAgBI,CAAhB,CAAkBuR,IAAlB,CAAuB,KAAKjP,CAA5B,EAA+B,KAAKC,CAAL,GAAS6Y,eAAxC,EAAyDH,YAAY,KAAK1K,MAAjB,GAA0B8K,UAAnF,EAA+FD,kBAAgB,CAA/G;AACAxb,8CAAgBI,CAAhB,CAAkBuT,GAAlB,CAAsB,KAAKjR,CAAL,GAAS2Y,SAAT,GAAqB,KAAK1K,MAA1B,GAAmC8K,UAAzD,EAAqE,KAAK9Y,CAA1E,EAA6E6Y,eAA7E,EAA8F,CAA9F,EAAiGtP,KAAK0H,EAAL,GAAU,CAA3G,EAA8G,KAA9G;AACA5T,8CAAgBI,CAAhB,CAAkB0R,IAAlB;AACA9R,8CAAgBI,CAAhB,CAAkB2R,SAAlB;AACA/R,8CAAgBI,CAAhB,CAAkBoR,SAAlB;AACAxR,8CAAgBI,CAAhB,CAAkBqR,SAAlB,GAA8B,KAAKiC,cAAL,CAAoBkE,YAAlD;AACA5X,8CAAgBI,CAAhB,CAAkBwR,SAAlB,GAA8B,OAA9B;AACA5R,8CAAgBI,CAAhB,CAAkByR,QAAlB,CAA2B,KAAKhP,IAAhC,EAAuC,KAAKH,CAAL,GAAS+Y,UAAV,IAAyB,KAAK9K,MAAL,GAAc,CAAvC,CAAtC,EAAiF,KAAKhO,CAAL,GAAO,CAAxF;AACA3C,8CAAgBI,CAAhB,CAAkB0R,IAAlB;AACA9R,8CAAgBI,CAAhB,CAAkB2R,SAAlB;AACH;AACJ;AACD/R,sCAAgBI,CAAhB,CAAkBoR,SAAlB;AACAxR,sCAAgBI,CAAhB,CAAkBqR,SAAlB,GAA8B,KAAKiC,cAAL,CAAoBhC,KAAlD;AACA1R,sCAAgBI,CAAhB,CAAkBuT,GAAlB,CAAsB,KAAKjR,CAA3B,EAA8B,KAAKC,CAAnC,EAAsC,KAAKgO,MAA3C,EAAmD,CAAnD,EAAsDzE,KAAK0H,EAAL,GAAU,CAAhE,EAAmE,KAAnE;AACA5T,sCAAgBI,CAAhB,CAAkB0R,IAAlB;AACA9R,sCAAgBI,CAAhB,CAAkB2R,SAAlB;AACH;;;kCAESrP,C,EAAEC,C,EAAE;AACV,gBAAG3C,0BAAgB6S,iBAAhB,CAAmC,KAAKnQ,CAAxC,EAA2CA,CAA3C,EAA8C,KAAKC,CAAnD,EAAsDA,CAAtD,IAA2D,KAAKiY,aAAnE,EAAiF;;AAE7E,oBAAG,KAAKzW,IAAL,IAAa,QAAhB,EAAyB;AAAmB;AACxC,wBAAI+O,YAAY,IAAIiD,mBAAJ,CAAc;AAC1BzC,wCAAgB,KAAKA,cADK;AAE1B0C,0CAAkB,IAFQ;AAG1BtT,kCAAU;AAHgB,qBAAd,CAAhB;AAKA,yBAAKuS,UAAL,CAAgBR,IAAhB,CAAqB3B,SAArB;AACH;;AAED,oBAAG,KAAK/O,IAAL,IAAa,OAAhB,EAAwB;AAAE;AACtB,yBAAKkR,UAAL,CAAgBlU,OAAhB,CAAwB,qBAAa;AAAM;AACvC+R,kCAAUc,QAAV,GAAqB,IAArB;AACH,qBAFD;AAGH;;AAED,uBAAO,IAAP,CAjB6E,CAiBhE;AAChB,aAlBD,MAmBI;AACA,oBAAG,KAAK7P,IAAL,IAAa,OAAhB,EAAwB;AAAE;AACtB,yBAAKkR,UAAL,CAAgBlU,OAAhB,CAAwB,qBAAa;AAAO;AACxC+R,kCAAUc,QAAV,GAAqB,KAArB;AACH,qBAFD;AAGH;AACD,uBAAO,KAAP,CANA,CAMc;AACjB;AACJ;;;gCAEOtR,C,EAAEC,C,EAAE;AACR,iBAAK0S,UAAL,CAAgBlU,OAAhB,CAAwB,qBAAa;AACjC+R,0BAAU7Q,OAAV,CAAkBK,CAAlB,EAAqBC,CAArB;AACH,aAFD;AAGH;;;kCAESD,C,EAAEC,C,EAAE;;AAEV;AACA,gBAAI+Y,iBAAiB1b,0BAAgB6S,iBAAhB,CAAmC,KAAKnQ,CAAxC,EAA2CA,CAA3C,EAA8C,KAAKC,CAAnD,EAAsDA,CAAtD,CAArB;;AAEA;AACA,gBAAI+Y,iBAAiB,KAAKd,aAA1B,EAAwC;AACpC,qBAAKjK,MAAL,GAAc,KAAKkK,cAAnB;AACH,aAFD,MAGI;AACA,qBAAKlK,MAAL,GAAc,KAAKiK,aAAnB;AACH;AACD;AACA;AACA,gBAAIc,iBAAiB,KAAKZ,iBAA1B,EAA4C;;AAExC,oBAAIa,sBAAqB,KAAKjI,cAAL,CAAoB7C,QAApB,CAA6BtK,MAAtD;AACA,oBAAIqV,wBAAwB,KAAKlI,cAAL,CAAoB7C,QAApB,CAA6BlC,OAA7B,CAAqC,IAArC,CAA5B;;AAEC;AACD,oBAAI,KAAKxK,IAAL,IAAa,QAAjB,EAA0B;AACtB,yBAAK8W,OAAL,GAAe,KAAK5C,cAApB;AACA,yBAAK6C,OAAL,GAAe,KAAK5C,cAApB;AACH,iBAHD,MAII;AACA,wBAAIuD,aAAa,SAAQF,mBAAzB,CADA,CAC8C;AAC9C;AACA,wBAAIG,kBAAkBD,cAAcF,sBAAsB,CAApC,CAAsC,uCAAtC,CAAtB;;AAEA,yBAAKX,YAAL,GAAoB9O,KAAK6P,KAAL,CAAY,MAAK,KAAKrI,cAAL,CAAoB/C,MAAzB,GAAmCzE,KAAKoG,GAAL,CAAS,CAACwJ,eAAD,GAAmBD,aAAa,CAAb,GAAiBD,qBAA7C,CAA/C,CAApB;AACA,yBAAKb,YAAL,GAAoB,CAAC7O,KAAK6P,KAAL,CAAW,MAAK,KAAKrI,cAAL,CAAoB/C,MAAzB,GAAmCzE,KAAKmG,GAAL,CAAS,CAACyJ,eAAD,GAAmBD,aAAa,CAAb,GAAiBD,qBAA7C,CAA9C,CAArB;AACA,yBAAKX,OAAL,GAAe,KAAKF,YAApB;AACA,yBAAKG,OAAL,GAAe,KAAKF,YAApB;AACE;AACN,qBAAKG,aAAL,GAAqB,IAArB;AACA,qBAAKL,iBAAL,GAAyB,KAAKF,aAAL,GAAqB5a,0BAAgB6S,iBAAhB,CAAmC,KAAKwF,cAAxC,EAAwD,KAAK0C,YAA7D,EAA2E,KAAKzC,cAAhF,EAAgG,KAAK0C,YAArG,CAA9C;AAEC,aAvBL,MAwBI;AACA,qBAAKC,OAAL,GAAe,KAAK5C,cAApB;AACA,qBAAK6C,OAAL,GAAe,KAAK5C,cAApB;AACA,qBAAK6C,aAAL,GAAqB,KAArB;AACA,qBAAKL,iBAAL,GAAyB,KAAKF,aAA9B;AACH;;AAED,iBAAKvF,UAAL,CAAgBlU,OAAhB,CAAwB,qBAAa;AACjC+R,0BAAU7R,SAAV,CAAoBqB,CAApB,EAAuBC,CAAvB;AACH,aAFD;AAGH;;;iCAEQJ,G,EAAI;AACT,iBAAK8S,UAAL,CAAgBlU,OAAhB,CAAwB,qBAAa;AACjC+R,0BAAU5Q,QAAV,CAAmBC,GAAnB;AACH,aAFD;AAGH;;;qCAEW;AACR;;AAEA,iBAAK8S,UAAL,CAAgBlU,OAAhB,CAAwB,qBAAa;AACjC+R,0BAAUqF,UAAV;AACH,aAFD;AAIH;;;wCAEc;AACX,iBAAKhL,MAAL,CAAYsG,aAAZ;AACH;;;0CAEiBnR,C,EAAEC,C,EAAGuQ,S,EAAU;AAC7B;AACA,gBAAIlT,0BAAgB6S,iBAAhB,CAAkC,KAAKnQ,CAAvC,EAA0CA,CAA1C,EAA6C,KAAKC,CAAlD,EAAqDA,CAArD,IAA0D,KAAKgO,MAA/D,IAAyE,KAAKxM,IAAL,IAAa,OAA1F,EAAkG;AAAG;;AAEjG,oBAAG,KAAKkR,UAAL,CAAgB9O,MAAhB,GAAyB,CAA5B,EAA8B;AAAE;AAC5B,2BAAO,KAAP;AACH;;AAED,qBAAK8O,UAAL,CAAgBR,IAAhB,CAAqB3B,SAArB;;AAEA,uBAAO,IAAP;AACH;AACD,mBAAO,KAAP;AACH;;;mCAES;AACN,mBAAO,KAAK9L,KAAZ;AACH;;;iCAEQmL,Q,EAAS;AACd,iBAAKnL,KAAL,GAAamL,QAAb;;AAEA;AACA,gBAAI,KAAKpO,IAAL,IAAa,QAAjB,EAA0B;AACtB,qBAAKkR,UAAL,CAAgBlU,OAAhB,CAAwB,qBAAa;AAAM;AACvC+R,8BAAUsD,SAAV;AACH,iBAFD;AAGH;AACD;AALA,iBAMI;AAAI;AACJ,yBAAK9C,cAAL,CAAoBvD,eAApB;AACH;AACJ;;;iCAEQ;AACL,iBAAKzN,CAAL,GAAS,KAAKgR,cAAL,CAAoBhR,CAApB,GAAwB,KAAKuY,OAAtC;AACA,iBAAKtY,CAAL,GAAS,KAAK+Q,cAAL,CAAoB/Q,CAApB,GAAwB,KAAKuY,OAAtC;AACA,iBAAK3J,IAAL;;AAEA,iBAAK8D,UAAL,CAAgBlU,OAAhB,CAAwB,qBAAa;AACjC+R,0BAAU9P,MAAV;AACH,aAFD;AAGH;;;;;;kBAvOgBgV,e;;;;;;;;;;;;;;;;;;;;;;ICHAjC,S;AACjB,uBAAYrG,MAAZ,EAAmB;AAAA;;AAEf,aAAKgI,QAAL,GAAgB,IAAhB;AACA,aAAKpG,KAAL,GAAa,OAAb;AACA,aAAK5O,QAAL,GAAgB,WAAhB;AACA,aAAKkR,QAAL,GAAgB,KAAhB;AACA,aAAKoC,gBAAL,GAAwB,IAAxB;AACA,aAAKG,gBAAL,GAAwB,IAAxB;;AAEA,aAAI,IAAIhU,GAAR,IAAeuN,MAAf,EAAuB;AACnB,iBAAKvN,GAAL,IAAYuN,OAAOvN,GAAP,CAAZ;AACH;;AAED,aAAKyZ,MAAL,GAAc,KAAKtI,cAAL,CAAoBsE,OAAlC;AACA,aAAKiE,MAAL,GAAc,KAAKvI,cAAL,CAAoB/Q,CAAlC;AACH;;;;+BAEK;;AAEFvC,cAAEoR,SAAF;AACApR,cAAEqR,SAAF,GAAc,KAAKC,KAAnB;AACAtR,cAAEuW,WAAF,GAAgB,KAAKjF,KAArB;AACAtR,cAAE8b,wBAAF,GAA6B,kBAA7B,CALE,CAK+C;AACjD,gBAAG,KAAKlI,QAAR,EAAiB;AACb5T,kBAAEwW,SAAF,GAAc,CAAd;AACH,aAFD,MAGI;AACAxW,kBAAEwW,SAAF,GAAc,CAAd;AACH;AACDxW,cAAEgT,MAAF,CAAS,KAAK4I,MAAd,EAAsB,KAAKC,MAA3B;AACA7b,cAAE+b,aAAF,CAAgB,KAAKH,MAAL,GAAc,GAA9B,EAAmC,KAAKC,MAAxC,EAAgD,KAAKG,IAAL,GAAY,GAA5D,EAAiE,KAAKC,IAAtE,EAA4E,KAAKD,IAAjF,EAAuF,KAAKC,IAA5F;AACAjc,cAAE0W,MAAF;AACA1W,cAAE8b,wBAAF,GAA6B,aAA7B,CAfE,CAe0C;AAC/C;;;gCAEOxZ,C,EAAEC,C,EAAE;AAAA;;AAER,gBAAG,KAAKmV,QAAR,EAAiB;AAAG;AAChB7W,gCAAgBC,gBAAhB,CAAiCC,OAAjC,CAAyC,oBAAY;AAAuB;AACxEC,6BAASyP,QAAT,CAAkB1P,OAAlB,CAA0B,iBAAS;AAAqC;AACpE,4BAAImb,sBAAsBhL,MAAMiL,iBAAN,CAAwB7Z,CAAxB,EAA0BC,CAA1B,EAA6B,KAA7B,CAA1B,CAD+B,CACqC;AACpE,4BAAG2Z,mBAAH,EAAuB;AACnB,kCAAK/F,gBAAL,GAAwB+F,mBAAxB;AACA,kCAAK9F,SAAL,GAFmB,CAE6C;AACnE;AACJ,qBAND;AAOH,iBARD;AASH;;AAGD,gBAAI,KAAKD,gBAAL,IAAyB,IAA7B,EAAkC;AAAkC;AAChE,qBAAKgC,UAAL,GAD8B,CACkC;AACnE;;AAED,iBAAKT,QAAL,GAAgB,KAAhB,CAnBQ,CAmBuE;AAClF;;;kCAESpV,C,EAAEC,C,EAAE;AACV,gBAAI,KAAKmV,QAAL,IAAiB,IAArB,EAA0B;AACtB,qBAAKsE,IAAL,GAAY1Z,CAAZ;AACA,qBAAK2Z,IAAL,GAAY1Z,CAAZ;AACH;AACJ;;;iCAEQJ,G,EAAI;AACT,gBAAG,KAAKyR,QAAR,EAAiB;AACb,oBAAIzR,OAAO,QAAX,EAAoB;AAChB,yBAAKgW,UAAL;AACH;AACJ;AACJ;;;qCAEW;AACR;AACA,gBAAG,KAAKhC,gBAAL,IAAyB,IAA5B,EAAiC;AAC7B,qBAAKA,gBAAL,CAAsBlB,UAAtB,GAAmC,EAAnC;AACH;;AAED;AACA,iBAAKe,gBAAL,CAAsBf,UAAtB,CAAiCkC,MAAjC,CAAwC,KAAKnB,gBAAL,CAAsBf,UAAtB,CAAiC1G,OAAjC,CAAyC,IAAzC,CAAxC,EAAuF,CAAvF;AACH;;;oCAEU;AACP,gBAAK,KAAK4H,gBAAL,IAAyB,IAA9B,EAAmC;AAC/B,oBAAIpD,SAAS;AACT+C,6BAAS,KAAKE,gBAAL,CAAsBvT,IADtB;AAETyT,6BAAS,KAAKC,gBAAL,CAAsB1T,IAFtB;AAGToT,2BAAO,KAAKG,gBAAL,CAAsB1C,cAAtB,CAAqC3Q,QAHnC;AAITsT,2BAAO,KAAKE,gBAAL,CAAsB7C,cAAtB,CAAqC3Q;AAJnC,iBAAb;AAMA,uBAAOiF,KAAKC,SAAL,CAAekL,MAAf,CAAP;AACH;AACJ;;;oCAEU;AACP;AACA,iBAAKoD,gBAAL,CAAsBvF,QAAtB,CAA+B,KAAKoF,gBAAL,CAAsB/E,QAAtB,EAA/B;AACH;;;iCAEQ;;AAEL,iBAAK2K,MAAL,GAAc,KAAK5F,gBAAL,CAAsB1T,CAApC;AACA,iBAAKuZ,MAAL,GAAc,KAAK7F,gBAAL,CAAsBzT,CAApC;AACA,gBAAI,KAAK4T,gBAAT,EAA0B;AAAG;AACzB,qBAAK6F,IAAL,GAAY,KAAK7F,gBAAL,CAAsB7T,CAAlC;AACA,qBAAK2Z,IAAL,GAAY,KAAK9F,gBAAL,CAAsB5T,CAAlC;AACH;AACD,iBAAK4O,IAAL;AACH;;;0CAEiB7O,C,EAAEC,C,EAAGuQ,S,EAAU;AAC7B,mBAAO,KAAP;AACH;;;;;;kBAjHgBiD,S","file":"./js/flowDraw.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/flowDraw.js\");\n","\r\n\r\nimport Menu from './js/menu'\r\nimport GlobalVariables from './js/globalvariables'\r\nimport Molecule from './js/molecules/molecule.js'\r\n\r\nGlobalVariables.canvas = document.querySelector('canvas')\r\nGlobalVariables.c = GlobalVariables.canvas.getContext('2d')\r\n\r\nGlobalVariables.canvas.width = innerWidth\r\nGlobalVariables.canvas.height = innerHeight/2\r\n\r\nlet lowerHalfOfScreen = document.querySelector('.flex-parent');\r\nlowerHalfOfScreen.setAttribute(\"style\",\"height:\"+innerHeight/2.1+\"px\");\r\n\r\n// Event Listeners\r\nlet flowCanvas = document.getElementById('flow-canvas');\r\nflowCanvas.addEventListener('contextmenu', Menu.showmenu); //redirect right clicks to show the menu\r\n\r\nflowCanvas.addEventListener('mousemove', event => {\r\n    GlobalVariables.currentMolecule.nodesOnTheScreen.forEach(molecule => {\r\n        molecule.clickMove(event.clientX,event.clientY);        \r\n    });\r\n})\r\n\r\nwindow.addEventListener('resize', event => {\r\n    \r\n    console.log(\"resize\");\r\n    \r\n    var bounds = GlobalVariables.canvas.getBoundingClientRect();\r\n    GlobalVariables.canvas.width = bounds.width;\r\n    GlobalVariables.canvas.height = bounds.height; \r\n\r\n})\r\n\r\nflowCanvas.addEventListener('mousedown', event => {\r\n    //every time the mouse button goes down\r\n    \r\n    var clickHandledByMolecule = false;\r\n    \r\n    GlobalVariables.currentMolecule.nodesOnTheScreen.forEach(molecule => {\r\n        if (molecule.clickDown(event.clientX,event.clientY) == true){\r\n            clickHandledByMolecule = true;\r\n        }\r\n    });\r\n    \r\n    if(!clickHandledByMolecule){\r\n        GlobalVariables.currentMolecule.backgroundClick();\r\n    }\r\n    \r\n    //hide the menu if it is visible\r\n    if (!document.querySelector('.menu').contains(event.target)) {\r\n        hidemenu();\r\n    }\r\n    \r\n})\r\n\r\nflowCanvas.addEventListener('dblclick', event => {\r\n    //every time the mouse button goes down\r\n    \r\n    var clickHandledByMolecule = false;\r\n    \r\n    GlobalVariables.currentMolecule.nodesOnTheScreen.forEach(molecule => {\r\n        if (molecule.doubleClick(event.clientX,event.clientY) == true){\r\n            clickHandledByMolecule = true;\r\n        }\r\n    });\r\n    \r\n    if (clickHandledByMolecule == false){\r\n        showmenu(event);\r\n    }\r\n})\r\n\r\nflowCanvas.addEventListener('mouseup', event => {\r\n    //every time the mouse button goes up\r\n    GlobalVariables.currentMolecule.nodesOnTheScreen.forEach(molecule => {\r\n        molecule.clickUp(event.clientX,event.clientY);      \r\n    });\r\n})\r\n\r\nwindow.addEventListener('keydown', event => {\r\n    //every time the mouse button goes up\r\n    \r\n    GlobalVariables.currentMolecule.nodesOnTheScreen.forEach(molecule => {\r\n        molecule.keyPress(event.key);      \r\n    });\r\n})\r\n\r\n\r\n// Implementation\r\n\r\nfunction init() {\r\n    GlobalVariables.currentMolecule = new Molecule({\r\n        x: 0, \r\n        y: 0, \r\n        topLevel: true, \r\n        name: \"Maslow Create\",\r\n        atomType: \"Molecule\",\r\n        uniqueID: GlobalVariables.generateUniqueID()\r\n    });\r\n    \r\n}\r\n\r\n// Animation Loop\r\nfunction animate() {\r\n    requestAnimationFrame(animate);\r\n    GlobalVariables.c.clearRect(0, 0, GlobalVariables.canvas.width, GlobalVariables.canvas.height);\r\n    \r\n    GlobalVariables.currentMolecule.nodesOnTheScreen.forEach(molecule => {\r\n        molecule.update();\r\n    });\r\n}\r\n\r\ninit()\r\nanimate()\r\n","\r\n\r\nexport default class GitHubModule{\r\n\r\n    constructor(){\r\n        this.octokit = new Octokit();\r\n        this.popup = document.getElementById('projects-popup');\r\n        this.currentRepoName = null;\r\n        this.currentUser = null;\r\n        this.bomHeader = \"###### Note: Do not edit this file directly, it is automatically generated from the CAD model \\n# Bill Of Materials \\n |Part|Number Needed|Price|Source| \\n |----|----------|-----|-----|\";\r\n\r\n        this.intervalTimer = null;\r\n        \r\n        var button = document.getElementById(\"loginButton\");\r\n        button.addEventListener(\"mousedown\", this.tryLogin);\r\n    }\r\n\r\n    tryLogin(){\r\n        \r\n        // Initialize with your OAuth.io app public key\r\n        OAuth.initialize('BYP9iFpD7aTV9SDhnalvhZ4fwD8');\r\n        // Use popup for oauth\r\n        OAuth.popup('github').then(github => {\r\n            \r\n            this.octokit.authenticate({\r\n                type: \"oauth\",\r\n                token: github.access_token\r\n            })\r\n            \r\n            //Test the authentication \r\n            this.octokit.users.getAuthenticated({}).then(result => {\r\n                showProjectsToLoad();\r\n            })  \r\n        });\r\n    }\r\n\r\n    showProjectsToLoad(){\r\n        //Remove everything in the popup now\r\n        while (popup.firstChild) {\r\n            popup.removeChild(popup.firstChild);\r\n        }\r\n        \r\n        popup.classList.remove('off');\r\n        \r\n        //Add a title\r\n        var titleDiv = document.createElement(\"DIV\");\r\n        titleDiv.setAttribute(\"style\", \"width: 100%\");\r\n        titleDiv.setAttribute(\"style\", \"padding: 30px\");\r\n        var title = document.createElement(\"H1\");\r\n        title.appendChild(document.createTextNode(\"Projects:\"));\r\n        titleDiv.appendChild(title);\r\n        popup.appendChild(titleDiv);\r\n        popup.appendChild(document.createElement(\"br\"));\r\n        \r\n        var projectsSpaceDiv = document.createElement(\"DIV\");\r\n        projectsSpaceDiv.setAttribute(\"class\", \"float-left-div{\");\r\n        popup.appendChild(projectsSpaceDiv);\r\n        \r\n        \r\n        //Add the create a new project button\r\n        addProject(\"New Project\");\r\n        \r\n        //store the current user name for later use\r\n        this.octokit.users.getAuthenticated({}).then(result => {\r\n            currentUser = result.data.login;\r\n        });\r\n        \r\n        //List all of the repos that a user is the owner of\r\n        this.octokit.repos.list({\r\n          affiliation: 'owner',\r\n        }).then(({data, headers, status}) => {\r\n            data.forEach(repo => {\r\n                \r\n                //Check to see if this is a maslow create project\r\n                this.octokit.repos.listTopics({\r\n                    owner: repo.owner.login, \r\n                    repo: repo.name,\r\n                    headers: {\r\n                        accept: 'application/vnd.github.mercy-preview+json'\r\n                    }\r\n                }).then(data => {\r\n                    if(data.data.names.includes(\"maslowcreate\") || data.data.names.includes(\"maslowcreate-molecule\")){\r\n                        addProject(repo.name);\r\n                    }\r\n                })\r\n                \r\n            });\r\n        })\r\n        \r\n    }\r\n\r\n    addProject(projectName){\r\n        //create a project element to display\r\n        \r\n        var project = document.createElement(\"DIV\");\r\n        \r\n        var projectPicture = document.createElement(\"IMG\");\r\n        projectPicture.setAttribute(\"src\", \"testPicture.png\");\r\n        projectPicture.setAttribute(\"style\", \"width: 100%\");\r\n        projectPicture.setAttribute(\"style\", \"height: 100%\");\r\n        project.appendChild(projectPicture);\r\n        \r\n        var shortProjectName;\r\n        if(projectName.length > 9){\r\n            shortProjectName = document.createTextNode(projectName.substr(0,7)+\"..\");\r\n        }\r\n        else{\r\n            shortProjectName = document.createTextNode(projectName);\r\n        }\r\n        project.setAttribute(\"class\", \"project\");\r\n        project.setAttribute(\"id\", projectName);\r\n        project.appendChild(shortProjectName); \r\n        popup.appendChild(project); \r\n        \r\n        document.getElementById(projectName).addEventListener('click', event => {\r\n            projectClicked(projectName);\r\n        })\r\n\r\n    }\r\n\r\n    projectClicked(projectName){\r\n        //runs when you click on one of the projects\r\n        if(projectName == \"New Project\"){\r\n            createNewProjectPopup();\r\n        }\r\n        else{\r\n            loadProject(projectName);\r\n        }\r\n    }\r\n\r\n    createNewProjectPopup(){\r\n        //Clear the popup and populate the fields we will need to create the new repo\r\n        \r\n        while (popup.firstChild) {\r\n            popup.removeChild(popup.firstChild);\r\n        }\r\n        \r\n        //Project name\r\n        // <div class=\"form\">\r\n        var createNewProjectDiv = document.createElement(\"DIV\");\r\n        createNewProjectDiv.setAttribute(\"class\", \"form\");\r\n        \r\n        //Add a title\r\n        var header = document.createElement(\"H1\");\r\n        var title = document.createTextNode(\"Create a new project\");\r\n        header.appendChild(title);\r\n        createNewProjectDiv.appendChild(header);\r\n        \r\n        //Create the form object\r\n        var form = document.createElement(\"form\");\r\n        form.setAttribute(\"class\", \"login-form\");\r\n        createNewProjectDiv.appendChild(form);\r\n        \r\n        //Create the name field\r\n        var name = document.createElement(\"input\");\r\n        name.setAttribute(\"id\",\"project-name\");\r\n        name.setAttribute(\"type\",\"text\");\r\n        name.setAttribute(\"placeholder\",\"Project name\");\r\n        form.appendChild(name);\r\n        \r\n        //Add the description field\r\n        var description = document.createElement(\"input\");\r\n        description.setAttribute(\"id\", \"project-description\");\r\n        description.setAttribute(\"type\", \"text\");\r\n        description.setAttribute(\"placeholder\", \"Project description\");\r\n        form.appendChild(description);\r\n        \r\n        //Add the button\r\n        var createButton = document.createElement(\"button\");\r\n        createButton.setAttribute(\"type\", \"button\");\r\n        createButton.setAttribute(\"onclick\", \"createNewProject()\");\r\n        var buttonText = document.createTextNode(\"Create Project\");\r\n        createButton.appendChild(buttonText);\r\n        form.appendChild(createButton);\r\n        \r\n\r\n        popup.appendChild(createNewProjectDiv);\r\n\r\n    }\r\n\r\n    createNewProject(){\r\n        \r\n        if(typeof intervalTimer != undefined){\r\n            clearInterval(intervalTimer); //Turn of auto saving\r\n        }\r\n        \r\n        //Get name and description\r\n        var name = document.getElementById('project-name').value;\r\n        var description = document.getElementById('project-description').value;\r\n        \r\n        //Load a blank project\r\n        topLevelMolecule = new Molecule({\r\n            x: 0, \r\n            y: 0, \r\n            topLevel: true, \r\n            name: name,\r\n            atomType: \"Molecule\",\r\n            uniqueID: generateUniqueID()\r\n        });\r\n        \r\n        currentMolecule = topLevelMolecule;\r\n        \r\n        //Create a new repo\r\n        this.octokit.repos.createForAuthenticatedUser({\r\n            name: name,\r\n            description: description\r\n        }).then(result => {\r\n            //Once we have created the new repo we need to create a file within it to store the project in\r\n            currentRepoName = result.data.name;\r\n            var path = \"project.maslowcreate\";\r\n            var content = window.btoa(\"init\"); // create a file with just the word \"init\" in it and base64 encode it\r\n            this.octokit.repos.createFile({\r\n                owner: currentUser,\r\n                repo: currentRepoName,\r\n                path: path,\r\n                message: \"initialize repo\", \r\n                content: content\r\n            }).then(result => {\r\n                //Then create the BOM file\r\n                content = window.btoa(bomHeader); // create a file with just the header in it and base64 encode it\r\n                this.octokit.repos.createFile({\r\n                    owner: currentUser,\r\n                    repo: currentRepoName,\r\n                    path: \"BillOfMaterials.md\",\r\n                    message: \"initialize BOM\", \r\n                    content: content\r\n                }).then(result => {\r\n                    //Then create the README file\r\n                    content = window.btoa(\"readme init\"); // create a file with just the word \"init\" in it and base64 encode it\r\n                    this.octokit.repos.createFile({\r\n                        owner: currentUser,\r\n                        repo: currentRepoName,\r\n                        path: \"README.md\",\r\n                        message: \"initialize README\", \r\n                        content: content\r\n                    }).then(result => {\r\n                        console.log(\"readme created\");\r\n                        \r\n                        intervalTimer = setInterval(saveProject, 30000); //Save the project regularly\r\n                    });\r\n                });\r\n            });\r\n            \r\n            //Update the project topics\r\n            this.octokit.repos.replaceTopics({\r\n                owner: currentUser,\r\n                repo: currentRepoName,\r\n                names: [\"maslowcreate\"],\r\n                headers: {\r\n                    accept: 'application/vnd.github.mercy-preview+json'\r\n                }\r\n            })\r\n        });\r\n        \r\n        currentMolecule.backgroundClick();\r\n        \r\n        //Clear and hide the popup\r\n        while (popup.firstChild) {\r\n            popup.removeChild(popup.firstChild);\r\n        }\r\n        popup.classList.add('off');\r\n        \r\n        \r\n    }\r\n\r\n    saveProject(){\r\n        //Save the current project into the github repo\r\n        \r\n        if(currentRepoName != null){\r\n            \r\n            var path = \"project.maslowcreate\";\r\n            var content = window.btoa(JSON.stringify(topLevelMolecule.serialize(null), null, 4)); //Convert the topLevelMolecule object to a JSON string and then convert it to base64 encoding\r\n            \r\n            //Get the SHA for the file\r\n            this.octokit.repos.getContents({\r\n                owner: currentUser,\r\n                repo: currentRepoName,\r\n                path: path\r\n            }).then(thisRepo => {\r\n                var sha = thisRepo.data.sha\r\n                \r\n                //Save the repo to the file\r\n                this.octokit.repos.updateFile({\r\n                    owner: currentUser,\r\n                    repo: currentRepoName,\r\n                    path: path,\r\n                    message: \"autosave\", \r\n                    content: content,\r\n                    sha: sha\r\n                }).then(result => {\r\n                    \r\n                    console.log(\"Project Saved\");\r\n                    \r\n                    //Then update the BOM file\r\n                    \r\n                    path = \"BillOfMaterials.md\";\r\n                    content = bomHeader;\r\n                    \r\n                    topLevelMolecule.requestBOM().forEach(item => {\r\n                        content = content + \"\\n|\" + item.BOMitemName + \"|\" + item.totalNeeded + \"|\" + item.costUSD + \"|\" + item.source + \"|\";\r\n                    });\r\n                    \r\n                    content = window.btoa(content);\r\n                    \r\n                    //Get the SHA for the file\r\n                    this.octokit.repos.getContents({\r\n                        owner: currentUser,\r\n                        repo: currentRepoName,\r\n                        path: path\r\n                    }).then(result => {\r\n                        var sha = result.data.sha\r\n                        \r\n                        //Save the BOM to the file\r\n                        this.octokit.repos.updateFile({\r\n                            owner: currentUser,\r\n                            repo: currentRepoName,\r\n                            path: path,\r\n                            message: \"update Bom\", \r\n                            content: content,\r\n                            sha: sha\r\n                        }).then(result => {\r\n                            console.log(\"BOM updated\");\r\n                            \r\n                            this.octokit.repos.get({\r\n                                owner: currentUser, \r\n                                repo: currentRepoName\r\n                            }).then(result => {\r\n                                \r\n                                path = \"README.md\";\r\n                                content = \"# \" + result.data.name + \"\\n\" + result.data.description + \"\\n\";\r\n                                \r\n                                topLevelMolecule.requestReadme().forEach(item => {\r\n                                    content = content + item + \"\\n\\n\\n\"\r\n                                });\r\n                                \r\n                                content = window.btoa(content);\r\n                                \r\n                                //Get the SHA for the file\r\n                                this.octokit.repos.getContents({\r\n                                    owner: currentUser,\r\n                                    repo: currentRepoName,\r\n                                    path: path\r\n                                }).then(result => {\r\n                                    var sha = result.data.sha\r\n                                    \r\n                                    //Save the README to the file\r\n                                    this.octokit.repos.updateFile({\r\n                                        owner: currentUser,\r\n                                        repo: currentRepoName,\r\n                                        path: path,\r\n                                        message: \"update Readme\", \r\n                                        content: content,\r\n                                        sha: sha\r\n                                    }).then(result => {\r\n                                        console.log(\"README updated\");\r\n                                    });\r\n                                });\r\n                            });\r\n                        });\r\n                    });\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    loadProject(projectName){\r\n        \r\n        if(typeof intervalTimer != undefined){\r\n            clearInterval(intervalTimer); //Turn of auto saving\r\n        }\r\n        \r\n        currentRepoName = projectName;\r\n        \r\n        this.octokit.repos.getContents({\r\n            owner: currentUser,\r\n            repo: projectName,\r\n            path: 'project.maslowcreate'\r\n        }).then(result => {\r\n                \r\n            //content will be base64 encoded\r\n            let rawFile = atob(result.data.content);\r\n            \r\n            \r\n            moleculesList = JSON.parse(rawFile).molecules;\r\n            \r\n            //Load a blank project\r\n            topLevelMolecule = new Molecule({\r\n                x: 0, \r\n                y: 0, \r\n                topLevel: true, \r\n                atomType: \"Molecule\"\r\n            });\r\n            \r\n            currentMolecule = topLevelMolecule;\r\n            \r\n            //Load the top level molecule from the file\r\n            topLevelMolecule.deserialize(moleculesList, moleculesList.filter((molecule) => { return molecule.topLevel == true; })[0].uniqueID);\r\n            \r\n            currentMolecule.backgroundClick();\r\n\r\n            //Clear and hide the popup\r\n            while (popup.firstChild) {\r\n                popup.removeChild(popup.firstChild);\r\n            }\r\n            popup.classList.add('off');\r\n            \r\n            intervalTimer = setInterval(saveProject, 30000); //Save the project regularly\r\n        })\r\n        \r\n    }\r\n\r\n    exportCurrentMoleculeToGithub(molecule){\r\n        \r\n        //Get name and description\r\n        var name = molecule.name;\r\n        var description = \"A stand alone molecule exported from Maslow Create\";\r\n        \r\n        //Create a new repo\r\n        this.octokit.repos.createForAuthenticatedUser({\r\n            name: name,\r\n            description: description\r\n        }).then(result => {\r\n            //Once we have created the new repo we need to create a file within it to store the project in\r\n            var repoName = result.data.name;\r\n            var id       = result.data.id;\r\n            var path     = \"project.maslowcreate\";\r\n            var content  = window.btoa(\"init\"); // create a file with just the word \"init\" in it and base64 encode it\r\n            this.octokit.repos.createFile({\r\n                owner: currentUser,\r\n                repo: repoName,\r\n                path: path,\r\n                message: \"initialize repo\", \r\n                content: content\r\n            }).then(result => {\r\n                \r\n                //Save the molecule into the newly created repo\r\n                \r\n                var path = \"project.maslowcreate\";\r\n                \r\n                molecule.topLevel = true; //force the molecule to export in the long form as if it were the top level molecule\r\n                var content = window.btoa(JSON.stringify(molecule.serialize(null), null, 4)); //Convert the passed molecule object to a JSON string and then convert it to base64 encoding\r\n                \r\n                //Get the SHA for the file\r\n                this.octokit.repos.getContents({\r\n                    owner: currentUser,\r\n                    repo: repoName,\r\n                    path: path\r\n                }).then(result => {\r\n                    var sha = result.data.sha\r\n                    \r\n                    //Save the repo to the file\r\n                    this.octokit.repos.updateFile({\r\n                        owner: currentUser,\r\n                        repo: repoName,\r\n                        path: path,\r\n                        message: \"export Molecule\", \r\n                        content: content,\r\n                        sha: sha\r\n                    }).then(result => {\r\n                        console.log(\"Molecule Exported.\");\r\n                        \r\n                        //Replace the existing molecule now that we just exported\r\n                        molecule.replaceThisMoleculeWithGithub(id);\r\n                    })\r\n                })\r\n\r\n            });\r\n            \r\n            //Update the project topics\r\n            this.octokit.repos.replaceTopics({\r\n                owner: currentUser,\r\n                repo: repoName,\r\n                names: [\"maslowcreate-molecule\"],\r\n                headers: {\r\n                    accept: 'application/vnd.github.mercy-preview+json'\r\n                }\r\n            })\r\n            \r\n        });\r\n    }\r\n\r\n}\r\n","import Circle from './molecules/circle.js'\r\nimport Rectangle from './molecules/rectangle.js'\r\nimport ShrinkWrap from './molecules/shrinkwrap.js'\r\nimport Translate from './molecules/translate.js'\r\nimport RegularPolygon from './molecules/regularpolygon.js'\r\nimport Extrude from './molecules/extrude.js'\r\nimport Scale from './molecules/scale.js'\r\nimport Union from './molecules/union.js'\r\nimport Intersection from './molecules/intersection.js'\r\nimport Difference from './molecules/difference.js'\r\nimport Constant from './molecules/constant.js'\r\nimport Equation from './molecules/equation.js'\r\nimport Molecule from './molecules/molecule.js'\r\nimport Input from './molecules/input.js'\r\nimport Readme from './molecules/readme.js'\r\nimport Rotate from './molecules/rotate.js'\r\nimport Mirror from './molecules/mirror.js'\r\nimport GitHubMolecule from './molecules/githubmolecule.js'\r\nimport Output from './molecules/output.js'\r\n\r\nimport GitHubModule from './githubOauth'\r\n\r\nclass GlobalVariables{\r\n    constructor(){\r\n        this.canvas = null\r\n        this.c = null\r\n        \r\n        this.availableTypes = {\r\n            circle:        {creator: Circle, atomType: \"Circle\"},\r\n            rectangle:     {creator: Rectangle, atomType: \"Rectangle\"},\r\n            shirinkwrap:   {creator: ShrinkWrap, atomType: \"ShrinkWrap\"},\r\n            translate:     {creator: Translate, atomType: \"Translate\"},\r\n            regularPolygon:{creator: RegularPolygon, atomType: \"RegularPolygon\"},\r\n            extrude:       {creator: Extrude, atomType: \"Extrude\"},\r\n            scale:         {creator: Scale, atomType: \"Scale\"},\r\n            intersection:  {creator: Intersection, atomType: \"Intersection\"},\r\n            difference:    {creator: Difference, atomType: \"Difference\"},\r\n            costant:       {creator: Constant, atomType: \"Constant\"},\r\n            equation:      {creator: Equation, atomType: \"Equation\"},\r\n            molecule:      {creator: Molecule, atomType: \"Molecule\"},\r\n            input:         {creator: Input, atomType: \"Input\"},\r\n            readme:        {creator: Readme, atomType: \"Readme\"},\r\n            rotate:        {creator: Rotate, atomType: \"Rotate\"},\r\n            mirror:        {creator: Mirror, atomType: \"Mirror\"},\r\n            githubmolecule:{creator: GitHubMolecule, atomType: \"GitHubMolecule\"},\r\n            union:         {creator: Union, atomType: \"Union\"}\r\n        }\r\n\r\n        this.secretTypes = {\r\n            output:        {creator: Output, atomType: \"Output\"}\r\n        }\r\n\r\n\r\n        this.currentMolecule;\r\n        this.topLevelMolecule;\r\n        \r\n        this.sideBar = document.querySelector('.sideBar');\r\n        \r\n        this.gitHub = new GitHubModule;\r\n    }\r\n    \r\n    generateUniqueID(){\r\n        return Math.floor(Math.random()*900000) + 100000;\r\n    }\r\n\r\n    distBetweenPoints(x1, x2, y1, y2){\r\n        var a2 = Math.pow(x1 - x2, 2);\r\n        var b2 = Math.pow(y1 - y2, 2);\r\n        var dist = Math.sqrt(a2 + b2);\r\n        \r\n        return dist;\r\n    }\r\n}\r\n\r\nexport default (new GlobalVariables);","import GlobalVariables from './globalvariables'\r\n\r\nexport default class Menu {\r\n    constructor(){\r\n        this.menu = document.querySelector('.menu');\r\n        this.menu.classList.add('off');\r\n        this.menuList = document.getElementById(\"menuList\");\r\n    \r\n        //Add the search bar to the list item\r\n    \r\n        for(var key in GlobalVariables.availableTypes) {\r\n            var newElement = document.createElement(\"LI\");\r\n            var instance = GlobalVariables.availableTypes[key];\r\n            var text = document.createTextNode(instance.atomType);\r\n            newElement.setAttribute(\"class\", \"menu-item\");\r\n            newElement.setAttribute(\"id\", instance.atomType);\r\n            newElement.appendChild(text); \r\n            menuList.appendChild(newElement); \r\n            \r\n            document.getElementById(instance.atomType).addEventListener('click', placeNewNode);\r\n        }\r\n    }\r\n    \r\n    placeNewNode(ev){\r\n        hidemenu();\r\n        let clr = ev.target.id;\r\n        \r\n        currentMolecule.placeAtom({\r\n            x: menu.x, \r\n            y: menu.y, \r\n            parent: currentMolecule,\r\n            atomType: clr,\r\n            uniqueID: generateUniqueID()\r\n        }, null, availableTypes); //null indicates that there is nothing to load from the molecule list for this one\r\n    }\r\n\r\n    placeGitHubMolecule(ev){\r\n        hidemenu();\r\n        let clr = ev.target.id;\r\n        \r\n        currentMolecule.placeAtom({\r\n            x: menu.x, \r\n            y: menu.y, \r\n            parent: currentMolecule,\r\n            atomType: \"GitHubMolecule\",\r\n            projectID: clr,\r\n            uniqueID: generateUniqueID()\r\n        }, null, availableTypes); //null indicates that there is nothing to load from the molecule list for this one\r\n    }\r\n\r\n    showmenu(ev){\r\n        //Open the default tab\r\n        document.getElementById(\"localTab\").click();\r\n        \r\n        //stop the real right click menu\r\n        ev.preventDefault(); \r\n        \r\n        //make sure all elements are unhidden\r\n        ul = document.getElementById(\"menuList\");\r\n        li = ul.getElementsByTagName('li');\r\n        for (i = 0; i < li.length; i++) {\r\n            li[i].style.display = \"none\"; //set each item to not display\r\n        }\r\n        \r\n        //show the menu\r\n        menu.style.top = `${ev.clientY - 20}px`;\r\n        menu.style.left = `${ev.clientX - 20}px`;\r\n        menu.x = ev.clientX;\r\n        menu.y = ev.clientY;\r\n        menu.classList.remove('off');\r\n        \r\n        document.getElementById('menuInput').focus();\r\n    }\r\n\r\n    hidemenu(ev){\r\n        menu.classList.add('off');\r\n        menu.style.top = '-200%';\r\n        menu.style.left = '-200%';\r\n    }\r\n\r\n    searchMenu(evt) {\r\n      \r\n        if(document.getElementsByClassName(\"tablinks active\")[0].id == \"localTab\"){\r\n            //We are searching the local tab\r\n            // Declare variables\r\n            var input, filter, ul, li, a, i, txtValue;\r\n            input = document.getElementById('menuInput');\r\n            filter = input.value.toUpperCase();\r\n            ul = document.getElementById(\"menuList\");\r\n            li = ul.getElementsByTagName('li');\r\n\r\n            // Loop through all list items, and hide those who don't match the search query\r\n            for (i = 0; i < li.length; i++) {\r\n                a = li[i]; //this is the link part of the list item\r\n                txtValue = a.textContent || a.innerText;\r\n                if (txtValue.toUpperCase().indexOf(filter) > -1) { //if the entered string matches\r\n                    li[i].style.display = \"\";\r\n                } else {\r\n                    li[i].style.display = \"none\";\r\n                }\r\n                \r\n                //If enter was just pressed \"click\" the first element that is being displayed\r\n                if(evt.code == \"Enter\" && li[i].style.display != \"none\"){\r\n                    li[i].click();\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        else{\r\n            //We are searching on github\r\n            if(evt.code == \"Enter\"){\r\n                input = document.getElementById('menuInput').value;\r\n                \r\n                githubList = document.getElementById(\"githubList\");\r\n                \r\n                oldResults = document.getElementsByClassName(\"menu-item\");\r\n                for (i = 0; i < oldResults.length; i++) {\r\n                    oldResults[i].style.display = \"none\";\r\n                }\r\n                \r\n                octokit.search.repos({\r\n                    q: input,\r\n                    sort: \"stars\",\r\n                    per_page: 100,\r\n                    topic: \"maslowcreate-molecule\",\r\n                    page: 1,\r\n                    headers: {\r\n                        accept: 'application/vnd.github.mercy-preview+json'\r\n                    }\r\n                }).then(result => {\r\n                    result.data.items.forEach(item => {\r\n                        if(item.topics.includes(\"maslowcreate-molecule\")){\r\n                        \r\n                            var newElement = document.createElement(\"LI\");\r\n                            var text = document.createTextNode(item.name);\r\n                            newElement.setAttribute(\"class\", \"menu-item\");\r\n                            newElement.setAttribute(\"id\", item.id);\r\n                            newElement.appendChild(text); \r\n                            githubList.appendChild(newElement); \r\n                            \r\n                            document.getElementById(item.id).addEventListener('click', placeGitHubMolecule);\r\n                        }\r\n                    });\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    openTab(evt, tabName) {\r\n      // Declare all variables\r\n      var i, tabcontent, tablinks;\r\n\r\n      // Get all elements with class=\"tabcontent\" and hide them\r\n      tabcontent = document.getElementsByClassName(\"tabcontent\");\r\n      for (i = 0; i < tabcontent.length; i++) {\r\n        tabcontent[i].style.display = \"none\";\r\n      }\r\n\r\n      // Get all elements with class=\"tablinks\" and remove the class \"active\"\r\n      tablinks = document.getElementsByClassName(\"tablinks\");\r\n      for (i = 0; i < tablinks.length; i++) {\r\n        tablinks[i].className = tablinks[i].className.replace(\" active\", \"\");\r\n      }\r\n\r\n      // Show the current tab, and add an \"active\" class to the button that opened the tab\r\n      document.getElementById(tabName).style.display = \"block\";\r\n      evt.currentTarget.className += \" active\";\r\n    }\r\n}","import Atom from '../prototypes/atom'\r\n\r\nexport default class Circle extends Atom {\r\n    \r\n    constructor(values){\r\n        \r\n        super(values);\r\n        \r\n        this.name = \"Circle\";\r\n        this.atomType = \"Circle\";\r\n        this.defaultCodeBlock = \"circle({r: ~radius~, center: true, fn: 25})\";\r\n        this.codeBlock = \"\";\r\n        \r\n        this.addIO(\"input\", \"radius\", this, \"number\", 10);\r\n        this.addIO(\"input\", \"max segment size\", this, \"number\", 4);\r\n        this.addIO(\"output\", \"geometry\", this, \"geometry\", \"\");\r\n        \r\n        this.setValues(values);\r\n        \r\n        //generate the correct codeblock for this atom on creation\r\n        this.updateCodeBlock();\r\n    }\r\n    \r\n    updateCodeBlock(){\r\n        //Overwrite the normal update code block to update the number of segments also\r\n        \r\n        var maximumSegmentSize = this.findIOValue(\"max segment size\");\r\n        var circumference  = 3.14*2*this.findIOValue(\"radius\");\r\n        \r\n        var numberOfSegments = parseInt( circumference / maximumSegmentSize );\r\n        \r\n        var regex = /fn: (\\d+)\\}/gi;\r\n        this.defaultCodeBlock = this.defaultCodeBlock.replace(regex, \"fn: \" + numberOfSegments + \"}\");\r\n        \r\n        super.updateCodeBlock();\r\n    }\r\n}","import Atom from '../prototypes/atom'\r\nimport GlobalVariables from '../globalvariables'\r\n\r\nexport default class Constant extends Atom{\r\n    \r\n    constructor(values){\r\n        super(values);\r\n        \r\n        this.codeBlock = \"\";\r\n        this.type = \"constant\";\r\n        this.name = \"Constant\";\r\n        this.atomType = \"Constant\";\r\n        this.height = 16;\r\n        this.radius = 15;\r\n        \r\n        this.setValues(values);\r\n        \r\n        this.addIO(\"output\", \"number\", this, \"number\", 10);\r\n        \r\n        if (typeof this.ioValues !== 'undefined') {\r\n            this.ioValues.forEach(ioValue => { //for each saved value\r\n                this.children.forEach(io => {  //Find the matching IO and set it to be the saved value\r\n                    if(ioValue.name == io.name){\r\n                        io.setValue(ioValue.ioValue);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n    \r\n    updateSidebar(){\r\n        //updates the sidebar to display information about this node\r\n        \r\n        var valueList = super.updateSidebar(); //call the super function\r\n        \r\n        var output = this.children[0];\r\n        \r\n        this.createEditableValueListItem(valueList,output,\"value\", \"Value\", true);\r\n        this.createEditableValueListItem(valueList,this,\"name\", \"Name\", false);\r\n        \r\n    }\r\n    \r\n    setValue(newName){\r\n        //Called by the sidebar to set the name\r\n        this.name = newName;\r\n    }\r\n    \r\n    serialize(values){\r\n        //Save the IO value to the serial stream\r\n        var valuesObj = super.serialize(values);\r\n        \r\n        valuesObj.ioValues = [{\r\n            name: \"number\",\r\n            ioValue: this.children[0].getValue()\r\n        }];\r\n        \r\n        return valuesObj;\r\n        \r\n    }\r\n    \r\n    draw() {\r\n        \r\n        this.children.forEach(child => {\r\n            child.draw();       \r\n        });\r\n        \r\n        GlobalVariables.c.beginPath();\r\n        GlobalVariables.c.fillStyle = this.color;\r\n        GlobalVariables.c.rect(this.x - this.radius, this.y - this.height/2, 2*this.radius, this.height);\r\n        GlobalVariables.c.textAlign = \"start\"; \r\n        GlobalVariables.c.fillText(this.name, this.x + this.radius, this.y-this.radius);\r\n        GlobalVariables.c.fill();\r\n        GlobalVariables.c.closePath();\r\n    }\r\n}\r\n","import Atom from '../prototypes/atom'\r\n\r\nexport default class Difference extends Atom{\r\n    \r\n    constructor (values){\r\n        \r\n        super(values);\r\n        \r\n        this.addIO(\"input\", \"geometry1\", this, \"geometry\", \"\");\r\n        this.addIO(\"input\", \"geometry2\", this, \"geometry\", \"\");\r\n        this.addIO(\"output\", \"geometry\", this, \"geometry\", \"\");\r\n        \r\n        this.name = \"Difference\";\r\n        this.atomType = \"Difference\";\r\n        this.defaultCodeBlock = \"difference(~geometry1~,~geometry2~)\";\r\n        this.codeBlock = \"\";\r\n        \r\n        this.setValues(values);\r\n    }\r\n}","import Atom from '../prototypes/atom'\r\n\r\nexport default class Equation extends Atom {\r\n    \r\n    constructor(values){\r\n        super(values);\r\n        \r\n        this.addIO(\"input\", \"x\", this, \"number\", 0);\r\n        this.addIO(\"input\", \"y\", this, \"number\", 0);\r\n        this.addIO(\"output\", \"z\", this, \"number\", 0);\r\n        \r\n        this.name = \"Equation\";\r\n        this.atomType = \"Equation\";\r\n        this.defaultCodeBlock = \"\";\r\n        this.codeBlock = \"\";\r\n        this.equationOptions = [\"x+y\", \"x-y\", \"x*y\", \"x/y\", \"cos(x)\", \"sin(x)\", \"x^y\"];\r\n        this.currentEquation = 0;\r\n        \r\n        this.setValues(values);\r\n        \r\n    }\r\n    \r\n    serialize(savedObject){\r\n        var superSerialObject = super.serialize(null);\r\n        \r\n        //Write the current equation to the serialized object\r\n        superSerialObject.currentEquation = this.currentEquation;\r\n        \r\n        return superSerialObject;\r\n    }\r\n    \r\n    updateCodeBlock(){\r\n        //A super classed version of the update codeblock default function which computes the equation values\r\n        var x = this.findIOValue(\"x\");\r\n        var y = this.findIOValue(\"y\");\r\n        \r\n        var z;\r\n        switch(this.currentEquation){\r\n            case 0:\r\n                z = x+y;\r\n                break;\r\n            case 1:\r\n                z = x-y;\r\n                break;\r\n            case 2:\r\n                z = x*y;\r\n                break;\r\n            case 3:\r\n                z = x/y;\r\n                break;\r\n            case 4:\r\n                z = Math.cos(x);\r\n                break;\r\n            case 5:\r\n                z = Math.sin(x);\r\n                break;\r\n            case 6:\r\n                z = Math.pow(x,y);\r\n                break;\r\n            default:\r\n                console.log(\"no options found\");\r\n                console.log(this.currentEquation);\r\n        }\r\n        \r\n        //Set the output to be the generated value\r\n        this.children.forEach(child => {\r\n            if(child.type == 'output'){\r\n                child.setValue(z);\r\n            }\r\n        });\r\n    }\r\n    \r\n    changeEquation(newValue){\r\n        this.currentEquation = parseInt(newValue);\r\n        this.updateCodeBlock();\r\n    }\r\n    \r\n    updateSidebar(){\r\n        //Update the side bar to make it possible to change the molecule name\r\n        \r\n        var valueList = super.updateSidebar();\r\n        \r\n        this.createDropDown(valueList, this, this.equationOptions, this.currentEquation, \"z = \");\r\n        \r\n    } \r\n}","import Atom from '../prototypes/atom'\r\n\r\nexport default class Extrude extends Atom{\r\n    \r\n    constructor(values){\r\n        \r\n        super(values);\r\n        \r\n        this.name = \"Extrude\";\r\n        this.atomType = \"Extrude\";\r\n        this.defaultCodeBlock = \"linear_extrude({ height: ~height~ }, ~geometry~)\";\r\n        this.codeBlock = \"\";\r\n        \r\n        this.addIO(\"input\", \"geometry\" , this, \"geometry\", \"\");\r\n        this.addIO(\"input\", \"height\"   , this, \"number\", 10);\r\n        this.addIO(\"output\", \"geometry\", this, \"geometry\", \"\");\r\n        \r\n        this.setValues(values);\r\n    }\r\n}","import Molecule from '../molecules/molecule'\r\n\r\nexport default class GitHubMolecule extends Molecule {\r\n    \r\n    constructor(values){\r\n        super(values);\r\n        \r\n        \r\n        this.name = \"Github Molecule\";\r\n        this.atomType = \"GitHubMolecule\";\r\n        this.topLevel = false; //a flag to signal if this node is the top level node\r\n        this.centerColor = \"black\";\r\n        this.projectID = 174292302;\r\n        \r\n        this.setValues(values);\r\n        \r\n        this.loadProjectByID(this.projectID);\r\n        \r\n    }\r\n    \r\n    doubleClick(x,y){\r\n        //Prevent you from being able to double click into a github molecule\r\n        \r\n        var clickProcessed = false;\r\n        \r\n        var distFromClick = distBetweenPoints(x, this.x, y, this.y);\r\n        \r\n        if (distFromClick < this.radius){\r\n            clickProcessed = true;\r\n        }\r\n        \r\n        return clickProcessed; \r\n    }\r\n    \r\n    loadProjectByID(id){\r\n    //Get the repo by ID\r\n        octokit.request('GET /repositories/:id', {id}).then(result => {\r\n            \r\n            //Find out the owners info;\r\n            \r\n            var user     = result.data.owner.login;\r\n            var repoName = result.data.name;\r\n            \r\n            //Get the file contents\r\n            \r\n            octokit.repos.getContents({\r\n                owner: user,\r\n                repo: repoName,\r\n                path: 'project.maslowcreate'\r\n            }).then(result => {\r\n                    \r\n                //content will be base64 encoded\r\n                let rawFile = atob(result.data.content);\r\n                let moleculesList =  JSON.parse(rawFile).molecules;\r\n                \r\n                this.deserialize(moleculesList, moleculesList.filter((molecule) => { return molecule.topLevel == true; })[0].uniqueID);\r\n                \r\n                this.topLevel = false;\r\n                \r\n                //Try to re-establish the connectors in the parent molecule to get the ones that were missed before when this molecule had not yet been fully loaded\r\n                this.parent.savedConnectors.forEach(connector => {\r\n                    this.parent.placeConnector(JSON.parse(connector));\r\n                });\r\n            });\r\n        });\r\n    }\r\n    \r\n    serialize(savedObject){\r\n        \r\n        //Return a placeholder for this molecule\r\n        var object = {\r\n            atomType: this.atomType,\r\n            name: this.name,\r\n            x: this.x,\r\n            y: this.y,\r\n            uniqueID: this.uniqueID,\r\n            projectID: this.projectID\r\n        }\r\n        \r\n        return object;\r\n    }\r\n    \r\n    updateSidebar(){\r\n        //updates the sidebar to display information about this node\r\n        \r\n        //remove everything in the sideBar now\r\n        while (sideBar.firstChild) {\r\n            sideBar.removeChild(sideBar.firstChild);\r\n        }\r\n        \r\n        //add the name as a title\r\n        var name = document.createElement('h1');\r\n        name.textContent = this.name;\r\n        name.setAttribute(\"style\",\"text-align:center;\");\r\n        sideBar.appendChild(name);\r\n    }\r\n}","import Atom from '../prototypes/atom'\r\nimport GlobalVariables from '../globalvariables'\r\n\r\nexport default class Input extends Atom {\r\n    \r\n    constructor(values){\r\n        super (values);\r\n        \r\n        this.name = \"Input\" + generateUniqueID();\r\n        this.codeBlock = \"\";\r\n        this.type = \"input\";\r\n        this.atomType = \"Input\";\r\n        this.height = 16;\r\n        this.radius = 15;\r\n        \r\n        this.setValues(values);\r\n        \r\n        this.addIO(\"output\", \"number or geometry\", this, \"geometry\", \"\");\r\n        \r\n        //Add a new input to the current molecule\r\n        if (typeof this.parent !== 'undefined') {\r\n            this.parent.addIO(\"input\", this.name, this.parent, \"geometry\", \"\");\r\n        }\r\n    }\r\n    \r\n    updateSidebar(){\r\n        //updates the sidebar to display information about this node\r\n        \r\n        var valueList =  super.updateSidebar(); //call the super function\r\n        \r\n        this.createEditableValueListItem(valueList,this,\"name\", \"Name\", false);\r\n        \r\n    }\r\n    \r\n    draw() {\r\n        \r\n        this.children.forEach(child => {\r\n            child.draw();       \r\n        });\r\n        \r\n        \r\n        GlobalVariables.c.fillStyle = this.color;\r\n        \r\n        GlobalVariables.c.textAlign = \"start\"; \r\n        GlobalVariables.c.fillText(this.name, this.x + this.radius, this.y-this.radius);\r\n\r\n        \r\n        GlobalVariables.c.beginPath();\r\n        GlobalVariables.c.moveTo(this.x - this.radius, this.y - this.height/2);\r\n        GlobalVariables.c.lineTo(this.x - this.radius + 10, this.y);\r\n        GlobalVariables.c.lineTo(this.x - this.radius, this.y + this.height/2);\r\n        GlobalVariables.c.lineTo(this.x + this.radius, this.y + this.height/2);\r\n        GlobalVariables.c.lineTo(this.x + this.radius, this.y - this.height/2);\r\n        GlobalVariables.c.fill();\r\n        GlobalVariables.c.closePath();\r\n\r\n    }\r\n    \r\n    deleteNode() {\r\n        \r\n        //Remove this input from the parent molecule\r\n        if (typeof this.parent !== 'undefined') {\r\n            this.parent.removeIO(\"input\", this.name, this.parent);\r\n        }\r\n        \r\n        super.deleteNode();\r\n    }\r\n    \r\n    setValue(theNewName){\r\n        //Called by the sidebar to set the name\r\n        \r\n        //Run through the parent molecule and find the input with the same name\r\n        this.parent.children.forEach(child => {\r\n            if (child.name == this.name){\r\n                this.name = theNewName;\r\n                child.name = theNewName;\r\n            }\r\n        });\r\n    }\r\n    \r\n    setOutput(newOutput){\r\n        //Set the input's output\r\n        \r\n        this.codeBlock = newOutput;  //Set the code block so that clicking on the input previews what it is \r\n        \r\n        //Set the output nodes with type 'geometry' to be the new value\r\n        this.children.forEach(child => {\r\n            if(child.valueType == 'geometry' && child.type == 'output'){\r\n                child.setValue(newOutput);\r\n            }\r\n        });\r\n    } \r\n    \r\n    updateCodeBlock(){\r\n        //This empty function handles any calls to the normal update code block function which breaks things here\r\n    }\r\n}\r\n","import Atom from '../prototypes/atom'\r\n\r\nexport default class Intersection extends Atom {\r\n    \r\n    constructor(values){\r\n        \r\n        super(values);\r\n        \r\n        this.addIO(\"input\", \"geometry1\", this, \"geometry\", \"\");\r\n        this.addIO(\"input\", \"geometry2\", this, \"geometry\", \"\");\r\n        this.addIO(\"output\", \"geometry\", this, \"geometry\", \"\");\r\n        \r\n        this.name = \"Intersection\";\r\n        this.atomType = \"Intersection\";\r\n        this.defaultCodeBlock = \"intersection(~geometry1~,~geometry2~)\";\r\n        this.codeBlock = \"\";\r\n        \r\n        this.setValues(values);\r\n    }\r\n}","import Atom from '../prototypes/atom'\r\n\r\nexport default class Mirror extends Atom {\r\n    \r\n    constructor(values){\r\n        \r\n        super(values);\r\n        \r\n        this.addIO(\"input\", \"geometry\", this, \"geometry\", \"\");\r\n        this.addIO(\"input\", \"x\", this, \"number\", 1);\r\n        this.addIO(\"input\", \"y\", this, \"number\", 1);\r\n        this.addIO(\"input\", \"z\", this, \"number\", 0);\r\n        this.addIO(\"output\", \"geometry\", this, \"geometry\", \"\");\r\n        \r\n        this.name = \"Mirror\";\r\n        this.atomType = \"Mirror\";\r\n        this.defaultCodeBlock = \"mirror([~x~,~y~,~z~], ~geometry~)\";\r\n        this.codeBlock = \"\";\r\n        \r\n        this.setValues(values);\r\n    }\r\n}","import Atom from '../prototypes/atom'\r\nimport GlobalVariables from '../globalvariables'\r\n\r\nexport default class Molecule extends Atom{\r\n\r\n    constructor(values){\r\n        \r\n        super(values);\r\n        \r\n        this.nodesOnTheScreen = [];\r\n        this.children = [];\r\n        this.name = \"Molecule\";\r\n        this.atomType = \"Molecule\";\r\n        this.centerColor = \"#949294\";\r\n        this.topLevel = false; //a flag to signal if this node is the top level node\r\n        \r\n        this.setValues(values);\r\n        \r\n        //Add the molecule's output\r\n        this.placeAtom({\r\n            parentMolecule: this, \r\n            x: GlobalVariables.canvas.width - 50,\r\n            y: GlobalVariables.canvas.height/2,\r\n            parent: this,\r\n            name: \"Output\",\r\n            atomType: \"Output\"\r\n        }, null, GlobalVariables.secretTypes);\r\n        \r\n        this.updateCodeBlock();\r\n    }\r\n    \r\n    draw(){\r\n        super.draw(); //Super call to draw the rest\r\n        \r\n        //draw the circle in the middle\r\n        c.beginPath();\r\n        c.fillStyle = this.centerColor;\r\n        c.arc(this.x, this.y, this.radius/2, 0, Math.PI * 2, false);\r\n        c.closePath();\r\n        c.fill();\r\n        \r\n    }\r\n    \r\n    doubleClick(x,y){\r\n        //returns true if something was done with the click\r\n        \r\n        \r\n        var clickProcessed = false;\r\n        \r\n        var distFromClick = distBetweenPoints(x, this.x, y, this.y);\r\n        \r\n        if (distFromClick < this.radius){\r\n            GlobalVariables.currentMolecule = this; //set this to be the currently displayed molecule\r\n            clickProcessed = true;\r\n        }\r\n        \r\n        return clickProcessed; \r\n    }\r\n    \r\n    backgroundClick(){\r\n        \r\n        this.updateSidebar();\r\n        \r\n        //var toRender = \"function main () {\\n    return molecule\" + this.uniqueID + \".code()\\n}\\n\\n\" + this.serialize()\r\n        \r\n        //window.loadDesign(toRender,\"MaslowCreate\");\r\n    }\r\n    \r\n    updateCodeBlock(){\r\n        //Grab the code from the output object\r\n        \r\n        //Grab values from the inputs and push them out to the input objects\r\n        this.children.forEach(child => {\r\n            if(child.valueType == 'geometry' && child.type == 'input'){\r\n                this.nodesOnTheScreen.forEach(atom => {\r\n                    if(atom.atomType == \"Input\" && child.name == atom.name){\r\n                        atom.setOutput(child.getValue());\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        \r\n        //Grab the value from the Molecule's output and set it to be the molecule's code block so that clicking on the molecule will display what it is outputting\r\n        this.nodesOnTheScreen.forEach(atom => {\r\n            if(atom.atomType == 'Output'){\r\n                this.codeBlock = atom.codeBlock;\r\n            }\r\n        });\r\n        \r\n        //Set the output nodes with type 'geometry' to be the generated code\r\n        this.children.forEach(child => {\r\n            if(child.valueType == 'geometry' && child.type == 'output'){\r\n                child.setValue(this.codeBlock);\r\n            }\r\n        });\r\n        \r\n        //If this molecule is selected, send the updated value to the renderer\r\n        if (this.selected){\r\n            this.sendToRender();\r\n        }\r\n    }\r\n    \r\n    updateSidebar(){\r\n        //Update the side bar to make it possible to change the molecule name\r\n        \r\n        var valueList = super.updateSidebar(); //call the super function\r\n        \r\n        this.createEditableValueListItem(valueList,this,\"name\", \"Name\", false);\r\n        \r\n        if(!this.topLevel){\r\n            this.createButton(valueList,this,\"Go To Parent\",this.goToParentMolecule);\r\n            \r\n            this.createButton(valueList,this,\"Export To GitHub\", this.exportToGithub)\r\n        }\r\n        else{\r\n            this.createButton(valueList,this,\"Load A Different Project\",showProjectsToLoad)\r\n        }\r\n        \r\n        this.createBOM(valueList,this,this.BOMlist);\r\n        \r\n        return valueList;\r\n        \r\n    }\r\n    \r\n    goToParentMolecule(self){\r\n        //Go to the parent molecule if there is one\r\n        \r\n        GlobalVariables.currentMolecule.updateCodeBlock();\r\n        \r\n        if(!GlobalVariables.currentMolecule.topLevel){\r\n            GlobalVariables.currentMolecule = GlobalVariables.currentMolecule.parent; //set parent this to be the currently displayed molecule\r\n        }\r\n    }\r\n    \r\n    exportToGithub(self){\r\n        //Export this molecule to github\r\n        exportCurrentMoleculeToGithub(self);\r\n    }\r\n    \r\n    replaceThisMoleculeWithGithub(githubID){\r\n        console.log(githubID);\r\n        \r\n        //If we are currently inside the molecule targeted for replacement, go up one\r\n        if (GlobalVariables.currentMolecule.uniqueID == this.uniqueID){\r\n            GlobalVariables.currentMolecule = this.parent;\r\n        }\r\n        \r\n        //Create a new github molecule in the same spot\r\n        GlobalVariables.currentMolecule.placeAtom({\r\n            x: this.x, \r\n            y: this.y, \r\n            parent: GlobalVariables.currentMolecule,\r\n            name: this.name,\r\n            atomType: \"GitHubMolecule\",\r\n            projectID: githubID,\r\n            uniqueID: generateUniqueID()\r\n        }, null, availableTypes);\r\n        \r\n        \r\n        //Then delete the old molecule which has been replaced\r\n        this.deleteNode();\r\n\r\n    }\r\n    \r\n    requestBOM(){\r\n        var generatedBOM = super.requestBOM();\r\n        this.nodesOnTheScreen.forEach(molecule => {\r\n            generatedBOM = generatedBOM.concat(molecule.requestBOM());\r\n        });\r\n        return generatedBOM;\r\n    }\r\n    \r\n    requestReadme(){\r\n        var generatedReadme = super.requestReadme();\r\n        generatedReadme.push(\"## \" + this.name);\r\n        \r\n        var sortableAtomsList = this.nodesOnTheScreen;\r\n        sortableAtomsList.sort(function(a, b){return distBetweenPoints(a.x, 0, a.y, 0)-distBetweenPoints(b.x, 0, b.y, 0)});\r\n        \r\n        sortableAtomsList.forEach(molecule => {\r\n            generatedReadme = generatedReadme.concat(molecule.requestReadme());\r\n        });\r\n        return generatedReadme;\r\n    }\r\n    \r\n    serialize(savedObject){\r\n        //Save this molecule.\r\n        \r\n        //This one is a little confusing. Basically each molecule saves like an atom, but also creates a second object \r\n        //record of itself in the object \"savedObject\" object. If this is the topLevel molecule we need to create the \r\n        //savedObject object here to pass to lower levels.\r\n        \r\n        if(this.topLevel == true){\r\n            //Create a new blank project to save to\r\n            savedObject = {molecules: []}\r\n        }\r\n            \r\n        var allElementsCode = new Array();\r\n        var allAtoms = [];\r\n        var allConnectors = [];\r\n        \r\n        \r\n        this.nodesOnTheScreen.forEach(atom => {\r\n            if (atom.codeBlock != \"\"){\r\n                allElementsCode.push(atom.codeBlock);\r\n            }\r\n            \r\n            allAtoms.push(JSON.stringify(atom.serialize(savedObject)));\r\n            \r\n            atom.children.forEach(attachmentPoint => {\r\n                if(attachmentPoint.type == \"output\"){\r\n                    attachmentPoint.connectors.forEach(connector => {\r\n                        allConnectors.push(connector.serialize());\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        \r\n        var thisAsObject = {\r\n            atomType: this.atomType,\r\n            name: this.name,\r\n            uniqueID: this.uniqueID,\r\n            topLevel: this.topLevel,\r\n            BOMlist: this.BOMlist,\r\n            allAtoms: allAtoms,\r\n            allConnectors: allConnectors\r\n        }\r\n        \r\n        //Add an object record of this object\r\n        \r\n        savedObject.molecules.push(thisAsObject);\r\n            \r\n        if(this.topLevel == true){\r\n            //If this is the top level, return the generated object\r\n            return savedObject;\r\n        }\r\n        else{\r\n            //If not, return just a placeholder for this molecule\r\n            var object = {\r\n                atomType: this.atomType,\r\n                name: this.name,\r\n                x: this.x,\r\n                y: this.y,\r\n                uniqueID: this.uniqueID,\r\n                BOMlist: this.BOMlist\r\n            }\r\n            \r\n            return object;\r\n        }\r\n    }\r\n        \r\n    deserialize(moleculeList, moleculeID){\r\n        \r\n        //Find the target molecule in the list\r\n        var moleculeObject = moleculeList.filter((molecule) => { return molecule.uniqueID == moleculeID;})[0];\r\n        \r\n        //Grab the name and ID\r\n        this.uniqueID  = moleculeObject.uniqueID;\r\n        this.name      = moleculeObject.name;\r\n        this.topLevel  = moleculeObject.topLevel;\r\n        this.BOMlist   = moleculeObject.BOMlist;\r\n        \r\n        //Place the atoms\r\n        moleculeObject.allAtoms.forEach(atom => {\r\n            this.placeAtom(JSON.parse(atom), moleculeList, availableTypes);\r\n        });\r\n        \r\n        //reload the molecule object to prevent persistence issues\r\n        moleculeObject = moleculeList.filter((molecule) => { return molecule.uniqueID == moleculeID;})[0];\r\n        \r\n        //Place the connectors\r\n        this.savedConnectors = moleculeObject.allConnectors; //Save a copy of the connectors so we can use them later if we want\r\n        this.savedConnectors.forEach(connector => {\r\n            this.placeConnector(JSON.parse(connector));\r\n        });\r\n        \r\n        this.updateCodeBlock();\r\n    }\r\n    \r\n    placeAtom(newAtomObj, moleculeList, typesList){\r\n        //Place the atom - note that types not listed in availableTypes will not be placed with no warning (ie go up one level)\r\n        \r\n        for(var key in typesList) {\r\n            if (typesList[key].atomType == newAtomObj.atomType){\r\n                newAtomObj.parent = this;\r\n                var atom = new typesList[key].creator(newAtomObj);\r\n                \r\n                //reassign the name of the Inputs to preserve linking\r\n                if(atom.atomType == \"Input\" && typeof newAtomObj.name !== 'undefined'){\r\n                    atom.setValue(newAtomObj.name);\r\n                }\r\n\r\n                //If this is a molecule, deserialize it\r\n                if(atom.atomType == \"Molecule\" && moleculeList != null){\r\n                    atom.deserialize(moleculeList, atom.uniqueID);\r\n                }\r\n                \r\n                this.nodesOnTheScreen.push(atom);\r\n            }\r\n        }\r\n        \r\n        if(newAtomObj.atomType == \"Output\"){\r\n            //re-asign output ID numbers if a new one is supposed to be placed\r\n            this.nodesOnTheScreen.forEach(atom => {\r\n                if(atom.atomType == \"Output\"){\r\n                    atom.setID(newAtomObj.uniqueID);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    \r\n    placeConnector(connectorObj){\r\n        var connector;\r\n        var cp1NotFound = true;\r\n        var cp2NotFound = true;\r\n        var ap2;\r\n        \r\n        this.nodesOnTheScreen.forEach(atom => {\r\n            //Find the output node\r\n            \r\n            if (atom.uniqueID == connectorObj.ap1ID){\r\n                atom.children.forEach(child => {\r\n                    if(child.name == connectorObj.ap1Name && child.type == \"output\"){\r\n                        connector = new Connector({\r\n                            atomType: \"Connector\",\r\n                            attachmentPoint1: child,\r\n                            parentMolecule:  atom\r\n                        });\r\n                        cp1NotFound = false;\r\n                    }\r\n                });\r\n            }\r\n            //Find the input node\r\n            if (atom.uniqueID == connectorObj.ap2ID){\r\n                atom.children.forEach(child => {\r\n                    if(child.name == connectorObj.ap2Name && child.type == \"input\" && child.connectors.length == 0){\r\n                        cp2NotFound = false;\r\n                        ap2 = child;\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        \r\n        if(cp1NotFound || cp2NotFound){\r\n            console.log(\"Unable to create connector\");\r\n            return;\r\n        }\r\n        \r\n        connector.attachmentPoint2 = ap2;\r\n        \r\n        //Store the connector\r\n        connector.attachmentPoint1.connectors.push(connector);\r\n        connector.attachmentPoint2.connectors.push(connector);\r\n        \r\n        //Update the connection\r\n        connector.propogate();\r\n    }\r\n}\r\n\r\n","import Atom from '../prototypes/atom'\r\nimport GlobalVariables from '../globalvariables'\r\n\r\n\r\nexport default class Output extends Atom {\r\n    \r\n    constructor(values){\r\n        super (values)\r\n        \r\n        //Add a new output to the current molecule\r\n        if (typeof this.parent !== 'undefined') {\r\n            this.parent.addIO(\"output\", \"Geometry\", this.parent, \"geometry\", \"\");\r\n        }\r\n        \r\n        this.defaultCodeBlock = \"~number or geometry~\";\r\n        this.codeBlock = \"\";\r\n        this.type = \"output\";\r\n        this.name = \"Output\";\r\n        this.atomType = \"Output\";\r\n        this.height = 16;\r\n        this.radius = 15;\r\n        \r\n        this.setValues(values);\r\n        \r\n        this.addIO(\"input\", \"number or geometry\", this, \"geometry\", \"\");\r\n    }\r\n    \r\n    setID(newID){\r\n        this.uniqueID = newID;\r\n    }\r\n    \r\n    draw() {\r\n        \r\n        this.children.forEach(child => {\r\n            child.draw();       \r\n        });\r\n        \r\n        GlobalVariables.c.beginPath();\r\n        GlobalVariables.c.fillStyle = this.color;\r\n        GlobalVariables.c.rect(this.x - this.radius, this.y - this.height/2, 2*this.radius, this.height);\r\n        GlobalVariables.c.textAlign = \"end\"; \r\n        GlobalVariables.c.fillText(this.name, this.x + this.radius, this.y-this.radius);\r\n        GlobalVariables.c.fill();\r\n        GlobalVariables.c.closePath();\r\n        \r\n        GlobalVariables.c.beginPath();\r\n        GlobalVariables.c.moveTo(this.x + this.radius, this.y - this.height/2);\r\n        GlobalVariables.c.lineTo(this.x + this.radius + 10, this.y);\r\n        GlobalVariables.c.lineTo(this.x + this.radius, this.y + this.height/2);\r\n        GlobalVariables.c.fill();\r\n    }\r\n}","import Atom from '../prototypes/atom'\r\n\r\n\r\nexport default class Readme extends Atom{\r\n    constructor(values){\r\n        super(values);\r\n        \r\n        this.codeBlock = \"\";\r\n        this.atomType = \"Readme\";\r\n        this.readmeText = \"Readme text here\";\r\n        this.type = \"readme\";\r\n        this.name = \"README\";\r\n        this.radius = 20;\r\n        \r\n        this.setValues(values);\r\n    }\r\n    \r\n    updateSidebar(){\r\n        //updates the sidebar to display information about this node\r\n        \r\n        var valueList = super.updateSidebar(); //call the super function\r\n        \r\n        this.createEditableValueListItem(valueList,this,\"readmeText\", \"Notes\", false);\r\n        \r\n    }\r\n    \r\n    draw() {\r\n        \r\n        super.draw(); //Super call to draw the rest\r\n        \r\n        //draw the two slashes on the node//\r\n        c.strokeStyle = \"#949294\";\r\n        c.lineWidth = 3;\r\n        c.lineCap = \"round\";\r\n        \r\n        c.beginPath();\r\n        c.moveTo(this.x - 11, this.y + 10);\r\n        c.lineTo(this.x, this.y - 10);\r\n        c.stroke();\r\n        \r\n        c.beginPath();\r\n        c.moveTo(this.x, this.y + 10);\r\n        c.lineTo(this.x + 11, this.y - 10);\r\n        c.stroke();\r\n    }\r\n    \r\n    setValue(newText) {\r\n        this.readmeText = newText;\r\n    }\r\n    \r\n    requestReadme(){\r\n        //request any contributions from this atom to the readme\r\n        \r\n        return [this.readmeText];\r\n    }\r\n    \r\n    serialize(values){\r\n        //Save the readme text to the serial stream\r\n        var valuesObj = super.serialize(values);\r\n        \r\n        valuesObj.readmeText = this.readmeText;\r\n        \r\n        return valuesObj;\r\n        \r\n    }\r\n}\r\n","import Atom from '../prototypes/atom'\r\n\r\nexport default class Rectangle extends Atom {\r\n\r\n    constructor(values){\r\n        super(values)\r\n        \r\n        this.addIO(\"input\", \"x length\", this, \"number\", 10);\r\n        this.addIO(\"input\", \"y length\", this, \"number\", 10);\r\n        this.addIO(\"output\", \"geometry\", this, \"geometry\", \"\");\r\n        \r\n        this.name = \"Rectangle\";\r\n        this.atomType = \"Rectangle\";\r\n        this.defaultCodeBlock = \"square([~x length~,~y length~])\";\r\n        this.codeBlock = \"\";\r\n        \r\n        //generate the correct codeblock for this atom on creation\r\n        this.updateCodeBlock();\r\n        \r\n        this.setValues(values);\r\n    }\r\n}","import Atom from '../prototypes/atom'\r\n\r\nexport default class RegularPolygon extends Atom {\r\n\r\n    constructor(values){\r\n        super(values)\r\n        \r\n        this.addIO(\"input\", \"number of sides\", this, \"number\", 6);\r\n        this.addIO(\"input\", \"radius\", this, \"number\", 10);\r\n        this.addIO(\"output\", \"geometry\", this, \"geometry\", \"\");\r\n        \r\n        this.name = \"RegularPolygon\";\r\n        this.atomType = \"RegularPolygon\";\r\n\r\n        // create the polygon code block\r\n        this.updateCodeBlock();\r\n        \r\n        this.setValues(values);\r\n    }\r\n\r\n    updateCodeBlock() {\r\n        this.defaultCodeBlock = this.buildPolygonCodeBlock();\r\n        super.updateCodeBlock();\r\n    }\r\n\r\n    buildPolygonCodeBlock() {\r\n        let polygon = []\r\n        for(let i = 0; i < this.findIOValue(\"number of sides\"); i++) {\r\n            var angle = i * 2 * Math.PI / this.findIOValue(\"number of sides\") - Math.PI / 2;\r\n            polygon.push([\r\n                this.findIOValue(\"radius\") * Math.cos(angle),\r\n                this.findIOValue(\"radius\") * Math.sin(angle)\r\n            ])\r\n        }\r\n\r\n        return \"polygon(\" + JSON.stringify(polygon) + \")\";\r\n    }    \r\n}","import Atom from '../prototypes/atom'\r\n\r\nexport default class Rotate extends Atom {\r\n    \r\n    constructor(values){\r\n        \r\n        super(values)\r\n        \r\n        this.addIO(\"input\", \"geometry\", this, \"geometry\", \"\");\r\n        this.addIO(\"input\", \"x-axis degrees\", this, \"number\", 0);\r\n        this.addIO(\"input\", \"y-axis degrees\", this, \"number\", 0);\r\n        this.addIO(\"input\", \"z-axis degrees\", this, \"number\", 0);\r\n        this.addIO(\"output\", \"geometry\", this, \"geometry\", \"\");\r\n        \r\n        this.name = \"Rotate\";\r\n        this.atomType = \"Rotate\";\r\n        this.defaultCodeBlock = \"rotate([~x-axis degrees~,~y-axis degrees~,~z-axis degrees~],~geometry~)\";\r\n        this.codeBlock = \"\";\r\n        \r\n        this.setValues(values);\r\n    }\r\n}","import Atom from '../prototypes/atom'\r\n\r\nexport default class Scale extends Atom{\r\n    \r\n    constructor(values){\r\n        \r\n        super(values);\r\n        \r\n        this.addIO(\"input\", \"geometry\", this, \"geometry\", \"\");\r\n        this.addIO(\"input\", \"multiple\", this, \"number\", 10);\r\n        this.addIO(\"output\", \"geometry\", this, \"geometry\", \"\");\r\n        \r\n        this.name = \"Scale\";\r\n        this.atomType = \"Scale\";\r\n        this.defaultCodeBlock = \"~geometry~.scale(~multiple~)\";\r\n        this.codeBlock = \"\";\r\n        \r\n        this.setValues(values);\r\n    }\r\n}","import Atom from '../prototypes/atom'\r\n\r\nexport default class ShrinkWrap extends Atom{\r\n    \r\n    constructor(values){\r\n        super(values);\r\n        \r\n        this.addIO(\"output\", \"geometry\", this, \"geometry\", \"\");\r\n        \r\n        this.name = \"Shrink Wrap\";\r\n        this.atomType = \"ShrinkWrap\";\r\n        this.defaultCodeBlock = \"chain_hull({closed: false}, [ ])\";\r\n        this.codeBlock = \"\";\r\n        this.ioValues = [];\r\n        this.closedSelection = 0;\r\n        \r\n        this.setValues(values);\r\n        \r\n        if (typeof this.ioValues !== 'undefined'){\r\n            this.ioValues.forEach(ioValue => { //for each saved value\r\n                this.addIO(\"input\", ioValue.name, this, \"geometry\", \"\");\r\n            });\r\n        }\r\n        \r\n        this.updateCodeBlock();\r\n    }\r\n    \r\n    updateCodeBlock(){\r\n        \r\n        this.codeBlock = this.defaultCodeBlock;\r\n        \r\n        //Generate the code block string\r\n        var arrayOfChildrenString = \"[ \";\r\n        var numberOfElements = 0;\r\n        this.children.forEach(io => {\r\n            if(io.type == \"input\"){\r\n                if(numberOfElements > 0){\r\n                    arrayOfChildrenString = arrayOfChildrenString + \", \";\r\n                }\r\n                numberOfElements += 1;\r\n                arrayOfChildrenString = arrayOfChildrenString + io.getValue();\r\n            }\r\n        });\r\n        arrayOfChildrenString = arrayOfChildrenString + \"]\";\r\n        \r\n        //Insert the generated string into the code block\r\n        var regex = /\\[(.+)\\]/gi;\r\n        this.codeBlock = this.codeBlock.replace(regex, arrayOfChildrenString);\r\n        \r\n        //Add the text for open or closed\r\n        var endString;\r\n        if(this.closedSelection == 0){ //closed\r\n            endString = \"chain_hull({closed: true}\";\r\n        }\r\n        else{\r\n            endString = \"chain_hull({closed: false}\";\r\n        }\r\n        \r\n        var regex = /^.+?\\{(.+?)\\}/gi;\r\n        this.codeBlock = this.codeBlock.replace(regex, endString);\r\n        \r\n        //Shrink wrap it one more time if we have solid selected\r\n        if(this.closedSelection == 2){\r\n            this.codeBlock = \"chain_hull({closed: true}, [\" + this.codeBlock + \"])\"\r\n        }\r\n        \r\n        //Set the output nodes with name 'geometry' to be the generated code\r\n        this.children.forEach(child => {\r\n            if(child.valueType == 'geometry' && child.type == 'output'){\r\n                child.setValue(this.codeBlock);\r\n            }\r\n        });\r\n        \r\n        //If this molecule is selected, send the updated value to the renderer\r\n        if (this.selected){\r\n            this.sendToRender();\r\n        }\r\n        \r\n        //Delete or add ports as needed\r\n        \r\n        //Check to see if any of the loaded ports have been connected to. If they have, remove them from the this.ioValues list \r\n        this.children.forEach(child => {\r\n            this.ioValues.forEach(ioValue => {\r\n                if (child.name == ioValue.name && child.connectors.length > 0){\r\n                    this.ioValues.splice(this.ioValues.indexOf(ioValue),1); //Let's remove it from the ioValues list\r\n                }\r\n            });\r\n        });\r\n        \r\n        //Add or delete ports as needed\r\n        if(this.howManyInputPortsAvailable() == 0){ //We need to make a new port available\r\n            this.addIO(\"input\", \"2D shape \" + generateUniqueID(), this, \"geometry\", \"\");\r\n        }\r\n        if(this.howManyInputPortsAvailable() >= 2 && this.ioValues.length <= 1){  //We need to remove the empty port\r\n            this.deleteEmptyPort();\r\n            this.updateCodeBlock();\r\n        }\r\n    }\r\n    \r\n    howManyInputPortsAvailable(){\r\n        var portsAvailable = 0;\r\n        this.children.forEach(io => {\r\n            if(io.type == \"input\" && io.connectors.length == 0){   //if this port is available\r\n                portsAvailable = portsAvailable + 1;  //Add one to the count\r\n            }\r\n        });\r\n        return portsAvailable\r\n    }\r\n    \r\n    deleteEmptyPort(){\r\n        this.children.forEach(io => {\r\n            if(io.type == \"input\" && io.connectors.length == 0 && this.howManyInputPortsAvailable() >= 2){\r\n                this.removeIO(\"input\", io.name, this);\r\n            }\r\n        });\r\n    }\r\n    \r\n    serialize(savedObject){\r\n        var thisAsObject = super.serialize(savedObject);\r\n        \r\n        var ioValues = [];\r\n        this.children.forEach(io => {\r\n            if (io.type == \"input\"){\r\n                var saveIO = {\r\n                    name: io.name,\r\n                    ioValue: 10\r\n                };\r\n                ioValues.push(saveIO);\r\n            }\r\n        });\r\n        \r\n        ioValues.forEach(ioValue => {\r\n            thisAsObject.ioValues.push(ioValue);\r\n        });\r\n        \r\n        //Write the selection for if the chain is closed\r\n        thisAsObject.closedSelection = this.closedSelection;\r\n        \r\n        return thisAsObject;\r\n        \r\n    }\r\n    \r\n    updateSidebar(){\r\n        //Update the side bar to make it possible to change the molecule name\r\n        \r\n        var valueList = super.updateSidebar();\r\n        \r\n        this.createDropDown(valueList, this, [\"Closed\", \"Open\", \"Solid\"], this.closedSelection, \"End:\");\r\n        \r\n    } \r\n    \r\n    changeEquation(newValue){\r\n        this.closedSelection = parseInt(newValue);\r\n        this.updateCodeBlock();\r\n    }\r\n}","import Atom from '../prototypes/atom'\r\n\r\nexport default class Translate extends Atom{\r\n    \r\n    constructor(values){\r\n        super(values);\r\n        \r\n        this.addIO(\"input\", \"geometry\", this, \"geometry\", \"\");\r\n        this.addIO(\"input\", \"xDist\", this, \"number\", 0);\r\n        this.addIO(\"input\", \"yDist\", this, \"number\", 0);\r\n        this.addIO(\"input\", \"zDist\", this, \"number\", 0);\r\n        this.addIO(\"output\", \"geometry\", this, \"geometry\", \"\");\r\n        \r\n        this.name = \"Translate\";\r\n        this.atomType = \"Translate\";\r\n        this.defaultCodeBlock = \"~geometry~.translate([~xDist~, ~yDist~, ~zDist~])\";\r\n        this.codeBlock = \"\";\r\n        \r\n        this.setValues(values);\r\n    }\r\n}","import Atom from '../prototypes/atom'\r\n\r\nexport default class Union extends Atom {\r\n    \r\n    constructor(values){\r\n        \r\n        super(values);\r\n        \r\n        this.addIO(\"input\", \"geometry1\", this, \"geometry\", \"\");\r\n        this.addIO(\"input\", \"geometry2\", this, \"geometry\", \"\");\r\n        this.addIO(\"output\", \"geometry\", this, \"geometry\", \"\");\r\n        \r\n        this.name = \"Union\";\r\n        this.atomType = \"Union\";\r\n        this.defaultCodeBlock = \"union(~geometry1~,~geometry2~)\";\r\n        this.codeBlock = \"\";\r\n        \r\n        this.setValues(values);\r\n    }\r\n}","import AttachmentPoint from './attachmentpoint'\r\nimport GlobalVariables from '../globalvariables'\r\n\r\nexport default class Atom {\r\n\r\n    constructor(values){\r\n        //Setup default values\r\n        this.children = [];\r\n        \r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.radius = 20;\r\n        this.defaultColor = '#F3EFEF';\r\n        this.selectedColor = \"#484848\";\r\n        this.selected = false;\r\n        this.color = '#F3EFEF';\r\n        this.name = \"name\";\r\n        this.parentMolecule = null;\r\n        this.codeBlock = \"\";\r\n        this.defaultCodeBlock = \"\";\r\n        this.isMoving = false;\r\n        this.BOMlist = [];\r\n        \r\n        for(var key in values) {\r\n            this[key] = values[key];\r\n        }\r\n        \r\n    }\r\n    \r\n    setValues(values){\r\n        //Assign the object to have the passed in values\r\n        \r\n        for(var key in values) {\r\n            this[key] = values[key];\r\n        }\r\n        \r\n        if (typeof this.ioValues !== 'undefined') {\r\n            this.ioValues.forEach(ioValue => { //for each saved value\r\n                this.children.forEach(io => {  //Find the matching IO and set it to be the saved value\r\n                    if(ioValue.name == io.name && io.type == \"input\"){\r\n                        io.setValue(ioValue.ioValue);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n    \r\n    draw() {\r\n        \r\n        this.inputX = this.x - this.radius\r\n        this.outputX = this.x + this.radius\r\n        \r\n        this.children.forEach(child => {\r\n            child.draw();       \r\n        });\r\n        \r\n        c.beginPath();\r\n        c.fillStyle = this.color;\r\n        //make it imposible to draw atoms too close to the edge\r\n        //not sure what x left margin should be because if it's too close it would cover expanded text\r\n        var canvasFlow = document.querySelector('#flow-canvas');\r\n        if (this.x<this.radius*3){\r\n                this.x+= this.radius*3;    \r\n                c.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\r\n        }\r\n        else if (this.y<this.radius*2){\r\n                this.y += this.radius; \r\n                c.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\r\n        }\r\n        else if (this.x + this.radius*2 > canvasFlow.width){\r\n                this.x -= this.radius*2; \r\n                c.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\r\n        }\r\n        else if (this.y + this.radius*2 > canvasFlow.height){\r\n                this.y -= this.radius; \r\n                c.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\r\n        }\r\n        else{\r\n        c.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\r\n        }\r\n        c.textAlign = \"start\"; \r\n        c.fillText(this.name, this.x + this.radius, this.y-this.radius);\r\n        c.fill();\r\n        c.closePath();\r\n    }\r\n    \r\n    addIO(type, name, target, valueType, defaultValue){\r\n        \r\n        //compute the baseline offset from parent node\r\n        var offset;\r\n        if (type == \"input\"){\r\n            offset = -1* target.radius;\r\n        }\r\n        else{\r\n            offset = target.radius;\r\n        }\r\n        var input = new AttachmentPoint({\r\n            parentMolecule: target, \r\n            defaultOffsetX: offset, \r\n            defaultOffsetY: 0,\r\n            type: type,\r\n            valueType: valueType,\r\n            name: name,\r\n            value: defaultValue,\r\n            uniqueID: GlobalVariables.generateUniqueID(),\r\n            atomType: \"AttachmentPoint\"\r\n        });\r\n        target.children.push(input);\r\n    }\r\n    \r\n    removeIO(type, name, target){\r\n        //Remove the target IO attachment point\r\n        \r\n        this.children.forEach(io => {\r\n            if(io.name == name && io.type == type){\r\n                io.deleteSelf();\r\n                this.children.splice(this.children.indexOf(io),1);\r\n            }\r\n        });\r\n    }\r\n    \r\n    clickDown(x,y){\r\n        //Returns true if something was done with the click\r\n        \r\n        \r\n        var clickProcessed = false;\r\n        \r\n        this.children.forEach(child => {\r\n            if(child.clickDown(x,y) == true){\r\n                clickProcessed = true;\r\n            }\r\n        });\r\n        \r\n        //If none of the children processed the click\r\n        if(!clickProcessed){\r\n        \r\n            var distFromClick = distBetweenPoints(x, this.x, y, this.y);\r\n            \r\n            if (distFromClick < this.radius){\r\n                this.color = this.selectedColor;\r\n                this.isMoving = true;\r\n                this.selected = true;\r\n                this.updateSidebar();\r\n                \r\n                this.sendToRender();\r\n                \r\n                clickProcessed = true;\r\n            }\r\n            else{\r\n                this.color = this.defaultColor;\r\n                this.selected = false;\r\n            }\r\n            \r\n        }\r\n        \r\n        return clickProcessed; \r\n    }\r\n\r\n    doubleClick(x,y){\r\n        //returns true if something was done with the click\r\n        \r\n        \r\n        var clickProcessed = false;\r\n        \r\n        var distFromClick = distBetweenPoints(x, this.x, y, this.y);\r\n        \r\n        if (distFromClick < this.radius){\r\n            clickProcessed = true;\r\n        }\r\n        \r\n        return clickProcessed; \r\n    }\r\n\r\n    clickUp(x,y){\r\n        this.isMoving = false;\r\n        \r\n        this.children.forEach(child => {\r\n            child.clickUp(x,y);     \r\n        });\r\n    }\r\n\r\n    clickMove(x,y){\r\n        if (this.isMoving == true){\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n        \r\n        this.children.forEach(child => {\r\n            child.clickMove(x,y);       \r\n        });\r\n    }\r\n    \r\n    keyPress(key){\r\n        //runs whenver a key is pressed\r\n        if (key == 'Delete'){\r\n            if(this.selected == true){\r\n                this.deleteNode();\r\n            }\r\n        }\r\n        \r\n        this.children.forEach(child => {\r\n            child.keyPress(key);\r\n        });\r\n    }\r\n    \r\n    updateSidebar(){\r\n        //updates the sidebar to display information about this node\r\n        \r\n        //remove everything in the sideBar now\r\n        while (sideBar.firstChild) {\r\n            sideBar.removeChild(sideBar.firstChild);\r\n        }\r\n        \r\n        //add the name as a title\r\n        var name = document.createElement('h1');\r\n        name.textContent = this.name;\r\n        name.setAttribute(\"style\",\"text-align:center;\");\r\n        sideBar.appendChild(name);\r\n        \r\n        //Create a list element\r\n        var valueList = document.createElement(\"ul\");\r\n        sideBar.appendChild(valueList);\r\n        valueList.setAttribute(\"class\", \"sidebar-list\");\r\n        \r\n        //Add options to set all of the inputs\r\n        this.children.forEach(child => {\r\n            if(child.type == 'input' && child.valueType != 'geometry'){\r\n                this.createEditableValueListItem(valueList,child,\"value\", child.name, true);\r\n            }\r\n        });\r\n        \r\n        return valueList;\r\n    }\r\n    \r\n    deleteNode(){\r\n        //deletes this node and all of it's children\r\n        \r\n        this.children.forEach(child => {\r\n            child.deleteSelf();       \r\n        });\r\n        \r\n        this.parent.nodesOnTheScreen.splice(this.parent.nodesOnTheScreen.indexOf(this),1); //remove this node from the list\r\n    }\r\n    \r\n    update() {\r\n        \r\n        this.children.forEach(child => {\r\n            child.update();     \r\n        });\r\n        \r\n        this.draw()\r\n    }\r\n    \r\n    serialize(savedObject){\r\n        //savedObject is only used by Molecule type atoms\r\n        \r\n        var ioValues = [];\r\n        this.children.forEach(io => {\r\n            if (io.valueType == \"number\" && io.type == \"input\"){\r\n                var saveIO = {\r\n                    name: io.name,\r\n                    ioValue: io.getValue()\r\n                };\r\n                ioValues.push(saveIO);\r\n            }\r\n        });\r\n        \r\n        var object = {\r\n            atomType: this.atomType,\r\n            name: this.name,\r\n            x: this.x,\r\n            y: this.y,\r\n            uniqueID: this.uniqueID,\r\n            ioValues: ioValues\r\n        }\r\n        \r\n        return object;\r\n    }\r\n    \r\n    requestBOM(){\r\n        //Request any contributions from this atom to the BOM\r\n        \r\n        \r\n        //Find the number of things attached to this output\r\n        var numberOfThisInstance = 1;\r\n        this.children.forEach(io => {\r\n            if(io.type == \"output\" && io.connectors.length != 0){\r\n                numberOfThisInstance = io.connectors.length;\r\n            }\r\n        });\r\n        //And scale up the total needed by that number\r\n        this.BOMlist.forEach(bomItem => {\r\n            bomItem.totalNeeded = numberOfThisInstance*bomItem.numberNeeded;\r\n        });\r\n        \r\n        return this.BOMlist;\r\n    }\r\n    \r\n    requestReadme(){\r\n        //request any contributions from this atom to the readme\r\n        \r\n        return [];\r\n    }\r\n    \r\n    updateCodeBlock(){\r\n        //Substitute the result from each input for the ~...~ section with it's name\r\n        \r\n        var regex = /~(.*?)~/gi;\r\n        this.codeBlock = this.defaultCodeBlock.replace(regex, x => {\r\n            return this.findIOValue(x);\r\n        });\r\n        \r\n        //Set the output nodes with name 'geometry' to be the generated code\r\n        this.children.forEach(child => {\r\n            if(child.valueType == 'geometry' && child.type == 'output'){\r\n                child.setValue(this.codeBlock);\r\n            }\r\n        });\r\n        \r\n        //If this molecule is selected, send the updated value to the renderer\r\n        if (this.selected){\r\n            this.sendToRender();\r\n        }\r\n    }\r\n    \r\n    sendToRender(){\r\n        //Send code to JSCAD to render\r\n        if (this.codeBlock != \"\"){\r\n            var toRender = \"function main () {return \" + this.codeBlock + \"}\"\r\n            \r\n            window.loadDesign(toRender,\"MaslowCreate\");\r\n        }\r\n        //Send something invisible just to wipe the rendering\r\n        else{\r\n            var toRender = \"function main () {return sphere({r: .0001, center: true})}\"\r\n            window.loadDesign(toRender,\"MaslowCreate\");\r\n        }\r\n    }\r\n    \r\n    findIOValue(ioName){\r\n        //find the value of an input for a given name\r\n        \r\n        ioName = ioName.split('~').join('');\r\n        var ioValue = null;\r\n        \r\n        this.children.forEach(child => {\r\n            if(child.name == ioName && child.type == \"input\"){\r\n                ioValue = child.getValue();\r\n            }\r\n        });\r\n        \r\n        return ioValue;\r\n    }\r\n    \r\n    createEditableValueListItem(list,object,key, label, resultShouldBeNumber){\r\n        var listElement = document.createElement(\"LI\");\r\n        list.appendChild(listElement);\r\n        \r\n        \r\n        //Div which contains the entire element\r\n        var div = document.createElement(\"div\");\r\n        listElement.appendChild(div);\r\n        div.setAttribute(\"class\", \"sidebar-item\");\r\n        \r\n        //Left div which displays the label\r\n        var labelDiv = document.createElement(\"div\");\r\n        div.appendChild(labelDiv);\r\n        var labelText = document.createTextNode(label + \":\");\r\n        labelDiv.appendChild(labelText);\r\n        labelDiv.setAttribute(\"class\", \"sidebar-subitem\");\r\n        \r\n        \r\n        //Right div which is editable and displays the value\r\n        var valueTextDiv = document.createElement(\"div\");\r\n        div.appendChild(valueTextDiv);\r\n        var valueText = document.createTextNode(object[key]);\r\n        valueTextDiv.appendChild(valueText);\r\n        valueTextDiv.setAttribute(\"contenteditable\", \"true\");\r\n        valueTextDiv.setAttribute(\"class\", \"sidebar-subitem\");\r\n        var thisID = label+GlobalVariables.generateUniqueID();\r\n        valueTextDiv.setAttribute(\"id\", thisID);\r\n        \r\n        \r\n        document.getElementById(thisID).addEventListener('focusout', event => {\r\n            var valueInBox = document.getElementById(thisID).textContent;\r\n            if(resultShouldBeNumber){\r\n                valueInBox = parseFloat(valueInBox);\r\n            }\r\n            \r\n            //If the target is an attachmentPoint then call the setter function\r\n            if(object instanceof AttachmentPoint){\r\n                object.setValue(valueInBox);\r\n            }\r\n            else{\r\n                object[key] = valueInBox;\r\n            }\r\n        });\r\n        \r\n        //prevent the return key from being used when editing a value\r\n        document.getElementById(thisID).addEventListener('keypress', function(evt) {\r\n            if (evt.which === 13) {\r\n                evt.preventDefault();\r\n                document.getElementById(thisID).blur();  //shift focus away if someone presses enter\r\n            }\r\n        });\r\n\r\n    }\r\n    \r\n    createNonEditableValueListItem(list,object,key, label, resultShouldBeNumber){\r\n        var listElement = document.createElement(\"LI\");\r\n        list.appendChild(listElement);\r\n        \r\n        \r\n        //Div which contains the entire element\r\n        var div = document.createElement(\"div\");\r\n        listElement.appendChild(div);\r\n        div.setAttribute(\"class\", \"sidebar-item\");\r\n        \r\n        //Left div which displays the label\r\n        var labelDiv = document.createElement(\"div\");\r\n        div.appendChild(labelDiv);\r\n        var labelText = document.createTextNode(label + \":\");\r\n        labelDiv.appendChild(labelText);\r\n        labelDiv.setAttribute(\"class\", \"sidebar-subitem\");\r\n        \r\n        \r\n        //Right div which is editable and displays the value\r\n        var valueTextDiv = document.createElement(\"div\");\r\n        div.appendChild(valueTextDiv);\r\n        var valueText = document.createTextNode(object[key]);\r\n        valueTextDiv.appendChild(valueText);\r\n        valueTextDiv.setAttribute(\"contenteditable\", \"false\");\r\n        valueTextDiv.setAttribute(\"class\", \"sidebar-subitem\");\r\n        var thisID = label+GlobalVariables.generateUniqueID();\r\n        valueTextDiv.setAttribute(\"id\", thisID);\r\n        \r\n\r\n    }\r\n\r\n    createDropDown(list,parent,options,selectedOption, description){\r\n        var listElement = document.createElement(\"LI\");\r\n        list.appendChild(listElement);\r\n        \r\n        \r\n        //Div which contains the entire element\r\n        var div = document.createElement(\"div\");\r\n        listElement.appendChild(div);\r\n        div.setAttribute(\"class\", \"sidebar-item\");\r\n        \r\n        //Left div which displays the label\r\n        var labelDiv = document.createElement(\"div\");\r\n        div.appendChild(labelDiv);\r\n        var labelText = document.createTextNode(description);\r\n        labelDiv.appendChild(labelText);\r\n        labelDiv.setAttribute(\"class\", \"sidebar-subitem\");\r\n        \r\n        \r\n        //Right div which is editable and displays the value\r\n        var valueTextDiv = document.createElement(\"div\");\r\n        div.appendChild(valueTextDiv);\r\n        var dropDown = document.createElement(\"select\");\r\n        options.forEach(option => {\r\n            var op = new Option();\r\n            op.value = options.findIndex(thisOption => thisOption === option);\r\n            op.text = option;\r\n            dropDown.options.add(op);\r\n        });\r\n        valueTextDiv.appendChild(dropDown);\r\n        valueTextDiv.setAttribute(\"class\", \"sidebar-subitem\");\r\n        \r\n        dropDown.selectedIndex = selectedOption; //display the current selection\r\n        \r\n        dropDown.addEventListener(\r\n            'change',\r\n            function() { parent.changeEquation(dropDown.value); },\r\n            false\r\n        );\r\n    }\r\n\r\n    createButton(list,parent,buttonText,functionToCall){\r\n        var listElement = document.createElement(\"LI\");\r\n        list.appendChild(listElement);\r\n        \r\n        \r\n        //Div which contains the entire element\r\n        var div = document.createElement(\"div\");\r\n        listElement.appendChild(div);\r\n        div.setAttribute(\"class\", \"sidebar-item\");\r\n        \r\n        //Left div which displays the label\r\n        var labelDiv = document.createElement(\"div\");\r\n        div.appendChild(labelDiv);\r\n        var labelText = document.createTextNode(\"\");\r\n        labelDiv.appendChild(labelText);\r\n        labelDiv.setAttribute(\"class\", \"sidebar-subitem\");\r\n        \r\n        \r\n        //Right div which is button\r\n        var valueTextDiv = document.createElement(\"div\");\r\n        div.appendChild(valueTextDiv);\r\n        var button = document.createElement(\"button\");\r\n        var buttonTextNode = document.createTextNode(buttonText);\r\n        button.setAttribute(\"class\", \"sidebar_button\");\r\n        button.appendChild(buttonTextNode);\r\n        valueTextDiv.appendChild(button);\r\n        valueTextDiv.setAttribute(\"class\", \"sidebar-subitem\");\r\n        \r\n        button.addEventListener(\r\n            'mousedown',\r\n            function() { functionToCall(parent); } ,\r\n            false\r\n        );\r\n    }\r\n\r\n    createBOM(list,parent,BOMlist){\r\n        //aBOMEntry = new bomEntry;\r\n        \r\n        \r\n        list.appendChild(document.createElement('br'));\r\n        list.appendChild(document.createElement('br'));\r\n        \r\n        var div = document.createElement(\"h3\");\r\n        div.setAttribute(\"style\",\"text-align:center;\");\r\n        list.appendChild(div);\r\n        var valueText = document.createTextNode(\"Bill Of Materials\");\r\n        div.appendChild(valueText);\r\n        \r\n        var x = document.createElement(\"HR\");\r\n        list.appendChild(x);\r\n        \r\n        this.requestBOM().forEach(bomItem => {\r\n            if(this.BOMlist.indexOf(bomItem) != -1){ //If the bom item is from this molecule\r\n                this.createEditableValueListItem(list,bomItem,\"BOMitemName\", \"Item\", false)\r\n                this.createEditableValueListItem(list,bomItem,\"numberNeeded\", \"Number\", true)\r\n                this.createEditableValueListItem(list,bomItem,\"costUSD\", \"Price\", true)\r\n                this.createEditableValueListItem(list,bomItem,\"source\", \"Source\", false)\r\n            }\r\n            else{\r\n                this.createNonEditableValueListItem(list,bomItem,\"BOMitemName\", \"Item\", false)\r\n                this.createNonEditableValueListItem(list,bomItem,\"totalNeeded\", \"Number\", true)\r\n                this.createNonEditableValueListItem(list,bomItem,\"costUSD\", \"Price\", true)\r\n                this.createNonEditableValueListItem(list,bomItem,\"source\", \"Source\", false)\r\n            }\r\n            var x = document.createElement(\"HR\");\r\n            list.appendChild(x);\r\n        });\r\n        \r\n        this.createButton(list,parent,\"Add BOM Entry\", this.addBOMEntry);\r\n    }\r\n    \r\n    addBOMEntry(self){\r\n        console.log(\"add a bom entry\");\r\n        \r\n        self.BOMlist.push(new BOMEntry());\r\n        \r\n        self.updateSidebar();\r\n    }\r\n}\r\n","import Connector from './connector'\r\nimport GlobalVariables from '../globalvariables'\r\n\r\nexport default class AttachmentPoint {\r\n    constructor(values){\r\n \r\n        this.defaultRadius = 8;\r\n        this.expandedRadius = 14;\r\n        this.radius = 8;\r\n        \r\n        this.hoverDetectRadius = 8;\r\n        this.hoverOffsetX = 0;\r\n        this.hoverOffsetY = 0;\r\n        this.uniqueID = 0;\r\n        this.defaultOffsetX = 0;\r\n        this.defaultOffsetY = 0;\r\n        this.offsetX = 0;\r\n        this.offsetY = 0;\r\n        this.showHoverText = false;\r\n        this.atomType = \"AttachmentPoint\";\r\n        \r\n        this.valueType = \"number\"; //options are number, geometry, array\r\n        this.type = \"output\";\r\n        this.value = 10; //The default input value when nothing is connected\r\n        \r\n        this.connectors = [];\r\n        \r\n        this.offsetX = this.defaultOffsetX;\r\n        this.offsetY = this.defaultOffsetY;\r\n        \r\n        for(var key in values) {\r\n            this[key] = values[key];\r\n        }\r\n        \r\n        this.clickMove(0,0); //trigger a refresh to get all the current values\r\n    }\r\n    \r\n    draw() {\r\n\r\n        var txt = this.name;\r\n        var textWidth = GlobalVariables.c.measureText(txt).width;\r\n        var bubbleColor = \"#008080\";\r\n        var scaleRadiusDown = this.radius*.7;\r\n        var halfRadius = this.radius*.5;\r\n        \r\n        if (this.showHoverText){\r\n            if(this.type == \"input\"){\r\n                GlobalVariables.c.beginPath();\r\n                GlobalVariables.c.fillStyle = bubbleColor;\r\n                    if (this.radius == this.expandedRadius) {\r\n                    GlobalVariables.c.rect(this.x - textWidth - this.radius - halfRadius, this.y - scaleRadiusDown, textWidth + this.radius + halfRadius , scaleRadiusDown*2);\r\n                    GlobalVariables.c.arc(this.x - textWidth - this.radius - halfRadius, this.y, scaleRadiusDown, 0, Math.PI * 2, false);\r\n                }\r\n                    else if(this.radius == this.defaultRadius){\r\n                    GlobalVariables.c.rect(this.x - textWidth - this.radius - halfRadius, this.y - this.radius, textWidth + this.radius + halfRadius , this.radius*2);   \r\n                    GlobalVariables.c.arc(this.x - textWidth - this.radius - halfRadius, this.y, this.radius, 0, Math.PI * 2, false);\r\n                }\r\n                GlobalVariables.c.fill();\r\n                GlobalVariables.c.beginPath();\r\n                GlobalVariables.c.fillStyle = this.parentMolecule.defaultColor;\r\n                GlobalVariables.c.textAlign = \"end\";\r\n                GlobalVariables.c.fillText(this.name, this.x - (this.radius + 3), this.y+2)\r\n                GlobalVariables.c.fill();\r\n                GlobalVariables.c.closePath();\r\n            }\r\n            else{\r\n                GlobalVariables.c.beginPath();\r\n                GlobalVariables.c.fillStyle = bubbleColor;\r\n                GlobalVariables.c.rect(this.x, this.y - scaleRadiusDown, textWidth + this.radius + halfRadius, scaleRadiusDown*2);\r\n                GlobalVariables.c.arc(this.x + textWidth + this.radius + halfRadius, this.y, scaleRadiusDown, 0, Math.PI * 2, false);\r\n                GlobalVariables.c.fill();\r\n                GlobalVariables.c.closePath();\r\n                GlobalVariables.c.beginPath();\r\n                GlobalVariables.c.fillStyle = this.parentMolecule.defaultColor;\r\n                GlobalVariables.c.textAlign = \"start\"; \r\n                GlobalVariables.c.fillText(this.name, (this.x + halfRadius) + (this.radius + 3), this.y+2)\r\n                GlobalVariables.c.fill();\r\n                GlobalVariables.c.closePath();\r\n            }\r\n        }\r\n        GlobalVariables.c.beginPath();\r\n        GlobalVariables.c.fillStyle = this.parentMolecule.color;\r\n        GlobalVariables.c.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\r\n        GlobalVariables.c.fill();\r\n        GlobalVariables.c.closePath();  \r\n    }\r\n\r\n    clickDown(x,y){\r\n        if(GlobalVariables.distBetweenPoints (this.x, x, this.y, y) < this.defaultRadius){\r\n            \r\n            if(this.type == 'output'){                  //begin to extend a connector from this if it is an output\r\n                var connector = new Connector({\r\n                    parentMolecule: this.parentMolecule, \r\n                    attachmentPoint1: this,\r\n                    atomType: \"Connector\"\r\n                });\r\n                this.connectors.push(connector);\r\n            }\r\n            \r\n            if(this.type == 'input'){ //connectors can only be selected by clicking on an input\r\n                this.connectors.forEach(connector => {     //select any connectors attached to this node\r\n                    connector.selected = true;\r\n                });\r\n            }\r\n            \r\n            return true; //indicate that the click was handled by this object\r\n        }\r\n        else{\r\n            if(this.type == 'input'){ //connectors can only be selected by clicking on an input\r\n                this.connectors.forEach(connector => {      //unselect any connectors attached to this node\r\n                    connector.selected = false;\r\n                });\r\n            }\r\n            return false; //indicate that the click was not handled by this object\r\n        }\r\n    }\r\n\r\n    clickUp(x,y){\r\n        this.connectors.forEach(connector => {\r\n            connector.clickUp(x, y);       \r\n        });\r\n    }\r\n\r\n    clickMove(x,y){\r\n        \r\n        //expand if touched by mouse\r\n        var distFromCursor = GlobalVariables.distBetweenPoints (this.x, x, this.y, y);\r\n        \r\n        //If we are hovering over the attachment point, indicate that by making it big\r\n        if (distFromCursor < this.defaultRadius){\r\n            this.radius = this.expandedRadius;\r\n        }\r\n        else{\r\n            this.radius = this.defaultRadius;\r\n        }\r\n        //If we are close to the attachment point move it to it's hover location to make it accessible\r\n        //Change direction of hover drop down if too close to the top.\r\n        if (distFromCursor < this.hoverDetectRadius){\r\n\r\n            var numAttachmentPoints= this.parentMolecule.children.length;\r\n            var attachmentPointNumber = this.parentMolecule.children.indexOf(this);  \r\n       \r\n             // if input type then offset first element down to give space for radial menu \r\n            if (this.type == \"output\"){\r\n                this.offsetX = this.defaultOffsetX;\r\n                this.offsetY = this.defaultOffsetY;\r\n            }\r\n            else{\r\n                var anglePerIO = 2.0944/ numAttachmentPoints; //120 deg/num\r\n                // angle correction so that it centers menu adjusting to however many attachment points there are \r\n                var angleCorrection = anglePerIO * (numAttachmentPoints - 2 /* -1 correction + 1 for \"output\" IO */);\r\n\r\n                this.hoverOffsetY = Math.round( 1.5* this.parentMolecule.radius * (Math.sin(-angleCorrection + anglePerIO * 2 * attachmentPointNumber)));\r\n                this.hoverOffsetX = -Math.round(1.5* this.parentMolecule.radius * (Math.cos(-angleCorrection + anglePerIO * 2 * attachmentPointNumber)));\r\n                this.offsetX = this.hoverOffsetX; \r\n                this.offsetY = this.hoverOffsetY;  \r\n                 }\r\n            this.showHoverText = true;\r\n            this.hoverDetectRadius = this.defaultRadius + GlobalVariables.distBetweenPoints (this.defaultOffsetX, this.hoverOffsetX, this.defaultOffsetY, this.hoverOffsetY); \r\n\r\n            }\r\n        else{\r\n            this.offsetX = this.defaultOffsetX;\r\n            this.offsetY = this.defaultOffsetY;\r\n            this.showHoverText = false;\r\n            this.hoverDetectRadius = this.defaultRadius;\r\n        }\r\n        \r\n        this.connectors.forEach(connector => {\r\n            connector.clickMove(x, y);       \r\n        });\r\n    }\r\n    \r\n    keyPress(key){\r\n        this.connectors.forEach(connector => {\r\n            connector.keyPress(key);       \r\n        });\r\n    }\r\n    \r\n    deleteSelf(){\r\n        //remove any connectors which were attached to this attachment point\r\n        \r\n        this.connectors.forEach(connector => {\r\n            connector.deleteSelf();       \r\n        });\r\n        \r\n    }\r\n    \r\n    updateSidebar(){\r\n        this.parent.updateSidebar();\r\n    }\r\n    \r\n    wasConnectionMade(x,y, connector){\r\n        //this function returns itself if the coordinates passed in are within itself\r\n        if (GlobalVariables.distBetweenPoints(this.x, x, this.y, y) < this.radius && this.type == 'input'){  //If we have released the mouse here and this is an input...\r\n            \r\n            if(this.connectors.length > 0){ //Don't accept a second connection to an input\r\n                return false;\r\n            }\r\n            \r\n            this.connectors.push(connector);\r\n            \r\n            return this;\r\n        }\r\n        return false;\r\n    }\r\n    \r\n    getValue(){\r\n        return this.value;\r\n    }\r\n    \r\n    setValue(newValue){\r\n        this.value = newValue;\r\n        \r\n        //propigate the change to linked elements if this is an output\r\n        if (this.type == 'output'){\r\n            this.connectors.forEach(connector => {     //select any connectors attached to this node\r\n                connector.propogate();\r\n            });\r\n        }\r\n        //if this is an input\r\n        else{   //update the code block to reflect the new values\r\n            this.parentMolecule.updateCodeBlock();\r\n        }\r\n    }\r\n    \r\n    update() {\r\n        this.x = this.parentMolecule.x + this.offsetX;\r\n        this.y = this.parentMolecule.y + this.offsetY;\r\n        this.draw()\r\n       \r\n        this.connectors.forEach(connector => {\r\n            connector.update();       \r\n        });\r\n    }\r\n}","export default class Connector {\r\n    constructor(values){\r\n        \r\n        this.isMoving = true;\r\n        this.color = 'black';\r\n        this.atomType = \"Connector\";\r\n        this.selected = false;\r\n        this.attachmentPoint1 = null;\r\n        this.attachmentPoint2 = null;\r\n        \r\n        for(var key in values) {\r\n            this[key] = values[key];\r\n        }\r\n        \r\n        this.startX = this.parentMolecule.outputX;\r\n        this.startY = this.parentMolecule.y;\r\n    }\r\n    \r\n    draw(){\r\n        \r\n        c.beginPath();\r\n        c.fillStyle = this.color;\r\n        c.strokeStyle = this.color;\r\n        c.globalCompositeOperation = 'destination-over'; //draw under other elements;\r\n        if(this.selected){\r\n            c.lineWidth = 3;\r\n        }\r\n        else{\r\n            c.lineWidth = 1;\r\n        }\r\n        c.moveTo(this.startX, this.startY);\r\n        c.bezierCurveTo(this.startX + 100, this.startY, this.endX - 100, this.endY, this.endX, this.endY);\r\n        c.stroke();\r\n        c.globalCompositeOperation = 'source-over'; //switch back to drawing on top\r\n    }\r\n\r\n    clickUp(x,y){\r\n        \r\n        if(this.isMoving){  //we only want to attach the connector which is currently moving\r\n            currentMolecule.nodesOnTheScreen.forEach(molecule => {                      //For every molecule on the screen  \r\n                molecule.children.forEach(child => {                                    //For each of their attachment points\r\n                    var thisConnectionValid = child.wasConnectionMade(x,y, this);       //Check to see if we made a connection\r\n                    if(thisConnectionValid){\r\n                        this.attachmentPoint2 = thisConnectionValid;\r\n                        this.propogate();                                               //Send information from one point to the other\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        \r\n        \r\n        if (this.attachmentPoint2 == null){                                 //If we have not made a connection\r\n            this.deleteSelf();                                              //Delete this connector\r\n        }\r\n        \r\n        this.isMoving = false;                                                         //Move over \r\n    }\r\n\r\n    clickMove(x,y){\r\n        if (this.isMoving == true){\r\n            this.endX = x;\r\n            this.endY = y;\r\n        }\r\n    }\r\n    \r\n    keyPress(key){\r\n        if(this.selected){\r\n            if (key == 'Delete'){\r\n                this.deleteSelf();\r\n            }\r\n        }\r\n    }\r\n    \r\n    deleteSelf(){\r\n        //Free up the input to which this was attached\r\n        if(this.attachmentPoint2 != null){\r\n            this.attachmentPoint2.connectors = [];\r\n        }\r\n        \r\n        //Remove this connector from the output it is attached to\r\n        this.attachmentPoint1.connectors.splice(this.attachmentPoint1.connectors.indexOf(this),1); \r\n    }\r\n    \r\n    serialize(){\r\n        if ( this.attachmentPoint2 != null){\r\n            var object = {\r\n                ap1Name: this.attachmentPoint1.name,\r\n                ap2Name: this.attachmentPoint2.name,\r\n                ap1ID: this.attachmentPoint1.parentMolecule.uniqueID,\r\n                ap2ID: this.attachmentPoint2.parentMolecule.uniqueID\r\n            }\r\n            return JSON.stringify(object);\r\n        }\r\n    }\r\n    \r\n    propogate(){\r\n        //takes the input and passes it to the output\r\n        this.attachmentPoint2.setValue(this.attachmentPoint1.getValue());\r\n    }\r\n    \r\n    update() {\r\n        \r\n        this.startX = this.attachmentPoint1.x\r\n        this.startY = this.attachmentPoint1.y\r\n        if (this.attachmentPoint2){  //check to see if the attachment point is defined\r\n            this.endX = this.attachmentPoint2.x;\r\n            this.endY = this.attachmentPoint2.y;\r\n        }\r\n        this.draw()\r\n    }\r\n    \r\n    wasConnectionMade(x,y, connector){\r\n        return false;\r\n    }\r\n\r\n}"],"sourceRoot":""}